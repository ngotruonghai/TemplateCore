const Mn={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Qd=Object.keys(Mn).map(t=>Mn[t]).join(""),fo="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",tg=/\s/g,zu=new RegExp(`^(${fo}\\*)?([${Qd}])(/${fo})?([-+]{1,2}${fo})?$`,"g");function jc(t){throw new Error(`Invalid calc() expression: ${t}`)}function eg(t,e){const n=zu.exec(t.replace(tg,""));n||jc(t),zu.lastIndex=0;const[,r,i,s,o]=n,{x:u,y:l,width:d,height:g}=e;let h=0;switch(i){case Mn.width:{h=d;break}case Mn.height:{h=g;break}case Mn.x:{h=u;break}case Mn.y:{h=l;break}case Mn.minimum:{h=Math.min(g,d);break}case Mn.maximum:{h=Math.max(g,d);break}case Mn.diagonal:{h=Math.sqrt(g*g+d*d);break}}return r&&(h*=parseFloat(r)),s&&(h/=parseFloat(s.slice(1))),o&&(h+=ng(o)),h}function ng(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}function wn(t){return typeof t=="string"&&t.includes("calc")}const Xc="calc(",$u=Xc.length;function An(t,e){let n=t,r=0;do{let i=n.indexOf(Xc,r);if(i===-1)return n;let s=i+$u,o=1;t:do{switch(n[s]){case"(":{o++;break}case")":{if(o--,o===0)break t;break}case void 0:jc(n)}s++}while(!0);let u=n.slice(i+$u,s);wn(u)&&(u=An(u,e));const l=String(eg(u,e));n=n.slice(0,i)+l+n.slice(s+1),r=i+l.length}while(!0)}const{round:rg,floor:ig,PI:Zc}=Math,sg={linear:function(t,e,n){var r=t[1]-t[0],i=e[1]-e[0];return(n-t[0])/r*i+e[0]||0}},fn=function(t){return t%360+(t<0?360:0)},sr=function(t,e){return e*rg(t/e)},xs=function(t){return 180*t/Zc%360},$e=function(t,e){return e=e||!1,t=e?t:t%360,t*Zc/180},No=function(t,e){if(e===void 0)e=t===void 0?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return ig(Math.random()*(e-t+1)+t)},{cos:Hi,sin:ho,atan2:og}=Math,Jc=function(t,e){var n=$e(t.y),r=$e(e.y),i=t.x,s=e.x,o=$e(s-i),u=ho(o)*Hi(r),l=Hi(n)*ho(r)-ho(n)*Hi(r)*Hi(o),d=xs(og(u,l)),g=["NE","E","SE","S","SW","W","NW","N"],h=d-22.5;return h<0&&(h+=360),h=parseInt(h/45),g[h]},Ko=function(t,e){var n=t.x,r=t.y,i=e.x,s=e.y;return(n-=i)*n+(r-=s)*r},Kc=function(t,e){return Math.sqrt(Ko(t,e))},Bt={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:as,cos:ko,sin:Io,sqrt:Hu,min:qu,max:Gu,atan2:ag,round:Uu,pow:ug,PI:Wu}=Math,D=function(t,e){if(!(this instanceof D))return new D(t,e);if(typeof t=="string"){var n=t.split(t.indexOf("@")===-1?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=t===void 0?0:t,this.y=e===void 0?0:e};D.fromPolar=function(t,e,n){n=new D(n);var r=as(t*ko(e)),i=as(t*Io(e)),s=fn(xs(e));return s<90?i=-i:s<180?(r=-r,i=-i):s<270&&(r=-r),new D(n.x+r,n.y+i)};D.random=function(t,e,n,r){return new D(No(t,e),No(n,r))};D.prototype={type:Bt.Point,chooseClosest:function(t){var e=t.length;if(e===1)return new D(t[0]);for(var n=null,r=1/0,i=0;i<e;i++){var s=new D(t[i]),o=this.squaredDistance(s);o<r&&(n=s,r=o)}return n},adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=qu(Gu(this.x,t.x),t.x+t.width),this.y=qu(Gu(this.y,t.y),t.y+t.height),this)},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return Jc(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new D(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new D(this.x-(t||0),this.y-(e||0))},distance:function(t){return Kc(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var n=this.x,r=this.y;return new D((1-e)*n+e*t.x,(1-e)*r+e*t.y)},magnitude:function(){return Hu(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return as(t.x-this.x)+as(t.y-this.y)},move:function(t,e){var n=$e(new D(t).theta(this)),r=this.offset(ko(n)*e,-Io(n)*e);return r},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new D(t).move(this,this.distance(t))},rotate:function(t,e){if(e===0)return this;t=t||new D(0,0),e=$e(fn(-e));var n=ko(e),r=Io(e),i=n*(this.x-t.x)-r*(this.y-t.y)+t.x,s=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=i,this.y=s,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=ug(10,t);break}return this.x=Uu(this.x*e)/e,this.y=Uu(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new D(n)||new D(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=sr(this.x,t),this.y=sr(this.y,e||t),this},squaredDistance:function(t){return Ko(this,t)},theta:function(t){t=new D(t);var e=-(t.y-this.y),n=t.x-this.x,r=ag(e,n);return r<0&&(r=2*Wu+r),180*r/Wu},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new D(t)||new D(0,0);var e=this.x,n=this.y;return this.x=Hu((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=$e(t.theta(new D(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){var e=new D(0,0);return e.angleBetween(this,t)}};D.prototype.translate=D.prototype.offset;const us=D,{max:go,min:po}=Math,vt=function(t,e){if(!(this instanceof vt))return new vt(t,e);if(t instanceof vt)return new vt(t.start,t.end);this.start=new D(t),this.end=new D(e)};vt.prototype={type:Bt.Line,angle:function(){var t=new D(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=po(this.start.x,this.end.x),e=po(this.start.y,this.end.y),n=go(this.start.x,this.end.x),r=go(this.start.y,this.end.y);return new pt(t,e,n-t,r-e)},bearing:function(){return Jc(this.start,this.end)},clone:function(){return new vt(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new vt(this.start,t).vector()),n=po(1,go(0,e/this.squaredLength()));return n!==n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(e.cross(t,n)!==0)return!1;var r=this.length();return!(new vt(e,t).length()>r||new vt(t,n).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new vt(this.start,e),new vt(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new vt(this.start,e),new vt(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof vt&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new D(this.end.x-this.start.x,this.end.y-this.start.y),n=new D(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=new D(t.start.x-this.start.x,t.start.y-this.start.y),s=i.x*n.y-i.y*n.x,o=i.x*e.y-i.y*e.x;if(r===0||s*r<0||o*r<0)return null;if(r>0){if(s>r||o>r)return null}else if(s<r||o<r)return null;return[new D(this.start.x+s*e.x/r,this.start.y+s*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Kc(this.start,this.end)},midpoint:function(){return new D((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:n,end:r}=e,i=n.clone().rotate(r,270),s=r.clone().rotate(n,90);return n.move(s,t),r.move(i,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var i=this.length();return t>=i?r?n.clone():e.clone():this.pointAt((r?t:i-t)/i)},pointOffset:function(t){t=new D(t);var e=this.start,n=this.end,r=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x);return r/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return Ko(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAt(t),i=new vt(e,n);return i.translate(r.x-e.x,r.y-e.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAtLength(t),i=new vt(e,n);return i.translate(r.x-e.x,r.y-e.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new D(this.end.x-this.start.x,this.end.y-this.start.y)}};vt.prototype.intersection=vt.prototype.intersect;const rr=vt,{sqrt:Yu,round:qi,pow:cg}=Math,Ne=function(t,e,n){if(!(this instanceof Ne))return new Ne(t,e,n);if(t instanceof Ne)return new Ne(new D(t.x,t.y),t.a,t.b);t=new D(t),this.x=t.x,this.y=t.y,this.a=e,this.b=n};Ne.fromRect=function(t){return t=new pt(t),new Ne(t.center(),t.width/2,t.height/2)};Ne.prototype={type:Bt.Ellipse,bbox:function(){return new pt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new D(this.x,this.y)},clone:function(){return new Ne(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,r=t.end,i=this.a,s=this.b,o=t.vector(),u=n.difference(new D(this)),l=new D(o.x/(i*i),o.y/(s*s)),d=new D(u.x/(i*i),u.y/(s*s)),g=o.dot(l),h=o.dot(d),b=u.dot(d)-1,P=h*h-g*b;if(P<0)return null;if(P>0){var A=Yu(P),E=(-h-A)/g,N=(-h+A)/g;if((E<0||1<E)&&(N<0||1<N))return null;0<=E&&E<=1&&e.push(n.lerp(r,E)),0<=N&&N<=1&&e.push(n.lerp(r,N))}else{var L=-h/g;if(0<=L&&L<=1)e.push(n.lerp(r,L));else return null}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new D(t),e&&t.rotate(new D(this.x,this.y),e);var n=t.x-this.x,r=t.y-this.y,i;if(n===0)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(new D(this.x,this.y),-e):i;var s=r/n,o=s*s,u=this.a*this.a,l=this.b*this.b,d=Yu(1/(1/u+o/l));d=n<0?-d:d;var g=s*d;return i=new D(this.x+d,this.y+g),e?i.rotate(new D(this.x,this.y),-e):i},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,i=this.b,s=this.x,o=this.y;return(e-s)*(e-s)/(r*r)+(n-o)*(n-o)/(i*i)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=cg(10,t);break}return this.x=qi(this.x*e)/e,this.y=qi(this.y*e)/e,this.a=qi(this.a*e)/e,this.b=qi(this.b*e)/e,this},tangentTheta:function(t){var e=30,n=t.x,r=t.y,i=this.a,s=this.b,o=this.bbox().center(),u=o.x,l=o.y,d=n>o.x+i/2,g=n<o.x-i/2,h,b;return d||g?(h=n>o.x?r-e:r+e,b=i*i/(n-u)-i*i*(r-l)*(h-l)/(s*s*(n-u))+u):(b=r>o.y?n+e:n-e,h=s*s/(r-l)-s*s*(n-u)*(b-u)/(i*i*(r-l))+l),new D(b,h).theta(t)},toString:function(){return new D(this.x,this.y).toString()+" "+this.a+" "+this.b}};const lg=Ne,{abs:ju,cos:fg,sin:hg,min:ti,max:Xu,round:Gi,pow:dg}=Math,pt=function(t,e,n,r){if(!(this instanceof pt))return new pt(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t===void 0?0:t,this.y=e===void 0?0:e,this.width=n===void 0?0:n,this.height=r===void 0?0:r};pt.fromEllipse=function(t){return t=new Ne(t),new pt(t.x-t.a,t.y-t.b,2*t.a,2*t.b)};pt.fromPointUnion=function(...t){if(t.length===0)return null;const e=new D;let n,r,i,s;n=r=1/0,i=s=-1/0;for(let o=0;o<t.length;o++){e.update(t[o]);const u=e.x,l=e.y;u<n&&(n=u),u>i&&(i=u),l<r&&(r=l),l>s&&(s=l)}return new pt(n,r,i-n,s-r)};pt.fromRectUnion=function(...t){if(t.length===0)return null;const e=new pt;let n,r,i,s;n=r=1/0,i=s=-1/0;for(let o=0;o<t.length;o++){e.update(t[o]);const u=e.x,l=e.y,d=u+e.width,g=l+e.height;u<n&&(n=u),d>i&&(i=d),l<r&&(r=l),g>s&&(s=g)}return new pt(n,r,i-n,s-r)};pt.prototype={type:Bt.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:n}=this,r=$e(t),i=ju(hg(r)),s=ju(fg(r)),o=e*s+n*i,u=e*i+n*s;return this.x+=(e-o)/2,this.y+=(n-u)/2,this.width=o,this.height=u,this},bottomLeft:function(){return new D(this.x,this.y+this.height)},bottomLine:function(){return new vt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new D(this.x+this.width/2,this.y+this.height)},center:function(){return new D(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new pt(this)},containsPoint:function(t){return t instanceof D||(t=new D(t)),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new pt(this).normalize(),n=new pt(t).normalize(),r=e.width,i=e.height,s=n.width,o=n.height;if(!r||!i||!s||!o)return!1;var u=e.x,l=e.y,d=n.x,g=n.y;return s+=d,r+=u,o+=g,i+=l,u<=d&&s<=r&&l<=g&&o<=i},corner:function(){return new D(this.x+this.width,this.y+this.height)},equals:function(t){var e=new pt(this).normalize(),n=new pt(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var s=Xu(e.x,r.x),o=Xu(e.y,r.y);return new pt(s,o,ti(n.x,i.x)-s,ti(n.y,i.y)-o)},intersectionWithLine:function(t){var e=this,n=[e.topLine(),e.rightLine(),e.bottomLine(),e.leftLine()],r=[],i=[],s,o,u=n.length;for(o=0;o<u;o++)s=t.intersect(n[o]),s!==null&&i.indexOf(s.toString())<0&&(r.push(s),i.push(s.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new D(t);var n=new D(this.x+this.width/2,this.y+this.height/2),r;e&&t.rotate(n,e);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new vt(n,t),o=i.length-1;o>=0;--o){var u=i[o].intersection(s);if(u!==null){r=u;break}}return r&&e&&r.rotate(n,-e),r},leftLine:function(){return new vt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new D(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){t=new pt(t),e||(e=t.center());var n,r,i,s,o,u,l,d,g=e.x,h=e.y;n=r=i=s=o=u=l=d=1/0;var b=t.topLeft();b.x<g&&(n=(this.x-g)/(b.x-g)),b.y<h&&(o=(this.y-h)/(b.y-h));var P=t.bottomRight();P.x>g&&(r=(this.x+this.width-g)/(P.x-g)),P.y>h&&(u=(this.y+this.height-h)/(P.y-h));var A=t.topRight();A.x>g&&(i=(this.x+this.width-g)/(A.x-g)),A.y<h&&(l=(this.y-h)/(A.y-h));var E=t.bottomLeft();return E.x<g&&(s=(this.x-g)/(E.x-g)),E.y>h&&(d=(this.y+this.height-h)/(E.y-h)),{sx:ti(n,r,i,s),sy:ti(o,u,l,d)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return ti(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},offset:function(t,e){return D.prototype.offset.call(this,t,e)},origin:function(){return new D(this.x,this.y)},pointNearestToPoint:function(t){if(t=new D(t),this.containsPoint(t)){var e=this.sideNearestToPoint(t);switch(e){case"right":return new D(this.x+this.width,t.y);case"left":return new D(this.x,t.y);case"bottom":return new D(t.x,this.y+this.height);case"top":return new D(t.x,this.y)}}return t.adhereToRect(this)},rightLine:function(){return new vt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new D(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=dg(10,t);break}return this.x=Gi(this.x*e)/e,this.y=Gi(this.y*e)/e,this.width=Gi(this.width*e)/e,this.height=Gi(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=new D(t);var e=t.x-this.x,n=this.x+this.width-t.x,r=t.y-this.y,i=this.y+this.height-t.y,s=e,o="left";return n<s&&(s=n,o="right"),r<s&&(s=r,o="top"),i<s&&(o="bottom"),o},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new vt(this.topLeft(),this.topRight())},topMiddle:function(){return new D(this.x+this.width/2,this.y)},topRight:function(){return new D(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return pt.fromRectUnion(this,t)},update:function(t,e,n,r){return Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this}};pt.prototype.bottomRight=pt.prototype.corner;pt.prototype.topLeft=pt.prototype.origin;pt.prototype.translate=pt.prototype.offset;const gg=pt;function Qc(t){const e=t.trim();if(e==="")return[];const n=[],r=e.split(/\b\s*,\s*|,\s*|\s+/),i=r.length;for(let s=0;s<i;s+=2)n.push({x:+r[s],y:+r[s+1]});return n}function tl(t){const e=t.length;if(e===0)return[];const n=[];for(let r=0;r<e;r++){const i=t[r].clone();n.push(i)}return n}function el(t){const{abs:e}=Math;var n,r,i=t.length;if(i===0)return[];var s;for(n=0;n<i;n++)(s===void 0||t[n].y<s.y||t[n].y===s.y&&t[n].x>s.x)&&(s=t[n]);var o=[];for(n=0;n<i;n++){var u=s.theta(t[n]);u===0&&(u=360);var l=[t[n],n,u];o.push(l)}if(o.sort(function(V,ot){var ht=V[2]-ot[2];return ht===0&&(ht=ot[1]-V[1]),ht}),o.length>2){var d=o[o.length-1];o.unshift(d)}for(var g={},h=[],b,P,A,E,N,L;o.length!==0;)if(b=o.pop(),P=b[0],!g.hasOwnProperty(b[0]+"@@"+b[1]))for(var $=!1;!$;)if(h.length<2)h.push(b),$=!0;else{A=h.pop(),E=A[0],N=h.pop(),L=N[0];var Y=L.cross(E,P);if(Y<0)h.push(N),h.push(A),h.push(b),$=!0;else if(Y===0){var j=1e-10,nt=E.angleBetween(L,P);e(nt-180)<j||E.equals(P)||L.equals(E)?(g[A[0]+"@@"+A[1]]=E,h.push(N)):e((nt+1)%360-1)<j&&(h.push(N),o.push(A))}else g[A[0]+"@@"+A[1]]=E,h.push(N)}h.length>2&&h.pop();var ut,c=-1;for(r=h.length,n=0;n<r;n++){var w=h[n][1];(ut===void 0||w<ut)&&(ut=w,c=n)}var T=[];if(c>0){var _=h.slice(c),F=h.slice(0,c);T=_.concat(F)}else T=h;var H=[];for(r=T.length,n=0;n<r;n++)H.push(T[n][0]);return H}const oe=function(t){if(!(this instanceof oe))return new oe(t);if(typeof t=="string")return new oe.parse(t);this.points=Array.isArray(t)?t.map(D):[]};oe.parse=function(t){return new oe(Qc(t))};oe.fromRect=function(t){return new oe([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])};oe.prototype={type:Bt.Polyline,bbox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.points,s=i.length;if(s===0)return null;for(var o=0;o<s;o++){var u=i[o],l=u.x,d=u.y;l<t&&(t=l),l>e&&(e=l),d<n&&(n=d),d>r&&(r=d)}return new pt(t,n,e-t,r-n)},clone:function(){return new oe(tl(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return 0;for(var r,i=1/0,s=0,o=n-1,u=0;u<o;u++){var l=new vt(e[u],e[u+1]),d=l.length(),g=l.closestPointNormalizedLength(t),h=l.pointAt(g),b=h.squaredDistance(t);b<i&&(i=b,r=s+g*d),s+=d}return r},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(e===0)return 0;var n=this.length();return n===0?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(n===0)return!1;for(var r=t.x,i=t.y,s=n-1,o=0,u=0,l=new vt,d=new vt,g=new D;o<n;o++){var h=e[s],b=e[o];if(t.equals(h)||(l.start=h,l.end=b,l.containsPoint(t)))return!0;if(i<=h.y&&i>b.y||i>h.y&&i<=b.y){var P=h.x-r>b.x-r?h.x-r:b.x-r;P>=0&&(g.x=r+P,g.y=i,d.start=t,d.end=g,l.intersect(d)&&u++)}s=o}return u%2===1},close:function(){const{start:t,end:e,points:n}=this;return t&&e&&!t.equals(e)&&n.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new oe(el(this.points))},equals:function(t){if(!t)return!1;var e=this.points,n=t.points,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var s=e[i],o=t.points[i];if(!s.equals(o))return!1}return!0},intersectionWithLine:function(t){for(var e=new vt(t),n=[],r=this.lengthPoints(),i=new vt,s=0,o=r.length-1;s<o;s++){i.start=r[s],i.end=r[s+1];var u=e.intersectionWithLine(i);u&&n.push(u[0])}return n.length>0?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(e===0)return!1;for(var n=new vt,r=e-1,i=0;i<r;i++)if(n.start=t[i],n.end=t[i+1],n.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(e===0)return 0;for(var n=0,r=e-1,i=0;i<r;i++)n+=t[i].distance(t[i+1]);return n},pointAt:function(t){var e=this.lengthPoints(),n=e.length;if(n===0)return null;if(n===1||t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length(),i=r*t;return this.pointAtLength(i)},pointAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0)return null;if(n===1)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var i=0,s=n-1,o=0;o<s;o++){var u=r?o:s-1-o,l=e[u],d=e[u+1],g=new vt(l,d),h=l.distance(d);if(t<=i+h)return g.pointAtLength((r?1:-1)*(t-i));i+=h}var b=r?e[n-1]:e[0];return b.clone()},round:function(t){for(var e=this.points,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.points,i=r.length,s=0;s<i;s++)r[s].scale(t,e,n);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||1e-10;let r=0;for(;e[r+2];){const i=r,s=r+1,o=r+2,u=e[i],l=e[s],d=e[o];new vt(u,d).closestPoint(l).distance(l)<=n?e.splice(s,1):r+=1}return this},tangentAt:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return null;t<0&&(t=0),t>1&&(t=1);var r=this.length(),i=r*t;return this.tangentAtLength(i)},tangentAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return null;var r=!0;t<0&&(r=!1,t=-t);for(var i,s=0,o=n-1,u=0;u<o;u++){var l=r?u:o-1-u,d=e[l],g=e[l+1],h=new vt(d,g),b=d.distance(g);if(h.isDifferentiable()){if(t<=s+b)return h.tangentAtLength((r?1:-1)*(t-s));i=h}s+=b}if(i){var P=r?1:0;return i.tangentAt(P)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(e===0)return"";for(var n="",r=0;r<e;r++){var i=t[r];n+=i.x+","+i.y+" "}return n.trim()}};Object.defineProperty(oe.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[0]}});Object.defineProperty(oe.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[e-1]}});const{abs:Ui,sqrt:pg,min:Zu,max:Ju,pow:vo}=Math,Qt=function(t,e,n,r){if(!(this instanceof Qt))return new Qt(t,e,n,r);if(t instanceof Qt)return new Qt(t.start,t.controlPoint1,t.controlPoint2,t.end);this.start=new D(t),this.controlPoint1=new D(e),this.controlPoint2=new D(n),this.end=new D(r)};Qt.throughPoints=function(){function t(n){var r=[],i=[],s=n.length-1,o;if(s==1)return r[0]=new D((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),i[0]=new D(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,i];var u=[];for(o=1;o<s-1;o++)u[o]=4*n[o].x+2*n[o+1].x;u[0]=n[0].x+2*n[1].x,u[s-1]=(8*n[s-1].x+n[s].x)/2;var l=e(u);for(o=1;o<s-1;++o)u[o]=4*n[o].y+2*n[o+1].y;u[0]=n[0].y+2*n[1].y,u[s-1]=(8*n[s-1].y+n[s].y)/2;var d=e(u);for(o=0;o<s;o++)r.push(new D(l[o],d[o])),o<s-1?i.push(new D(2*n[o+1].x-l[o+1],2*n[o+1].y-d[o+1])):i.push(new D((n[s].x+l[s-1])/2,(n[s].y+d[s-1])/2));return[r,i]}function e(n){var r=n.length,i=[],s=[],o=2;i[0]=n[0]/o;for(var u=1;u<r;u++)s[u]=1/o,o=(u<r-1?4:3.5)-s[u],i[u]=(n[u]-i[u-1])/o;for(u=1;u<r;u++)i[r-u-1]-=s[r-u]*i[r-u];return i}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=t(n),i=[],s=r[0].length,o=0;o<s;o++){var u=new D(r[0][o].x,r[0][o].y),l=new D(r[1][o].x,r[1][o].y);i.push(new Qt(n[o],u,l,n[o+1]))}return i}}();Qt.prototype={type:Bt.Curve,bbox:function(){for(var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end,i=t.x,s=t.y,o=e.x,u=e.y,l=n.x,d=n.y,g=r.x,h=r.y,b=new Array,P=new Array,A=[new Array,new Array],E,N,L,$,Y,j,nt,ut,c=0;c<2;++c){if(c===0?(N=6*i-12*o+6*l,E=-3*i+9*o-9*l+3*g,L=3*o-3*i):(N=6*s-12*u+6*d,E=-3*s+9*u-9*d+3*h,L=3*u-3*s),Ui(E)<1e-12){if(Ui(N)<1e-12)continue;$=-L/N,0<$&&$<1&&P.push($);continue}nt=N*N-4*L*E,ut=pg(nt),!(nt<0)&&(Y=(-N+ut)/(2*E),0<Y&&Y<1&&P.push(Y),j=(-N-ut)/(2*E),0<j&&j<1&&P.push(j))}for(var w=P.length,T=w,_,F,H;w--;)$=P[w],_=1-$,F=_*_*_*i+3*_*_*$*o+3*_*$*$*l+$*$*$*g,A[0][w]=F,H=_*_*_*s+3*_*_*$*u+3*_*$*$*d+$*$*$*h,A[1][w]=H,b[w]={X:F,Y:H};P[T]=0,P[T+1]=1,b[T]={X:i,Y:s},b[T+1]={X:g,Y:h},A[0][T]=i,A[1][T]=s,A[0][T+1]=g,A[1][T+1]=h,P.length=T+2,A[0].length=T+2,A[1].length=T+2,b.length=T+2;var V=Zu.apply(null,A[0]),ot=Zu.apply(null,A[1]),ht=Ju.apply(null,A[0]),q=Ju.apply(null,A[1]);return new pt(V,ot,ht-V,q-ot)},clone:function(){return new Qt(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r},s=this.closestPointLength(t,i);if(!s)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(t,e){e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i,s,o,u,l,d,g,h=r.length,b=h?1/h:0,P=0;P<h;P++){var A=r[P],E=A.start.distance(t),N=A.end.distance(t),L=E+N;(!g||L<g)&&(i=A,s=P*b,o=(P+1)*b,u=E,l=N,d=A.start.distance(A.end),g=L)}for(var $=vo(10,-n);;){var Y=u?Ui(u-l)/u:0,j=l?Ui(u-l)/l:0,nt=Y<$||j<$,ut=u?u<d*$:!0,c=l?l<d*$:!0,w=ut||c;if(nt||w)return u<=l?s:o;var T=i.divide(.5);b/=2;var _=T[0].start.distance(t),F=T[0].end.distance(t),H=_+F,V=T[1].start.distance(t),ot=T[1].end.distance(t),ht=V+ot;H<=ht?(i=T[0],o-=b,u=_,l=F):(i=T[1],s+=b,u=V,l=ot)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){var n=this.toPolyline(e);return n.containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return[new Qt(e,e,e,e),new Qt(e,n,r,i)];if(t>=1)return[new Qt(e,n,r,i),new Qt(i,i,i,i)];var s=this.getSkeletonPoints(t),o=s.startControlPoint1,u=s.startControlPoint2,l=s.divider,d=s.dividerControlPoint1,g=s.dividerControlPoint2;return[new Qt(e,o,u,l),new Qt(l,d,g,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var s=new vt(e,n).pointAt(t),o=new vt(n,r).pointAt(t),u=new vt(r,i).pointAt(t),l=new vt(s,o).pointAt(t),d=new vt(o,u).pointAt(t),g=new vt(l,d).pointAt(t),h={startControlPoint1:s,startControlPoint2:l,divider:g,dividerControlPoint1:d,dividerControlPoint2:u};return h},getSubdivisions:function(t){t=t||{};var e=t.precision===void 0?this.PRECISION:t.precision,n=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end,o=[new Qt(n,r,i,s)];if(e===0)return o;var u=!this.isDifferentiable();if(u)return o;var l=this.endpointDistance(),d=vo(10,-e),g=2,h=r.cross(n,s)===0&&i.cross(n,s)===0;h&&(g=2*e);for(var b=0;;){b+=1;for(var P=[],A=o.length,E=0;E<A;E++){var N=o[E],L=N.divide(.5);P.push(L[0],L[1])}for(var $=0,Y=P.length,j=0;j<Y;j++){var nt=P[j];$+=nt.endpointDistance()}if(b>=g){var ut=$!==0?($-l)/$:0;if(ut<d)return P}o=P,l=$}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},length:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,r=0,i=n.length,s=0;s<i;s++){var o=n[s];r+=o.endpointDistance()}return r},lengthAtT:function(t,e){if(t<=0)return 0;e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=this.divide(t)[0],i=r.length({precision:n});return i},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.dividerControlPoint1,i=e.divider,s=new vt(n,r);return s.translate(i.x-n.x,i.y-n.y),s},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r},s=this.length(i),o=s*t;return this.tAtLength(o,i)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t),e=e||{};for(var r=e.precision===void 0?this.PRECISION:e.precision,i=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,s={precision:r,subdivisions:i},o,u,l,d,g,h=0,b=i.length,P=1/b,A=0;A<b;A++){var E=n?A:b-1-A,N=i[A],L=N.endpointDistance();if(t<=h+L){o=N,u=E*P,l=(E+1)*P,d=n?t-h:L+h-t,g=n?L+h-t:t-h;break}h+=L}if(!o)return n?1:0;for(var $=this.length(s),Y=vo(10,-r);;){var j;if(j=$!==0?d/$:0,j<Y)return u;if(j=$!==0?g/$:0,j<Y)return l;var nt,ut,c=o.divide(.5);P/=2;var w=c[0].endpointDistance(),T=c[1].endpointDistance();d<=w?(o=c[0],l-=P,nt=d,ut=w-nt):(o=c[1],u+=P,nt=d-w,ut=T-nt),d=nt,g=ut}},toPoints:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,r=[n[0].start.clone()],i=n.length,s=0;s<i;s++){var o=n[s];r.push(o.end.clone())}return r},toPolyline:function(t){return new oe(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Qt.prototype.divide=Qt.prototype.divideAtT;function bi(t){var e,n,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(n=r.length,e=0;e<n;e++){var s=r[e],o,u;for(u in s)s.hasOwnProperty(u)&&(delete i[u],o=Object.getOwnPropertyDescriptor(s,u),Object.defineProperty(i,u,o))}return i}const wt=function(t){if(!(this instanceof wt))return new wt(t);if(typeof t=="string")return new wt.parse(t);this.segments=[];var e,n;if(t)if(Array.isArray(t)&&t.length!==0)if(t=t.reduce(function(u,l){return u.concat(l)},[]),n=t.length,t[0].isSegment)for(e=0;e<n;e++){var r=t[e];this.appendSegment(r)}else{var i=null;for(e=0;e<n;e++){var s=t[e];if(!(s instanceof vt||s instanceof Qt))throw new Error("Cannot construct a path segment from the provided object.");e===0&&this.appendSegment(wt.createSegment("M",s.start)),i&&!i.end.equals(s.start)&&this.appendSegment(wt.createSegment("M",s.start)),s instanceof vt?this.appendSegment(wt.createSegment("L",s.end)):s instanceof Qt&&this.appendSegment(wt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),i=s}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof vt)this.appendSegment(wt.createSegment("M",t.start)),this.appendSegment(wt.createSegment("L",t.end));else if(t instanceof Qt)this.appendSegment(wt.createSegment("M",t.start)),this.appendSegment(wt.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else if(t instanceof oe){if(!(t.points&&t.points.length!==0))return;for(n=t.points.length,e=0;e<n;e++){var o=t.points[e];e===0?this.appendSegment(wt.createSegment("M",o)):this.appendSegment(wt.createSegment("L",o))}}else throw new Error("Cannot construct a path from the provided object.")};wt.parse=function(t){if(!t)return new wt;for(var e=new wt,n=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,r=t.match(n),i=r.length,s=0;s<i;s++){var o=r[s],u=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,l=o.match(u),d=wt.createSegment.apply(this,l);e.appendSegment(d)}return e};wt.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=wt.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,i=1;i<r;i++)n.push(arguments[i]);return Sn(e,n)};wt.prototype={type:Bt.Path,appendSegment:function(t){var e=this.segments,n=e.length,r,i=n!==0?e[n-1]:null,s=null;if(Array.isArray(t)){if(t=t.reduce(function(d,g){return d.concat(g)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var o=t.length,u=0;u<o;u++){var l=t[u];r=this.prepareSegment(l,i,s),e.push(r),i=r}}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,i,s),e.push(r)}},bbox:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n,r=0;r<e;r++){var i=t[r];if(i.isVisible){var s=i.bbox();n=n?n.union(s):s}}if(n)return n;var o=t[e-1];return new pt(o.end.x,o.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new wt,r=0;r<e;r++){var i=t[r].clone();n.appendSegment(i)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,i={precision:n,segmentSubdivisions:r},s=this.closestPointT(t,i);return s?this.lengthAtT(s,i):0},closestPointNormalizedLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,i={precision:n,segmentSubdivisions:r},s=this.closestPointLength(t,i);if(s===0)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o,u=1/0,l=0;l<r;l++){var d=n[l],g=s[l];if(d.isVisible){var h=d.closestPointT(t,{precision:i,subdivisions:g}),b=d.pointAtT(h),P=new vt(b,t).squaredLength();P<u&&(o={segmentIndex:l,value:h},u=P)}}return o||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o,u=1/0,l=0;l<r;l++){var d=n[l],g=s[l];if(d.isDifferentiable()){var h=d.closestPointT(t,{precision:i,subdivisions:g}),b=d.pointAtT(h),P=new vt(b,t).squaredLength();P<u&&(o=d.tangentAtT(h),u=P)}}return o||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var r=n.length,i=0,s=0;s<r;s++){var o=n[s];o.containsPoint(t)&&i++}return i%2===1},divideAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},u=this.length(o),l=u*t;return this.divideAtLength(l,o)},divideAtLength:function(t,e){var n=this.segments.length;if(n===0)return null;var r=!0;t<0&&(r=!1,t=-t),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o,u,l=0,d,g,h,b,P;for(o=0;o<n;o++){var A=r?o:n-1-o;u=this.getSegment(A);var E=s[A],N=u.length({precision:i,subdivisions:E});if(u.isDifferentiable()&&(h=u,b=A,t<=l+N)){g=A,d=u.divideAtLength((r?1:-1)*(t-l),{precision:i,subdivisions:E});break}l+=N}if(!h)return null;d||(g=b,P=r?1:0,d=h.divideAtT(P));var L=this.clone();L.replaceSegment(g,d);var $=g,Y=g+1,j=g+2;d[0].isDifferentiable()||(L.removeSegment($),Y-=1,j-=1);var nt=L.getSegment(Y).start;L.insertSegment(Y,wt.createSegment("M",nt)),j+=1,d[1].isDifferentiable()||(L.removeSegment(j-1),j-=1);var ut=j-$-1;for(o=j;o<L.segments.length;o++){var c=this.getSegment(o-ut);if(u=L.getSegment(o),u.type==="Z"&&!c.subpathStartSegment.end.equals(u.subpathStartSegment.end)){var w=wt.createSegment("L",c.end);L.replaceSegment(o,w)}}var T=new wt(L.segments.slice(0,Y)),_=new wt(L.segments.slice(Y));return[T,_]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var s=e[i],o=n[i];if(s.type!==o.type||!s.equals(o))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){var e=this.segments,n=e.length;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=[],s=0;s<n;s++){var o=e[s],u=o.getSubdivisions({precision:r});i.push(u)}return i},getSubpaths:function(){const e=this.clone().validate().segments,n=e.length,r=[];for(let i=0;i<n;i++){const s=e[i];s.isSubpathStart?r.push(new wt(s)):r[r.length-1].appendSegment(s)}return r},insertSegment:function(t,e){var n=this.segments,r=n.length;if(t<0&&(t=r+t+1),t>r||t<0)throw new Error("Index out of range.");var i,s=null,o=null;if(r!==0&&(t>=1?(s=n[t-1],o=s.nextSegment):o=n[0]),Array.isArray(e)){if(e=e.reduce(function(g,h){return g.concat(h)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var u=e.length,l=0;l<u;l++){var d=e[l];i=this.prepareSegment(d,s,o),n.splice(t+l,0,i),s=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,s,o),n.splice(t,0,i)}},intersectionWithLine:function(t,e){var n=null,r=this.toPolylines(e);if(!r)return null;for(var i=0,s=r.length;i<s;i++){var o=r[i],u=t.intersect(o);u&&(n||(n=[]),Array.isArray(u)?Array.prototype.push.apply(n,u):n.push(u))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++){var r=t[n];if(r.isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments,e=t.length===0||t[0].type==="M";return e},length:function(t){var e=this.segments,n=e.length;if(n===0)return 0;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,s=0,o=0;o<n;o++){var u=e[o],l=i[o];s+=u.length({subdivisions:l})}return s},lengthAtT:function(t,e){var n=this.segments,r=n.length;if(r===0)return 0;var i=t.segmentIndex;if(i<0)return 0;var s=t.value;i>=r?(i=r-1,s=1):s<0?s=0:s>1&&(s=1),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,u=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,l,d=0,g=0;g<i;g++){var h=n[g];l=u[g],d+=h.length({precisison:o,subdivisions:l})}return h=n[i],l=u[i],d+=h.lengthAtT(s,{precisison:o,subdivisions:l}),d},pointAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},u=this.length(o),l=u*t;return this.pointAtLength(l,o)},pointAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;if(t===0)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u,l=0,d=0;d<r;d++){var g=i?d:r-1-d,h=n[g],b=o[g],P=h.length({precision:s,subdivisions:b});if(h.isVisible){if(t<=l+P)return h.pointAtLength((i?1:-1)*(t-l),{precision:s,subdivisions:b});u=h}l+=P}if(u)return i?u.end:u.start;var A=n[r-1];return A.end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(n===0)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].pointAtT(i)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,n=e.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],i=r.previousSegment,s=r.nextSegment;i&&(i.nextSegment=s),s&&(s.previousSegment=i),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(t,e){var n=this.segments,r=n.length;if(r===0)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");var i,s=n[t],o=s.previousSegment,u=s.nextSegment,l=s.isSubpathStart;if(Array.isArray(e)){if(e=e.reduce(function(b,P){return b.concat(P)},[]),!e[0].isSegment)throw new Error("Segments required.");n.splice(t,1);for(var d=e.length,g=0;g<d;g++){var h=e[g];i=this.prepareSegment(h,o,u),n.splice(t+g,0,i),o=i,l&&i.isSubpathStart&&(l=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,o,u),n.splice(t,1,i),l&&i.isSubpathStart&&(l=!1)}l&&u&&this.updateSubpathStartSegment(u)},round:function(t){for(var e=this.segments,n=e.length,r=0;r<n;r++){var i=e[r];i.round(t)}return this},scale:function(t,e,n){for(var r=this.segments,i=r.length,s=0;s<i;s++){var o=r[s];o.scale(t,e,n)}return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},u=this.length(o),l=u*t;return this.segmentIndexAtLength(l,o)},segmentIndexAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u=null,l=0,d=0;d<r;d++){var g=i?d:r-1-d,h=n[g],b=o[g],P=h.length({precision:s,subdivisions:b});if(h.isVisible){if(t<=l+P)return g;u=g}l+=P}return u},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},u=this.length(o),l=u*t;return this.tangentAtLength(l,o)},tangentAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u,l=0,d=0;d<r;d++){var g=i?d:r-1-d,h=n[g],b=o[g],P=h.length({precision:s,subdivisions:b});if(h.isDifferentiable()){if(t<=l+P)return h.tangentAtLength((i?1:-1)*(t-l),{precision:s,subdivisions:b});u=h}l+=P}if(u){var A=i?1:0;return u.tangentAtT(A)}return null},tangentAtT:function(t){var e=this.segments,n=e.length;if(n===0)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=n)return e[n-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].tangentAtT(i)},toPoints:function(t){var e=this.segments,n=e.length;if(n===0)return null;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,s=[],o=[],u=0;u<n;u++){var l=e[u];if(l.isVisible){var d=i[u];if(d.length>0){var g=d.map(function(h){return h.start});Array.prototype.push.apply(o,g)}else o.push(l.start)}else o.length>0&&(o.push(e[u-1].end),s.push(o),o=[])}return o.length>0&&(o.push(this.end),s.push(o)),s},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var r=0,i=n.length;r<i;r++)e.push(new oe(n[r]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",r=0;r<e;r++){var i=t[r];n+=i.serialize()+" "}return n.trim()},translate:function(t,e){for(var n=this.segments,r=n.length,i=0;i<r;i++){var s=n[i];s.translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)e?t.subpathStartSegment=e.subpathStartSegment:t.subpathStartSegment=null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,wt.createSegment("M",0,0)),this}};Object.defineProperty(wt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n=0;n<e;n++){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}});Object.defineProperty(wt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n=e-1;n>=0;n--){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}});function Sn(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}var ur={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(ur,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(ur,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(ur,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Ae=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Ae))return Sn(Ae,t);if(e===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof vt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new D(+t[0],+t[1]),this;if(e<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=2)i=t.slice(n,n+2),r.push(Sn(Ae,i));return r}else{if(e===1)return this.end=new D(t[0]),this;var s;for(r=[],n=0;n<e;n+=1)s=t[n],r.push(new Ae(s));return r}},nl={clone:function(){return new Ae(this.end)},divideAt:function(t){var e=new vt(this.start,this.end),n=e.divideAt(t);return[new Ae(n[0]),new Ae(n[1])]},divideAtLength:function(t){var e=new vt(this.start,this.end),n=e.divideAtLength(t);return[new Ae(n[0]),new Ae(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(nl,"type",{configurable:!0,enumerable:!0,value:"L"});Ae.prototype=bi(ur,vt.prototype,nl);var We=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof We))return Sn(We,t);if(e===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r;if(t[0]instanceof Qt){if(e===1)return this.controlPoint1=t[0].controlPoint1.clone(),this.controlPoint2=t[0].controlPoint2.clone(),this.end=t[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===6)return this.controlPoint1=new D(+t[0],+t[1]),this.controlPoint2=new D(+t[2],+t[3]),this.end=new D(+t[4],+t[5]),this;if(e<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=6)i=t.slice(n,n+6),r.push(Sn(We,i));return r}else{if(e===3)return this.controlPoint1=new D(t[0]),this.controlPoint2=new D(t[1]),this.end=new D(t[2]),this;if(e<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" points provided).");var s;for(r=[],n=0;n<e;n+=3)s=t.slice(n,n+3),r.push(Sn(We,s));return r}},rl={clone:function(){return new We(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var n=new Qt(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAt(t,e);return[new We(r[0]),new We(r[1])]},divideAtLength:function(t,e){var n=new Qt(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAtLength(t,e);return[new We(r[0]),new We(r[1])]},divideAtT:function(t){var e=new Qt(this.start,this.controlPoint1,this.controlPoint2,this.end),n=e.divideAtT(t);return[new We(n[0]),new We(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(rl,"type",{configurable:!0,enumerable:!0,value:"C"});We.prototype=bi(ur,Qt.prototype,rl);var er=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof er))return Sn(er,t);if(e===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof vt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(t[0]instanceof Qt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new D(+t[0],+t[1]),this;if(e<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=2)i=t.slice(n,n+2),n===0?r.push(Sn(er,i)):r.push(Sn(Ae,i));return r}else{if(e===1)return this.end=new D(t[0]),this;var s;for(r=[],n=0;n<e;n+=1)s=t[n],n===0?r.push(new er(s)):r.push(new Ae(s));return r}},Qo={bbox:function(){return null},clone:function(){return new er(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Qo,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(Qo,"type",{configurable:!0,enumerable:!0,value:"M"});er.prototype=bi(ur,Qo);var Dr=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Dr))return Sn(Dr,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},ta={clone:function(){return new Dr},divideAt:function(t){var e=new vt(this.start,this.end),n=e.divideAt(t);return[n[1].isDifferentiable()?new Ae(n[0]):this.clone(),new Ae(n[1])]},divideAtLength:function(t){var e=new vt(this.start,this.end),n=e.divideAtLength(t);return[n[1].isDifferentiable()?new Ae(n[0]):this.clone(),new Ae(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(ta,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(ta,"type",{configurable:!0,enumerable:!0,value:"Z"});Dr.prototype=bi(ur,vt.prototype,ta);var vg=wt.segmentTypes={L:Ae,C:We,M:er,Z:Dr,z:Dr};wt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(vg).join("")+",.]*$");wt.isDataSupported=function(t){return typeof t!="string"?!1:this.regexSupportedData.test(t)};const mg={curveThroughPoints:function(t){return console.warn("deprecated"),new wt(Qt.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e=[],n=[],r=t.length-1,i;if(r==1)return e[0]=new D((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new D(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,n];var s=[];for(i=1;i<r-1;i++)s[i]=4*t[i].x+2*t[i+1].x;s[0]=t[0].x+2*t[1].x,s[r-1]=(8*t[r-1].x+t[r].x)/2;var o=this.getFirstControlPoints(s);for(i=1;i<r-1;++i)s[i]=4*t[i].y+2*t[i+1].y;s[0]=t[0].y+2*t[1].y,s[r-1]=(8*t[r-1].y+t[r].y)/2;var u=this.getFirstControlPoints(s);for(i=0;i<r;i++)e.push(new D(o[i],u[i])),i<r-1?n.push(new D(2*t[i+1].x-o[i+1],2*t[i+1].y-u[i+1])):n.push(new D((t[r].x+o[r-1])/2,(t[r].y+u[r-1])/2));return[e,n]},getCurveDivider:function(t,e,n,r){console.warn("deprecated");var i=new Qt(t,e,n,r);return function(o){var u=i.divide(o);return[{p0:u[0].start,p1:u[0].controlPoint1,p2:u[0].controlPoint2,p3:u[0].end},{p0:u[1].start,p1:u[1].controlPoint1,p2:u[1].controlPoint2,p3:u[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var s=1;s<e;s++)r[s]=1/i,i=(s<e-1?4:3.5)-r[s],n[s]=(t[s]-n[s-1])/i;for(s=1;s<e;s++)n[e-s-1]-=r[e-s]*n[e-s];return n},getInversionSolver:function(t,e,n,r){console.warn("deprecated");var i=new Qt(t,e,n,r);return function(o){return i.closestPointT(o)}}},He=function(t){if(!(this instanceof He))return new He(t);if(typeof t=="string")return new He.parse(t);this.points=Array.isArray(t)?t.map(D):[]};He.parse=function(t){return new He(Qc(t))};He.fromRect=function(t){return new He([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])};He.prototype=bi(oe.prototype,{type:Bt.Polygon,clone:function(){return new He(tl(this.points))},convexHull:function(){return new He(el(this.points))},lengthPoints:function(){const{start:t,end:e,points:n}=this;return n.length<=1||t.equals(e)?n:[...n,t.clone()]}});function il(t,e,n,r){switch(t.type){case Bt.Line:{switch(e.type){case Bt.Line:return nr(t,e)}break}case Bt.Ellipse:{switch(e.type){case Bt.Line:return ea(t,e);case Bt.Ellipse:return sl(t,e)}break}case Bt.Rect:{switch(e.type){case Bt.Line:return ol(t,e);case Bt.Ellipse:return al(t,e);case Bt.Rect:return na(t,e)}break}case Bt.Polyline:{switch(e.type){case Bt.Line:return bs(t,e);case Bt.Ellipse:return ra(t,e);case Bt.Rect:return ul(t,e);case Bt.Polyline:return cl(t,e)}break}case Bt.Polygon:{switch(e.type){case Bt.Line:return ia(t,e);case Bt.Ellipse:return ws(t,e);case Bt.Rect:return ll(t,e);case Bt.Polyline:return fl(t,e);case Bt.Polygon:return hl(t,e)}break}case Bt.Path:{switch(e.type){case Bt.Line:return dl(t,e,n);case Bt.Ellipse:return gl(t,e,n);case Bt.Rect:return pl(t,e,n);case Bt.Polyline:return sa(t,e,n);case Bt.Polygon:return As(t,e,n);case Bt.Path:return vl(t,e,n,r)}break}}switch(e.type){case Bt.Ellipse:case Bt.Rect:case Bt.Polyline:case Bt.Polygon:case Bt.Path:return il(e,t,r,n);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function nr(t,e){const n=t.start.x,r=t.start.y,i=t.end.x,s=t.end.y,o=e.start.x,u=e.start.y,l=e.end.x,d=e.end.y,g=i-n,h=s-r,b=l-o,P=d-u,A=n-o,E=r-u,N=g*P-b*h,L=(g*E-h*A)/N,$=(b*E-P*A)/N;return L>=0&&L<=1&&$>=0&&$<=1}function ea(t,e){const n=t.a,r=t.b,i=t.x,s=t.y,o=e.start.x-i,u=e.end.x-i,l=e.start.y-s,d=e.end.y-s,g=n*n,h=r*r,b=u-o,P=d-l,A=b*b/g+P*P/h,E=2*o*b/g+2*l*P/h,N=o*o/g+l*l/h-1,L=E*E-4*A*N;if(L===0){const $=-E/2/A;return $>=0&&$<=1}else if(L>0){const $=Math.sqrt(L),Y=(-E+$)/2/A,j=(-E-$)/2/A;return Y>=0&&Y<=1||j>=0&&j<=1}return!1}function sl(t,e){return yg(t,0,e,0)}function ol(t,e){const{start:n,end:r}=e,{x:i,y:s,width:o,height:u}=t;return n.x>i+o&&r.x>i+o||n.x<i&&r.x<i||n.y>s+u&&r.y>s+u||n.y<s&&r.y<s?!1:t.containsPoint(e.start)||t.containsPoint(e.end)?!0:nr(t.topLine(),e)||nr(t.rightLine(),e)||nr(t.bottomLine(),e)||nr(t.leftLine(),e)}function al(t,e){return na(t,pt.fromEllipse(e))?ws(He.fromRect(t),e):!1}function na(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function bs(t,e){return ml(t,e,{interior:!1})}function ra(t,e){return yl(t,e,{interior:!1})}function ul(t,e){return xl(t,e,{interior:!1})}function cl(t,e){return Ts(t,e,{interior:!1})}function ia(t,e){return ml(t,e,{interior:!0})}function ws(t,e){return yl(t,e,{interior:!0})}function ll(t,e){return xl(t,e,{interior:!0})}function fl(t,e){return Ts(t,e,{interior:!0})}function hl(t,e){return oa(t,e,{interior:!0})}function dl(t,e,n){return t.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:s}=r.getSegment(-1);return s==="Z"?ia(i,e):bs(i,e)})}function gl(t,e,n){return t.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:s}=r.getSegment(-1);return s==="Z"?ws(i,e):ra(i,e)})}function pl(t,e,n){return As(t,He.fromRect(e),n)}function sa(t,e,n){return bl(t,e,n,{interior:!1})}function As(t,e,n){return bl(t,e,n,{interior:!0})}function vl(t,e,n,r){return t.getSubpaths().some(i=>{const[s]=i.toPolylines(n),{type:o}=i.getSegment(-1);return o==="Z"?As(e,s,r):sa(e,s,r)})}function ml(t,e,n={}){const{interior:r=!1}=n;let i;if(r){if(t.containsPoint(e.start))return!0;const{start:u,end:l,points:d}=t;i=l.equals(u)?d:[...d,u]}else i=t.points;const{length:s}=i,o=new vt;for(let u=0;u<s-1;u++)if(o.start=i[u],o.end=i[u+1],nr(e,o))return!0;return!1}function yl(t,e,n={}){const{start:r,end:i,points:s}=t;if(e.containsPoint(r))return!0;let o;const{interior:u=!1}=n;if(u){if(t.containsPoint(e.center()))return!0;o=i.equals(r)?s:[...s,r]}else o=s;const{length:l}=o,d=new vt;for(let g=0;g<l-1;g++)if(d.start=o[g],d.end=o[g+1],ea(e,d))return!0;return!1}function xl(t,e,n){const r=He.fromRect(e);return oa(t,r,n)}function bl(t,e,n,r){return t.getSubpaths().some(i=>{const[s]=i.toPolylines(n),{type:o}=i.getSegment(-1);return o==="Z"?oa(e,s,r):Ts(e,s,r)})}function Ts(t,e,n={}){const{interior:r=!1}=n;let i;if(r){const{start:l}=e;if(t.containsPoint(l))return!0;i=t.clone().close()}else i=t;const s=e.points,{length:o}=s,u=new vt;for(let l=0;l<o-1;l++)if(u.start=s[l],u.end=s[l+1],bs(i,u))return!0;return!1}function oa(t,e,n){return e.containsPoint(t.start)||Ts(t,e.clone().close(),n)}function yg(t,e,n,r){const{cos:i,sin:s}=Math,o=s(e),u=i(e),l=s(r),d=i(r),g=o*o,h=u*u,b=o*u,P=l*l,A=d*d,E=l*d,N=t.a*t.a,L=t.b*t.b,$=n.a*n.a,Y=n.b*n.b,j=N*g+L*h,nt=$*P+Y*A,ut=N*h+L*g,c=$*A+Y*P;let w=2*(L-N)*b,T=2*(Y-$)*E,_=-2*j*t.x-w*t.y,F=-2*nt*n.x-T*n.y,H=-w*t.x-2*ut*t.y,V=-T*n.x-2*c*n.y;const ot=j*t.x*t.x+ut*t.y*t.y+w*t.x*t.y-N*L,ht=nt*n.x*n.x+c*n.y*n.y+T*n.x*n.y-$*Y;w=w/2,T=T/2,_=_/2,F=F/2,H=H/2,V=V/2;const q=Vn([[j,w,_],[w,ut,H],[_,H,ot]]),G=Vn([[nt,T,F],[T,c,V],[F,V,ht]]),X=.33333333*(Vn([[nt,w,_],[T,ut,H],[F,H,ot]])+Vn([[j,T,_],[w,c,H],[_,V,ot]])+Vn([[j,w,F],[w,ut,V],[_,H,ht]])),U=.33333333*(Vn([[j,T,F],[w,c,V],[_,V,ht]])+Vn([[nt,w,F],[T,ut,V],[F,H,ht]])+Vn([[nt,T,_],[T,c,H],[F,V,ot]])),Ct=Wi([[q,X],[X,U]]),St=Wi([[q,U],[X,G]]),ee=Wi([[X,U],[U,G]]);return!(Wi([[2*Ct,St],[St,2*ee]])>0&&(U>0||X>0))}function Wi(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function Vn(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}const xg=Object.freeze(Object.defineProperty({__proto__:null,ellipseWithEllipse:sl,ellipseWithLine:ea,exists:il,lineWithLine:nr,pathWithEllipse:gl,pathWithLine:dl,pathWithPath:vl,pathWithPolygon:As,pathWithPolyline:sa,pathWithRect:pl,polygonWithEllipse:ws,polygonWithLine:ia,polygonWithPolygon:hl,polygonWithPolyline:fl,polygonWithRect:ll,polylineWithEllipse:ra,polylineWithLine:bs,polylineWithPolyline:cl,polylineWithRect:ul,rectWithEllipse:al,rectWithLine:ol,rectWithRect:na},Symbol.toStringTag,{value:"Module"})),bg=xg,wg=Object.freeze(Object.defineProperty({__proto__:null,Curve:Qt,Ellipse:Ne,Line:vt,Path:wt,Point:D,Polygon:He,Polyline:oe,Rect:pt,bezier:mg,ellipse:lg,intersection:bg,line:rr,normalizeAngle:fn,point:us,random:No,rect:gg,scale:sg,snapToGrid:sr,toDeg:xs,toRad:$e,types:Bt},Symbol.toStringTag,{value:"Module"}));var ri=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ag(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Al={},aa="1.13.7",Ku=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Ss=Array.prototype,ua=Object.prototype,Qu=typeof Symbol<"u"?Symbol.prototype:null,Tg=Ss.push,wi=Ss.slice,ci=ua.toString,Sg=ua.hasOwnProperty,Tl=typeof ArrayBuffer<"u",Pg=typeof DataView<"u",Eg=Array.isArray,tc=Object.keys,ec=Object.create,nc=Tl&&ArrayBuffer.isView,Cg=isNaN,_g=isFinite,Sl=!{toString:null}.propertyIsEnumerable("toString"),rc=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Lg=Math.pow(2,53)-1;function Ie(t,e){return e=e==null?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var s=Array(e+1);for(i=0;i<e;i++)s[i]=arguments[i];return s[e]=r,t.apply(this,s)}}function Gn(t){var e=typeof t;return e==="function"||e==="object"&&!!t}function Pl(t){return t===null}function ca(t){return t===void 0}function la(t){return t===!0||t===!1||ci.call(t)==="[object Boolean]"}function El(t){return!!(t&&t.nodeType===1)}function Ce(t){var e="[object "+t+"]";return function(n){return ci.call(n)===e}}const Ps=Ce("String"),fa=Ce("Number"),Cl=Ce("Date"),_l=Ce("RegExp"),Ll=Ce("Error"),ha=Ce("Symbol"),da=Ce("ArrayBuffer");var Ml=Ce("Function"),Mg=Ku.document&&Ku.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Mg!="function"&&(Ml=function(t){return typeof t=="function"||!1});const Ee=Ml,Ol=Ce("Object");var Nl=Pg&&(!/\[native code\]/.test(String(DataView))||Ol(new DataView(new ArrayBuffer(8)))),ga=typeof Map<"u"&&Ol(new Map),Og=Ce("DataView");function Ng(t){return t!=null&&Ee(t.getInt8)&&da(t.buffer)}const li=Nl?Ng:Og,Un=Eg||Ce("Array");function Wn(t,e){return t!=null&&Sg.call(t,e)}var Ro=Ce("Arguments");(function(){Ro(arguments)||(Ro=function(t){return Wn(t,"callee")})})();const Es=Ro;function kl(t){return!ha(t)&&_g(t)&&!isNaN(parseFloat(t))}function pa(t){return fa(t)&&Cg(t)}function va(t){return function(){return t}}function Il(t){return function(e){var n=t(e);return typeof n=="number"&&n>=0&&n<=Lg}}function Rl(t){return function(e){return e==null?void 0:e[t]}}const cs=Rl("byteLength"),kg=Il(cs);var Ig=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Rg(t){return nc?nc(t)&&!li(t):kg(t)&&Ig.test(ci.call(t))}const ma=Tl?Rg:va(!1),Ge=Rl("length");function Dg(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function Dl(t,e){e=Dg(e);var n=rc.length,r=t.constructor,i=Ee(r)&&r.prototype||ua,s="constructor";for(Wn(t,s)&&!e.contains(s)&&e.push(s);n--;)s=rc[n],s in t&&t[s]!==i[s]&&!e.contains(s)&&e.push(s)}function xe(t){if(!Gn(t))return[];if(tc)return tc(t);var e=[];for(var n in t)Wn(t,n)&&e.push(n);return Sl&&Dl(t,e),e}function Fl(t){if(t==null)return!0;var e=Ge(t);return typeof e=="number"&&(Un(t)||Ps(t)||Es(t))?e===0:Ge(xe(t))===0}function ya(t,e){var n=xe(e),r=n.length;if(t==null)return!r;for(var i=Object(t),s=0;s<r;s++){var o=n[s];if(e[o]!==i[o]||!(o in i))return!1}return!0}function ne(t){if(t instanceof ne)return t;if(!(this instanceof ne))return new ne(t);this._wrapped=t}ne.VERSION=aa;ne.prototype.value=function(){return this._wrapped};ne.prototype.valueOf=ne.prototype.toJSON=ne.prototype.value;ne.prototype.toString=function(){return String(this._wrapped)};function ic(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,cs(t))}var sc="[object DataView]";function Do(t,e,n,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:Bl(t,e,n,r)}function Bl(t,e,n,r){t instanceof ne&&(t=t._wrapped),e instanceof ne&&(e=e._wrapped);var i=ci.call(t);if(i!==ci.call(e))return!1;if(Nl&&i=="[object Object]"&&li(t)){if(!li(e))return!1;i=sc}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return Qu.valueOf.call(t)===Qu.valueOf.call(e);case"[object ArrayBuffer]":case sc:return Bl(ic(t),ic(e),n,r)}var s=i==="[object Array]";if(!s&&ma(t)){var o=cs(t);if(o!==cs(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if(typeof t!="object"||typeof e!="object")return!1;var u=t.constructor,l=e.constructor;if(u!==l&&!(Ee(u)&&u instanceof u&&Ee(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var d=n.length;d--;)if(n[d]===t)return r[d]===e;if(n.push(t),r.push(e),s){if(d=t.length,d!==e.length)return!1;for(;d--;)if(!Do(t[d],e[d],n,r))return!1}else{var g=xe(t),h;if(d=g.length,xe(e).length!==d)return!1;for(;d--;)if(h=g[d],!(Wn(e,h)&&Do(t[h],e[h],n,r)))return!1}return n.pop(),r.pop(),!0}function Vl(t,e){return Do(t,e)}function zr(t){if(!Gn(t))return[];var e=[];for(var n in t)e.push(n);return Sl&&Dl(t,e),e}function xa(t){var e=Ge(t);return function(n){if(n==null)return!1;var r=zr(n);if(Ge(r))return!1;for(var i=0;i<e;i++)if(!Ee(n[t[i]]))return!1;return t!==Hl||!Ee(n[ba])}}var ba="forEach",zl="has",wa=["clear","delete"],$l=["get",zl,"set"],Fg=wa.concat(ba,$l),Hl=wa.concat($l),Bg=["add"].concat(wa,ba,zl);const ql=ga?xa(Fg):Ce("Map"),Gl=ga?xa(Hl):Ce("WeakMap"),Ul=ga?xa(Bg):Ce("Set"),Wl=Ce("WeakSet");function cr(t){for(var e=xe(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function Yl(t){for(var e=xe(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function Aa(t){for(var e={},n=xe(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function fi(t){var e=[];for(var n in t)Ee(t[n])&&e.push(n);return e.sort()}function Ta(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var s=arguments[i],o=t(s),u=o.length,l=0;l<u;l++){var d=o[l];(!e||n[d]===void 0)&&(n[d]=s[d])}return n}}const Sa=Ta(zr),Fr=Ta(xe),Pa=Ta(zr,!0);function Vg(){return function(){}}function jl(t){if(!Gn(t))return{};if(ec)return ec(t);var e=Vg();e.prototype=t;var n=new e;return e.prototype=null,n}function Xl(t,e){var n=jl(t);return e&&Fr(n,e),n}function Zl(t){return Gn(t)?Un(t)?t.slice():Sa({},t):t}function Jl(t,e){return e(t),t}function Ea(t){return Un(t)?t:[t]}ne.toPath=Ea;function Ai(t){return ne.toPath(t)}function Ca(t,e){for(var n=e.length,r=0;r<n;r++){if(t==null)return;t=t[e[r]]}return n?t:void 0}function _a(t,e,n){var r=Ca(t,Ai(e));return ca(r)?n:r}function Kl(t,e){e=Ai(e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(!Wn(t,i))return!1;t=t[i]}return!!n}function Cs(t){return t}function or(t){return t=Fr({},t),function(e){return ya(e,t)}}function _s(t){return t=Ai(t),function(e){return Ca(e,t)}}function Ti(t,e,n){if(e===void 0)return t;switch(n??3){case 1:return function(r){return t.call(e,r)};case 3:return function(r,i,s){return t.call(e,r,i,s)};case 4:return function(r,i,s,o){return t.call(e,r,i,s,o)}}return function(){return t.apply(e,arguments)}}function Ql(t,e,n){return t==null?Cs:Ee(t)?Ti(t,e,n):Gn(t)&&!Un(t)?or(t):_s(t)}function Ls(t,e){return Ql(t,e,1/0)}ne.iteratee=Ls;function Ue(t,e,n){return ne.iteratee!==Ls?ne.iteratee(t,e):Ql(t,e,n)}function tf(t,e,n){e=Ue(e,n);for(var r=xe(t),i=r.length,s={},o=0;o<i;o++){var u=r[o];s[u]=e(t[u],u,t)}return s}function La(){}function ef(t){return t==null?La:function(e){return _a(t,e)}}function nf(t,e,n){var r=Array(Math.max(0,t));e=Ti(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function ls(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}const Br=Date.now||function(){return new Date().getTime()};function rf(t){var e=function(s){return t[s]},n="(?:"+xe(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(s){return s=s==null?"":""+s,r.test(s)?s.replace(i,e):s}}const sf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},of=rf(sf),zg=Aa(sf),af=rf(zg),uf=ne.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var mo=/(.)^/,$g={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Hg=/\\|'|\r|\n|\u2028|\u2029/g;function qg(t){return"\\"+$g[t]}var Gg=/^\s*(\w|\$)+\s*$/;function cf(t,e,n){!e&&n&&(e=n),e=Pa({},e,ne.templateSettings);var r=RegExp([(e.escape||mo).source,(e.interpolate||mo).source,(e.evaluate||mo).source].join("|")+"|$","g"),i=0,s="__p+='";t.replace(r,function(d,g,h,b,P){return s+=t.slice(i,P).replace(Hg,qg),i=P+d.length,g?s+=`'+
((__t=(`+g+`))==null?'':_.escape(__t))+
'`:h?s+=`'+
((__t=(`+h+`))==null?'':__t)+
'`:b&&(s+=`';
`+b+`
__p+='`),d}),s+=`';
`;var o=e.variable;if(o){if(!Gg.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var u;try{u=new Function(o,"_",s)}catch(d){throw d.source=s,d}var l=function(d){return u.call(this,d,ne)};return l.source="function("+o+`){
`+s+"}",l}function lf(t,e,n){e=Ai(e);var r=e.length;if(!r)return Ee(n)?n.call(t):n;for(var i=0;i<r;i++){var s=t==null?void 0:t[e[i]];s===void 0&&(s=n,i=r),t=Ee(s)?s.call(t):s}return t}var Ug=0;function ff(t){var e=++Ug+"";return t?t+e:e}function hf(t){var e=ne(t);return e._chain=!0,e}function df(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var s=jl(t.prototype),o=t.apply(s,i);return Gn(o)?o:s}var lr=Ie(function(t,e){var n=lr.placeholder,r=function(){for(var i=0,s=e.length,o=Array(s),u=0;u<s;u++)o[u]=e[u]===n?arguments[i++]:e[u];for(;i<arguments.length;)o.push(arguments[i++]);return df(t,r,this,this,o)};return r});lr.placeholder=ne;const Ma=Ie(function(t,e,n){if(!Ee(t))throw new TypeError("Bind must be called on a function");var r=Ie(function(i){return df(t,r,e,this,n.concat(i))});return r}),Ye=Il(Ge);function fr(t,e,n,r){if(r=r||[],!e&&e!==0)e=1/0;else if(e<=0)return r.concat(t);for(var i=r.length,s=0,o=Ge(t);s<o;s++){var u=t[s];if(Ye(u)&&(Un(u)||Es(u)))if(e>1)fr(u,e-1,n,r),i=r.length;else for(var l=0,d=u.length;l<d;)r[i++]=u[l++];else n||(r[i++]=u)}return r}const gf=Ie(function(t,e){e=fr(e,!1,!1);var n=e.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=Ma(t[r],t)}return t});function pf(t,e){var n=function(r){var i=n.cache,s=""+(e?e.apply(this,arguments):r);return Wn(i,s)||(i[s]=t.apply(this,arguments)),i[s]};return n.cache={},n}const Oa=Ie(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),vf=lr(Oa,ne,1);function mf(t,e,n){var r,i,s,o,u=0;n||(n={});var l=function(){u=n.leading===!1?0:Br(),r=null,o=t.apply(i,s),r||(i=s=null)},d=function(){var g=Br();!u&&n.leading===!1&&(u=g);var h=e-(g-u);return i=this,s=arguments,h<=0||h>e?(r&&(clearTimeout(r),r=null),u=g,o=t.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,h)),o};return d.cancel=function(){clearTimeout(r),u=0,r=i=s=null},d}function yf(t,e,n){var r,i,s,o,u,l=function(){var g=Br()-i;e>g?r=setTimeout(l,e-g):(r=null,n||(o=t.apply(u,s)),r||(s=u=null))},d=Ie(function(g){return u=this,s=g,i=Br(),r||(r=setTimeout(l,e),n&&(o=t.apply(u,s))),o});return d.cancel=function(){clearTimeout(r),r=s=u=null},d}function xf(t,e){return lr(e,t)}function Ms(t){return function(){return!t.apply(this,arguments)}}function bf(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function wf(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Na(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Af=lr(Na,2);function ka(t,e,n){e=Ue(e,n);for(var r=xe(t),i,s=0,o=r.length;s<o;s++)if(i=r[s],e(t[i],i,t))return i}function Tf(t){return function(e,n,r){n=Ue(n,r);for(var i=Ge(e),s=t>0?0:i-1;s>=0&&s<i;s+=t)if(n(e[s],s,e))return s;return-1}}const Os=Tf(1),Ia=Tf(-1);function Ra(t,e,n,r){n=Ue(n,r,1);for(var i=n(e),s=0,o=Ge(t);s<o;){var u=Math.floor((s+o)/2);n(t[u])<i?s=u+1:o=u}return s}function Sf(t,e,n){return function(r,i,s){var o=0,u=Ge(r);if(typeof s=="number")t>0?o=s>=0?s:Math.max(s+u,o):u=s>=0?Math.min(s+1,u):s+u+1;else if(n&&s&&u)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=e(wi.call(r,o,u),pa),s>=0?s+o:-1;for(s=t>0?o:u-1;s>=0&&s<u;s+=t)if(r[s]===i)return s;return-1}}const Da=Sf(1,Os,Ra),Pf=Sf(-1,Ia);function hi(t,e,n){var r=Ye(t)?Os:ka,i=r(t,e,n);if(i!==void 0&&i!==-1)return t[i]}function Ef(t,e){return hi(t,or(e))}function hn(t,e,n){e=Ti(e,n);var r,i;if(Ye(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var s=xe(t);for(r=0,i=s.length;r<i;r++)e(t[s[r]],s[r],t)}return t}function Nn(t,e,n){e=Ue(e,n);for(var r=!Ye(t)&&xe(t),i=(r||t).length,s=Array(i),o=0;o<i;o++){var u=r?r[o]:o;s[o]=e(t[u],u,t)}return s}function Cf(t){var e=function(n,r,i,s){var o=!Ye(n)&&xe(n),u=(o||n).length,l=t>0?0:u-1;for(s||(i=n[o?o[l]:l],l+=t);l>=0&&l<u;l+=t){var d=o?o[l]:l;i=r(i,n[d],d,n)}return i};return function(n,r,i,s){var o=arguments.length>=3;return e(n,Ti(r,s,4),i,o)}}const Or=Cf(1),fs=Cf(-1);function qn(t,e,n){var r=[];return e=Ue(e,n),hn(t,function(i,s,o){e(i,s,o)&&r.push(i)}),r}function _f(t,e,n){return qn(t,Ms(Ue(e)),n)}function hs(t,e,n){e=Ue(e,n);for(var r=!Ye(t)&&xe(t),i=(r||t).length,s=0;s<i;s++){var o=r?r[s]:s;if(!e(t[o],o,t))return!1}return!0}function ds(t,e,n){e=Ue(e,n);for(var r=!Ye(t)&&xe(t),i=(r||t).length,s=0;s<i;s++){var o=r?r[s]:s;if(e(t[o],o,t))return!0}return!1}function tn(t,e,n,r){return Ye(t)||(t=cr(t)),(typeof n!="number"||r)&&(n=0),Da(t,e,n)>=0}const Lf=Ie(function(t,e,n){var r,i;return Ee(e)?i=e:(e=Ai(e),r=e.slice(0,-1),e=e[e.length-1]),Nn(t,function(s){var o=i;if(!o){if(r&&r.length&&(s=Ca(s,r)),s==null)return;o=s[e]}return o==null?o:o.apply(s,n)})});function Ns(t,e){return Nn(t,_s(e))}function Mf(t,e){return qn(t,or(e))}function Fa(t,e,n){var r=-1/0,i=-1/0,s,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Ye(t)?t:cr(t);for(var u=0,l=t.length;u<l;u++)s=t[u],s!=null&&s>r&&(r=s)}else e=Ue(e,n),hn(t,function(d,g,h){o=e(d,g,h),(o>i||o===-1/0&&r===-1/0)&&(r=d,i=o)});return r}function Of(t,e,n){var r=1/0,i=1/0,s,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Ye(t)?t:cr(t);for(var u=0,l=t.length;u<l;u++)s=t[u],s!=null&&s<r&&(r=s)}else e=Ue(e,n),hn(t,function(d,g,h){o=e(d,g,h),(o<i||o===1/0&&r===1/0)&&(r=d,i=o)});return r}var Wg=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ba(t){return t?Un(t)?wi.call(t):Ps(t)?t.match(Wg):Ye(t)?Nn(t,Cs):cr(t):[]}function Va(t,e,n){if(e==null||n)return Ye(t)||(t=cr(t)),t[ls(t.length-1)];var r=Ba(t),i=Ge(r);e=Math.max(Math.min(e,i),0);for(var s=i-1,o=0;o<e;o++){var u=ls(o,s),l=r[o];r[o]=r[u],r[u]=l}return r.slice(0,e)}function Nf(t){return Va(t,1/0)}function kf(t,e,n){var r=0;return e=Ue(e,n),Ns(Nn(t,function(i,s,o){return{value:i,index:r++,criteria:e(i,s,o)}}).sort(function(i,s){var o=i.criteria,u=s.criteria;if(o!==u){if(o>u||o===void 0)return 1;if(o<u||u===void 0)return-1}return i.index-s.index}),"value")}function ks(t,e){return function(n,r,i){var s=e?[[],[]]:{};return r=Ue(r,i),hn(n,function(o,u){var l=r(o,u,n);t(s,o,l)}),s}}const If=ks(function(t,e,n){Wn(t,n)?t[n].push(e):t[n]=[e]}),Rf=ks(function(t,e,n){t[n]=e}),Df=ks(function(t,e,n){Wn(t,n)?t[n]++:t[n]=1}),Ff=ks(function(t,e,n){t[n?0:1].push(e)},!0);function Bf(t){return t==null?0:Ye(t)?t.length:xe(t).length}function Yg(t,e,n){return e in n}const za=Ie(function(t,e){var n={},r=e[0];if(t==null)return n;Ee(r)?(e.length>1&&(r=Ti(r,e[1])),e=zr(t)):(r=Yg,e=fr(e,!1,!1),t=Object(t));for(var i=0,s=e.length;i<s;i++){var o=e[i],u=t[o];r(u,o,t)&&(n[o]=u)}return n}),Vf=Ie(function(t,e){var n=e[0],r;return Ee(n)?(n=Ms(n),e.length>1&&(r=e[1])):(e=Nn(fr(e,!1,!1),String),n=function(i,s){return!tn(e,s)}),za(t,n,r)});function $a(t,e,n){return wi.call(t,0,Math.max(0,t.length-(e==null||n?1:e)))}function Nr(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[0]:$a(t,t.length-e)}function ir(t,e,n){return wi.call(t,e==null||n?1:e)}function zf(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[t.length-1]:ir(t,Math.max(0,t.length-e))}function $f(t){return qn(t,Boolean)}function Hf(t,e){return fr(t,e,!1)}const Ha=Ie(function(t,e){return e=fr(e,!0,!0),qn(t,function(n){return!tn(e,n)})}),qf=Ie(function(t,e){return Ha(t,e)});function di(t,e,n,r){la(e)||(r=n,n=e,e=!1),n!=null&&(n=Ue(n,r));for(var i=[],s=[],o=0,u=Ge(t);o<u;o++){var l=t[o],d=n?n(l,o,t):l;e&&!n?((!o||s!==d)&&i.push(l),s=d):n?tn(s,d)||(s.push(d),i.push(l)):tn(i,l)||i.push(l)}return i}const Gf=Ie(function(t){return di(fr(t,!0,!0))});function Uf(t){for(var e=[],n=arguments.length,r=0,i=Ge(t);r<i;r++){var s=t[r];if(!tn(e,s)){var o;for(o=1;o<n&&tn(arguments[o],s);o++);o===n&&e.push(s)}}return e}function gi(t){for(var e=t&&Fa(t,Ge).length||0,n=Array(e),r=0;r<e;r++)n[r]=Ns(t,r);return n}const Wf=Ie(gi);function Yf(t,e){for(var n={},r=0,i=Ge(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function jf(t,e,n){e==null&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),s=0;s<r;s++,t+=n)i[s]=t;return i}function Xf(t,e){if(e==null||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(wi.call(t,r,r+=e));return n}function qa(t,e){return t._chain?ne(e).chain():e}function Ga(t){return hn(fi(t),function(e){var n=ne[e]=t[e];ne.prototype[e]=function(){var r=[this._wrapped];return Tg.apply(r,arguments),qa(this,n.apply(ne,r))}}),ne}hn(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=Ss[t];ne.prototype[t]=function(){var n=this._wrapped;return n!=null&&(e.apply(n,arguments),(t==="shift"||t==="splice")&&n.length===0&&delete n[0]),qa(this,n)}});hn(["concat","join","slice"],function(t){var e=Ss[t];ne.prototype[t]=function(){var n=this._wrapped;return n!=null&&(n=e.apply(n,arguments)),qa(this,n)}});const jg=Object.freeze(Object.defineProperty({__proto__:null,VERSION:aa,after:wf,all:hs,allKeys:zr,any:ds,assign:Fr,before:Na,bind:Ma,bindAll:gf,chain:hf,chunk:Xf,clone:Zl,collect:Nn,compact:$f,compose:bf,constant:va,contains:tn,countBy:Df,create:Xl,debounce:yf,default:ne,defaults:Pa,defer:vf,delay:Oa,detect:hi,difference:Ha,drop:ir,each:hn,escape:of,every:hs,extend:Sa,extendOwn:Fr,filter:qn,find:hi,findIndex:Os,findKey:ka,findLastIndex:Ia,findWhere:Ef,first:Nr,flatten:Hf,foldl:Or,foldr:fs,forEach:hn,functions:fi,get:_a,groupBy:If,has:Kl,head:Nr,identity:Cs,include:tn,includes:tn,indexBy:Rf,indexOf:Da,initial:$a,inject:Or,intersection:Uf,invert:Aa,invoke:Lf,isArguments:Es,isArray:Un,isArrayBuffer:da,isBoolean:la,isDataView:li,isDate:Cl,isElement:El,isEmpty:Fl,isEqual:Vl,isError:Ll,isFinite:kl,isFunction:Ee,isMap:ql,isMatch:ya,isNaN:pa,isNull:Pl,isNumber:fa,isObject:Gn,isRegExp:_l,isSet:Ul,isString:Ps,isSymbol:ha,isTypedArray:ma,isUndefined:ca,isWeakMap:Gl,isWeakSet:Wl,iteratee:Ls,keys:xe,last:zf,lastIndexOf:Pf,map:Nn,mapObject:tf,matcher:or,matches:or,max:Fa,memoize:pf,methods:fi,min:Of,mixin:Ga,negate:Ms,noop:La,now:Br,object:Yf,omit:Vf,once:Af,pairs:Yl,partial:lr,partition:Ff,pick:za,pluck:Ns,property:_s,propertyOf:ef,random:ls,range:jf,reduce:Or,reduceRight:fs,reject:_f,rest:ir,restArguments:Ie,result:lf,sample:Va,select:qn,shuffle:Nf,size:Bf,some:ds,sortBy:kf,sortedIndex:Ra,tail:ir,take:Nr,tap:Jl,template:cf,templateSettings:uf,throttle:mf,times:nf,toArray:Ba,toPath:Ea,transpose:gi,unescape:af,union:Gf,uniq:di,unique:di,uniqueId:ff,unzip:gi,values:cr,where:Mf,without:qf,wrap:xf,zip:Wf},Symbol.toStringTag,{value:"Module"}));var Fo=Ga(jg);Fo._=Fo;const Xg=Object.freeze(Object.defineProperty({__proto__:null,VERSION:aa,after:wf,all:hs,allKeys:zr,any:ds,assign:Fr,before:Na,bind:Ma,bindAll:gf,chain:hf,chunk:Xf,clone:Zl,collect:Nn,compact:$f,compose:bf,constant:va,contains:tn,countBy:Df,create:Xl,debounce:yf,default:Fo,defaults:Pa,defer:vf,delay:Oa,detect:hi,difference:Ha,drop:ir,each:hn,escape:of,every:hs,extend:Sa,extendOwn:Fr,filter:qn,find:hi,findIndex:Os,findKey:ka,findLastIndex:Ia,findWhere:Ef,first:Nr,flatten:Hf,foldl:Or,foldr:fs,forEach:hn,functions:fi,get:_a,groupBy:If,has:Kl,head:Nr,identity:Cs,include:tn,includes:tn,indexBy:Rf,indexOf:Da,initial:$a,inject:Or,intersection:Uf,invert:Aa,invoke:Lf,isArguments:Es,isArray:Un,isArrayBuffer:da,isBoolean:la,isDataView:li,isDate:Cl,isElement:El,isEmpty:Fl,isEqual:Vl,isError:Ll,isFinite:kl,isFunction:Ee,isMap:ql,isMatch:ya,isNaN:pa,isNull:Pl,isNumber:fa,isObject:Gn,isRegExp:_l,isSet:Ul,isString:Ps,isSymbol:ha,isTypedArray:ma,isUndefined:ca,isWeakMap:Gl,isWeakSet:Wl,iteratee:Ls,keys:xe,last:zf,lastIndexOf:Pf,map:Nn,mapObject:tf,matcher:or,matches:or,max:Fa,memoize:pf,methods:fi,min:Of,mixin:Ga,negate:Ms,noop:La,now:Br,object:Yf,omit:Vf,once:Af,pairs:Yl,partial:lr,partition:Ff,pick:za,pluck:Ns,property:_s,propertyOf:ef,random:ls,range:jf,reduce:Or,reduceRight:fs,reject:_f,rest:ir,restArguments:Ie,result:lf,sample:Va,select:qn,shuffle:Nf,size:Bf,some:ds,sortBy:kf,sortedIndex:Ra,tail:ir,take:Nr,tap:Jl,template:cf,templateSettings:uf,throttle:mf,times:nf,toArray:Ba,toPath:Ea,transpose:gi,unescape:af,union:Gf,uniq:di,unique:di,uniqueId:ff,unzip:gi,values:cr,where:Mf,without:qf,wrap:xf,zip:Wf},Symbol.toStringTag,{value:"Module"})),Zg=Ag(Xg);var Zf={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(t){(function(e,n){t.exports=e.document?n(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:ri,function(e,n){var r=[],i=Object.getPrototypeOf,s=r.slice,o=r.flat?function(a){return r.flat.call(a)}:function(a){return r.concat.apply([],a)},u=r.push,l=r.indexOf,d={},g=d.toString,h=d.hasOwnProperty,b=h.toString,P=b.call(Object),A={},E=function(f){return typeof f=="function"&&typeof f.nodeType!="number"&&typeof f.item!="function"},N=function(f){return f!=null&&f===f.window},L=e.document,$={type:!0,src:!0,nonce:!0,noModule:!0};function Y(a,f,p){p=p||L;var v,y,x=p.createElement("script");if(x.text=a,f)for(v in $)y=f[v]||f.getAttribute&&f.getAttribute(v),y&&x.setAttribute(v,y);p.head.appendChild(x).parentNode.removeChild(x)}function j(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?d[g.call(a)]||"object":typeof a}var nt="3.7.1",ut=/HTML$/i,c=function(a,f){return new c.fn.init(a,f)};c.fn=c.prototype={jquery:nt,constructor:c,length:0,toArray:function(){return s.call(this)},get:function(a){return a==null?s.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var f=c.merge(this.constructor(),a);return f.prevObject=this,f},each:function(a){return c.each(this,a)},map:function(a){return this.pushStack(c.map(this,function(f,p){return a.call(f,p,f)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(c.grep(this,function(a,f){return(f+1)%2}))},odd:function(){return this.pushStack(c.grep(this,function(a,f){return f%2}))},eq:function(a){var f=this.length,p=+a+(a<0?f:0);return this.pushStack(p>=0&&p<f?[this[p]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:r.sort,splice:r.splice},c.extend=c.fn.extend=function(){var a,f,p,v,y,x,S=arguments[0]||{},R=1,k=arguments.length,z=!1;for(typeof S=="boolean"&&(z=S,S=arguments[R]||{},R++),typeof S!="object"&&!E(S)&&(S={}),R===k&&(S=this,R--);R<k;R++)if((a=arguments[R])!=null)for(f in a)v=a[f],!(f==="__proto__"||S===v)&&(z&&v&&(c.isPlainObject(v)||(y=Array.isArray(v)))?(p=S[f],y&&!Array.isArray(p)?x=[]:!y&&!c.isPlainObject(p)?x={}:x=p,y=!1,S[f]=c.extend(z,x,v)):v!==void 0&&(S[f]=v));return S},c.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isPlainObject:function(a){var f,p;return!a||g.call(a)!=="[object Object]"?!1:(f=i(a),f?(p=h.call(f,"constructor")&&f.constructor,typeof p=="function"&&b.call(p)===P):!0)},isEmptyObject:function(a){var f;for(f in a)return!1;return!0},globalEval:function(a,f,p){Y(a,{nonce:f&&f.nonce},p)},each:function(a,f){var p,v=0;if(w(a))for(p=a.length;v<p&&f.call(a[v],v,a[v])!==!1;v++);else for(v in a)if(f.call(a[v],v,a[v])===!1)break;return a},text:function(a){var f,p="",v=0,y=a.nodeType;if(!y)for(;f=a[v++];)p+=c.text(f);return y===1||y===11?a.textContent:y===9?a.documentElement.textContent:y===3||y===4?a.nodeValue:p},makeArray:function(a,f){var p=f||[];return a!=null&&(w(Object(a))?c.merge(p,typeof a=="string"?[a]:a):u.call(p,a)),p},inArray:function(a,f,p){return f==null?-1:l.call(f,a,p)},isXMLDoc:function(a){var f=a&&a.namespaceURI,p=a&&(a.ownerDocument||a).documentElement;return!ut.test(f||p&&p.nodeName||"HTML")},merge:function(a,f){for(var p=+f.length,v=0,y=a.length;v<p;v++)a[y++]=f[v];return a.length=y,a},grep:function(a,f,p){for(var v,y=[],x=0,S=a.length,R=!p;x<S;x++)v=!f(a[x],x),v!==R&&y.push(a[x]);return y},map:function(a,f,p){var v,y,x=0,S=[];if(w(a))for(v=a.length;x<v;x++)y=f(a[x],x,p),y!=null&&S.push(y);else for(x in a)y=f(a[x],x,p),y!=null&&S.push(y);return o(S)},guid:1,support:A}),typeof Symbol=="function"&&(c.fn[Symbol.iterator]=r[Symbol.iterator]),c.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,f){d["[object "+f+"]"]=f.toLowerCase()});function w(a){var f=!!a&&"length"in a&&a.length,p=j(a);return E(a)||N(a)?!1:p==="array"||f===0||typeof f=="number"&&f>0&&f-1 in a}function T(a,f){return a.nodeName&&a.nodeName.toLowerCase()===f.toLowerCase()}var _=r.pop,F=r.sort,H=r.splice,V="[\\x20\\t\\r\\n\\f]",ot=new RegExp("^"+V+"+|((?:^|[^\\\\])(?:\\\\.)*)"+V+"+$","g");c.contains=function(a,f){var p=f&&f.parentNode;return a===p||!!(p&&p.nodeType===1&&(a.contains?a.contains(p):a.compareDocumentPosition&&a.compareDocumentPosition(p)&16))};var ht=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function q(a,f){return f?a==="\0"?"�":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a}c.escapeSelector=function(a){return(a+"").replace(ht,q)};var G=L,X=u;(function(){var a,f,p,v,y,x=X,S,R,k,z,tt,at=c.expando,Z=0,lt=0,Nt=Bi(),Zt=Bi(),Vt=Bi(),be=Bi(),me=function(O,B){return O===B&&(y=!0),0},pn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",vn="(?:\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Gt="\\["+V+"*("+vn+")(?:"+V+"*([*^$|!~]?=)"+V+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+vn+"))|)"+V+"*\\]",Kn=":("+vn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Gt+")*)|.*)\\)|)",Jt=new RegExp(V+"+","g"),fe=new RegExp("^"+V+"*,"+V+"*"),Jr=new RegExp("^"+V+"*([>+~]|"+V+")"+V+"*"),io=new RegExp(V+"|>"),mn=new RegExp(Kn),Kr=new RegExp("^"+vn+"$"),yn={ID:new RegExp("^#("+vn+")"),CLASS:new RegExp("^\\.("+vn+")"),TAG:new RegExp("^("+vn+"|[*])"),ATTR:new RegExp("^"+Gt),PSEUDO:new RegExp("^"+Kn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+V+"*(even|odd|(([+-]|)(\\d*)n|)"+V+"*(?:([+-]|)"+V+"*(\\d+)|))"+V+"*\\)|)","i"),bool:new RegExp("^(?:"+pn+")$","i"),needsContext:new RegExp("^"+V+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+V+"*((?:-\\d)?\\d*)"+V+"*\\)|)(?=[^-]|$)","i")},Dn=/^(?:input|select|textarea|button)$/i,Fn=/^h\d$/i,je=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,so=/[+~]/,_n=new RegExp("\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\([^\\r\\n\\f])","g"),Ln=function(O,B){var W="0x"+O.slice(1)-65536;return B||(W<0?String.fromCharCode(W+65536):String.fromCharCode(W>>10|55296,W&1023|56320))},Wd=function(){Bn()},Yd=zi(function(O){return O.disabled===!0&&T(O,"fieldset")},{dir:"parentNode",next:"legend"});function jd(){try{return S.activeElement}catch{}}try{x.apply(r=s.call(G.childNodes),G.childNodes),r[G.childNodes.length].nodeType}catch{x={apply:function(B,W){X.apply(B,s.call(W))},call:function(B){X.apply(B,s.call(arguments,1))}}}function ie(O,B,W,K){var st,gt,yt,At,xt,Ht,Lt,It=B&&B.ownerDocument,qt=B?B.nodeType:9;if(W=W||[],typeof O!="string"||!O||qt!==1&&qt!==9&&qt!==11)return W;if(!K&&(Bn(B),B=B||S,k)){if(qt!==11&&(xt=je.exec(O)))if(st=xt[1]){if(qt===9)if(yt=B.getElementById(st)){if(yt.id===st)return x.call(W,yt),W}else return W;else if(It&&(yt=It.getElementById(st))&&ie.contains(B,yt)&&yt.id===st)return x.call(W,yt),W}else{if(xt[2])return x.apply(W,B.getElementsByTagName(O)),W;if((st=xt[3])&&B.getElementsByClassName)return x.apply(W,B.getElementsByClassName(st)),W}if(!be[O+" "]&&(!z||!z.test(O))){if(Lt=O,It=B,qt===1&&(io.test(O)||Jr.test(O))){for(It=so.test(O)&&oo(B.parentNode)||B,(It!=B||!A.scope)&&((At=B.getAttribute("id"))?At=c.escapeSelector(At):B.setAttribute("id",At=at)),Ht=Qr(O),gt=Ht.length;gt--;)Ht[gt]=(At?"#"+At:":scope")+" "+Vi(Ht[gt]);Lt=Ht.join(",")}try{return x.apply(W,It.querySelectorAll(Lt)),W}catch{be(O,!0)}finally{At===at&&B.removeAttribute("id")}}}return Vu(O.replace(ot,"$1"),B,W,K)}function Bi(){var O=[];function B(W,K){return O.push(W+" ")>f.cacheLength&&delete B[O.shift()],B[W+" "]=K}return B}function an(O){return O[at]=!0,O}function xr(O){var B=S.createElement("fieldset");try{return!!O(B)}catch{return!1}finally{B.parentNode&&B.parentNode.removeChild(B),B=null}}function Xd(O){return function(B){return T(B,"input")&&B.type===O}}function Zd(O){return function(B){return(T(B,"input")||T(B,"button"))&&B.type===O}}function Fu(O){return function(B){return"form"in B?B.parentNode&&B.disabled===!1?"label"in B?"label"in B.parentNode?B.parentNode.disabled===O:B.disabled===O:B.isDisabled===O||B.isDisabled!==!O&&Yd(B)===O:B.disabled===O:"label"in B?B.disabled===O:!1}}function Qn(O){return an(function(B){return B=+B,an(function(W,K){for(var st,gt=O([],W.length,B),yt=gt.length;yt--;)W[st=gt[yt]]&&(W[st]=!(K[st]=W[st]))})})}function oo(O){return O&&typeof O.getElementsByTagName<"u"&&O}function Bn(O){var B,W=O?O.ownerDocument||O:G;return W==S||W.nodeType!==9||!W.documentElement||(S=W,R=S.documentElement,k=!c.isXMLDoc(S),tt=R.matches||R.webkitMatchesSelector||R.msMatchesSelector,R.msMatchesSelector&&G!=S&&(B=S.defaultView)&&B.top!==B&&B.addEventListener("unload",Wd),A.getById=xr(function(K){return R.appendChild(K).id=c.expando,!S.getElementsByName||!S.getElementsByName(c.expando).length}),A.disconnectedMatch=xr(function(K){return tt.call(K,"*")}),A.scope=xr(function(){return S.querySelectorAll(":scope")}),A.cssHas=xr(function(){try{return S.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),A.getById?(f.filter.ID=function(K){var st=K.replace(_n,Ln);return function(gt){return gt.getAttribute("id")===st}},f.find.ID=function(K,st){if(typeof st.getElementById<"u"&&k){var gt=st.getElementById(K);return gt?[gt]:[]}}):(f.filter.ID=function(K){var st=K.replace(_n,Ln);return function(gt){var yt=typeof gt.getAttributeNode<"u"&&gt.getAttributeNode("id");return yt&&yt.value===st}},f.find.ID=function(K,st){if(typeof st.getElementById<"u"&&k){var gt,yt,At,xt=st.getElementById(K);if(xt){if(gt=xt.getAttributeNode("id"),gt&&gt.value===K)return[xt];for(At=st.getElementsByName(K),yt=0;xt=At[yt++];)if(gt=xt.getAttributeNode("id"),gt&&gt.value===K)return[xt]}return[]}}),f.find.TAG=function(K,st){return typeof st.getElementsByTagName<"u"?st.getElementsByTagName(K):st.querySelectorAll(K)},f.find.CLASS=function(K,st){if(typeof st.getElementsByClassName<"u"&&k)return st.getElementsByClassName(K)},z=[],xr(function(K){var st;R.appendChild(K).innerHTML="<a id='"+at+"' href='' disabled='disabled'></a><select id='"+at+"-\r\\' disabled='disabled'><option selected=''></option></select>",K.querySelectorAll("[selected]").length||z.push("\\["+V+"*(?:value|"+pn+")"),K.querySelectorAll("[id~="+at+"-]").length||z.push("~="),K.querySelectorAll("a#"+at+"+*").length||z.push(".#.+[+~]"),K.querySelectorAll(":checked").length||z.push(":checked"),st=S.createElement("input"),st.setAttribute("type","hidden"),K.appendChild(st).setAttribute("name","D"),R.appendChild(K).disabled=!0,K.querySelectorAll(":disabled").length!==2&&z.push(":enabled",":disabled"),st=S.createElement("input"),st.setAttribute("name",""),K.appendChild(st),K.querySelectorAll("[name='']").length||z.push("\\["+V+"*name"+V+"*="+V+`*(?:''|"")`)}),A.cssHas||z.push(":has"),z=z.length&&new RegExp(z.join("|")),me=function(K,st){if(K===st)return y=!0,0;var gt=!K.compareDocumentPosition-!st.compareDocumentPosition;return gt||(gt=(K.ownerDocument||K)==(st.ownerDocument||st)?K.compareDocumentPosition(st):1,gt&1||!A.sortDetached&&st.compareDocumentPosition(K)===gt?K===S||K.ownerDocument==G&&ie.contains(G,K)?-1:st===S||st.ownerDocument==G&&ie.contains(G,st)?1:v?l.call(v,K)-l.call(v,st):0:gt&4?-1:1)}),S}ie.matches=function(O,B){return ie(O,null,null,B)},ie.matchesSelector=function(O,B){if(Bn(O),k&&!be[B+" "]&&(!z||!z.test(B)))try{var W=tt.call(O,B);if(W||A.disconnectedMatch||O.document&&O.document.nodeType!==11)return W}catch{be(B,!0)}return ie(B,S,null,[O]).length>0},ie.contains=function(O,B){return(O.ownerDocument||O)!=S&&Bn(O),c.contains(O,B)},ie.attr=function(O,B){(O.ownerDocument||O)!=S&&Bn(O);var W=f.attrHandle[B.toLowerCase()],K=W&&h.call(f.attrHandle,B.toLowerCase())?W(O,B,!k):void 0;return K!==void 0?K:O.getAttribute(B)},ie.error=function(O){throw new Error("Syntax error, unrecognized expression: "+O)},c.uniqueSort=function(O){var B,W=[],K=0,st=0;if(y=!A.sortStable,v=!A.sortStable&&s.call(O,0),F.call(O,me),y){for(;B=O[st++];)B===O[st]&&(K=W.push(st));for(;K--;)H.call(O,W[K],1)}return v=null,O},c.fn.uniqueSort=function(){return this.pushStack(c.uniqueSort(s.apply(this)))},f=c.expr={cacheLength:50,createPseudo:an,match:yn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(O){return O[1]=O[1].replace(_n,Ln),O[3]=(O[3]||O[4]||O[5]||"").replace(_n,Ln),O[2]==="~="&&(O[3]=" "+O[3]+" "),O.slice(0,4)},CHILD:function(O){return O[1]=O[1].toLowerCase(),O[1].slice(0,3)==="nth"?(O[3]||ie.error(O[0]),O[4]=+(O[4]?O[5]+(O[6]||1):2*(O[3]==="even"||O[3]==="odd")),O[5]=+(O[7]+O[8]||O[3]==="odd")):O[3]&&ie.error(O[0]),O},PSEUDO:function(O){var B,W=!O[6]&&O[2];return yn.CHILD.test(O[0])?null:(O[3]?O[2]=O[4]||O[5]||"":W&&mn.test(W)&&(B=Qr(W,!0))&&(B=W.indexOf(")",W.length-B)-W.length)&&(O[0]=O[0].slice(0,B),O[2]=W.slice(0,B)),O.slice(0,3))}},filter:{TAG:function(O){var B=O.replace(_n,Ln).toLowerCase();return O==="*"?function(){return!0}:function(W){return T(W,B)}},CLASS:function(O){var B=Nt[O+" "];return B||(B=new RegExp("(^|"+V+")"+O+"("+V+"|$)"))&&Nt(O,function(W){return B.test(typeof W.className=="string"&&W.className||typeof W.getAttribute<"u"&&W.getAttribute("class")||"")})},ATTR:function(O,B,W){return function(K){var st=ie.attr(K,O);return st==null?B==="!=":B?(st+="",B==="="?st===W:B==="!="?st!==W:B==="^="?W&&st.indexOf(W)===0:B==="*="?W&&st.indexOf(W)>-1:B==="$="?W&&st.slice(-W.length)===W:B==="~="?(" "+st.replace(Jt," ")+" ").indexOf(W)>-1:B==="|="?st===W||st.slice(0,W.length+1)===W+"-":!1):!0}},CHILD:function(O,B,W,K,st){var gt=O.slice(0,3)!=="nth",yt=O.slice(-4)!=="last",At=B==="of-type";return K===1&&st===0?function(xt){return!!xt.parentNode}:function(xt,Ht,Lt){var It,qt,Pt,ae,Ve,Te=gt!==yt?"nextSibling":"previousSibling",Xe=xt.parentNode,xn=At&&xt.nodeName.toLowerCase(),br=!Lt&&!At,Le=!1;if(Xe){if(gt){for(;Te;){for(Pt=xt;Pt=Pt[Te];)if(At?T(Pt,xn):Pt.nodeType===1)return!1;Ve=Te=O==="only"&&!Ve&&"nextSibling"}return!0}if(Ve=[yt?Xe.firstChild:Xe.lastChild],yt&&br){for(qt=Xe[at]||(Xe[at]={}),It=qt[O]||[],ae=It[0]===Z&&It[1],Le=ae&&It[2],Pt=ae&&Xe.childNodes[ae];Pt=++ae&&Pt&&Pt[Te]||(Le=ae=0)||Ve.pop();)if(Pt.nodeType===1&&++Le&&Pt===xt){qt[O]=[Z,ae,Le];break}}else if(br&&(qt=xt[at]||(xt[at]={}),It=qt[O]||[],ae=It[0]===Z&&It[1],Le=ae),Le===!1)for(;(Pt=++ae&&Pt&&Pt[Te]||(Le=ae=0)||Ve.pop())&&!((At?T(Pt,xn):Pt.nodeType===1)&&++Le&&(br&&(qt=Pt[at]||(Pt[at]={}),qt[O]=[Z,Le]),Pt===xt)););return Le-=st,Le===K||Le%K===0&&Le/K>=0}}},PSEUDO:function(O,B){var W,K=f.pseudos[O]||f.setFilters[O.toLowerCase()]||ie.error("unsupported pseudo: "+O);return K[at]?K(B):K.length>1?(W=[O,O,"",B],f.setFilters.hasOwnProperty(O.toLowerCase())?an(function(st,gt){for(var yt,At=K(st,B),xt=At.length;xt--;)yt=l.call(st,At[xt]),st[yt]=!(gt[yt]=At[xt])}):function(st){return K(st,0,W)}):K}},pseudos:{not:an(function(O){var B=[],W=[],K=lo(O.replace(ot,"$1"));return K[at]?an(function(st,gt,yt,At){for(var xt,Ht=K(st,null,At,[]),Lt=st.length;Lt--;)(xt=Ht[Lt])&&(st[Lt]=!(gt[Lt]=xt))}):function(st,gt,yt){return B[0]=st,K(B,null,yt,W),B[0]=null,!W.pop()}}),has:an(function(O){return function(B){return ie(O,B).length>0}}),contains:an(function(O){return O=O.replace(_n,Ln),function(B){return(B.textContent||c.text(B)).indexOf(O)>-1}}),lang:an(function(O){return Kr.test(O||"")||ie.error("unsupported lang: "+O),O=O.replace(_n,Ln).toLowerCase(),function(B){var W;do if(W=k?B.lang:B.getAttribute("xml:lang")||B.getAttribute("lang"))return W=W.toLowerCase(),W===O||W.indexOf(O+"-")===0;while((B=B.parentNode)&&B.nodeType===1);return!1}}),target:function(O){var B=e.location&&e.location.hash;return B&&B.slice(1)===O.id},root:function(O){return O===R},focus:function(O){return O===jd()&&S.hasFocus()&&!!(O.type||O.href||~O.tabIndex)},enabled:Fu(!1),disabled:Fu(!0),checked:function(O){return T(O,"input")&&!!O.checked||T(O,"option")&&!!O.selected},selected:function(O){return O.parentNode&&O.parentNode.selectedIndex,O.selected===!0},empty:function(O){for(O=O.firstChild;O;O=O.nextSibling)if(O.nodeType<6)return!1;return!0},parent:function(O){return!f.pseudos.empty(O)},header:function(O){return Fn.test(O.nodeName)},input:function(O){return Dn.test(O.nodeName)},button:function(O){return T(O,"input")&&O.type==="button"||T(O,"button")},text:function(O){var B;return T(O,"input")&&O.type==="text"&&((B=O.getAttribute("type"))==null||B.toLowerCase()==="text")},first:Qn(function(){return[0]}),last:Qn(function(O,B){return[B-1]}),eq:Qn(function(O,B,W){return[W<0?W+B:W]}),even:Qn(function(O,B){for(var W=0;W<B;W+=2)O.push(W);return O}),odd:Qn(function(O,B){for(var W=1;W<B;W+=2)O.push(W);return O}),lt:Qn(function(O,B,W){var K;for(W<0?K=W+B:W>B?K=B:K=W;--K>=0;)O.push(K);return O}),gt:Qn(function(O,B,W){for(var K=W<0?W+B:W;++K<B;)O.push(K);return O})}},f.pseudos.nth=f.pseudos.eq;for(a in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f.pseudos[a]=Xd(a);for(a in{submit:!0,reset:!0})f.pseudos[a]=Zd(a);function Bu(){}Bu.prototype=f.filters=f.pseudos,f.setFilters=new Bu;function Qr(O,B){var W,K,st,gt,yt,At,xt,Ht=Zt[O+" "];if(Ht)return B?0:Ht.slice(0);for(yt=O,At=[],xt=f.preFilter;yt;){(!W||(K=fe.exec(yt)))&&(K&&(yt=yt.slice(K[0].length)||yt),At.push(st=[])),W=!1,(K=Jr.exec(yt))&&(W=K.shift(),st.push({value:W,type:K[0].replace(ot," ")}),yt=yt.slice(W.length));for(gt in f.filter)(K=yn[gt].exec(yt))&&(!xt[gt]||(K=xt[gt](K)))&&(W=K.shift(),st.push({value:W,type:gt,matches:K}),yt=yt.slice(W.length));if(!W)break}return B?yt.length:yt?ie.error(O):Zt(O,At).slice(0)}function Vi(O){for(var B=0,W=O.length,K="";B<W;B++)K+=O[B].value;return K}function zi(O,B,W){var K=B.dir,st=B.next,gt=st||K,yt=W&&gt==="parentNode",At=lt++;return B.first?function(xt,Ht,Lt){for(;xt=xt[K];)if(xt.nodeType===1||yt)return O(xt,Ht,Lt);return!1}:function(xt,Ht,Lt){var It,qt,Pt=[Z,At];if(Lt){for(;xt=xt[K];)if((xt.nodeType===1||yt)&&O(xt,Ht,Lt))return!0}else for(;xt=xt[K];)if(xt.nodeType===1||yt)if(qt=xt[at]||(xt[at]={}),st&&T(xt,st))xt=xt[K]||xt;else{if((It=qt[gt])&&It[0]===Z&&It[1]===At)return Pt[2]=It[2];if(qt[gt]=Pt,Pt[2]=O(xt,Ht,Lt))return!0}return!1}}function ao(O){return O.length>1?function(B,W,K){for(var st=O.length;st--;)if(!O[st](B,W,K))return!1;return!0}:O[0]}function Jd(O,B,W){for(var K=0,st=B.length;K<st;K++)ie(O,B[K],W);return W}function $i(O,B,W,K,st){for(var gt,yt=[],At=0,xt=O.length,Ht=B!=null;At<xt;At++)(gt=O[At])&&(!W||W(gt,K,st))&&(yt.push(gt),Ht&&B.push(At));return yt}function uo(O,B,W,K,st,gt){return K&&!K[at]&&(K=uo(K)),st&&!st[at]&&(st=uo(st,gt)),an(function(yt,At,xt,Ht){var Lt,It,qt,Pt,ae=[],Ve=[],Te=At.length,Xe=yt||Jd(B||"*",xt.nodeType?[xt]:xt,[]),xn=O&&(yt||!B)?$i(Xe,ae,O,xt,Ht):Xe;if(W?(Pt=st||(yt?O:Te||K)?[]:At,W(xn,Pt,xt,Ht)):Pt=xn,K)for(Lt=$i(Pt,Ve),K(Lt,[],xt,Ht),It=Lt.length;It--;)(qt=Lt[It])&&(Pt[Ve[It]]=!(xn[Ve[It]]=qt));if(yt){if(st||O){if(st){for(Lt=[],It=Pt.length;It--;)(qt=Pt[It])&&Lt.push(xn[It]=qt);st(null,Pt=[],Lt,Ht)}for(It=Pt.length;It--;)(qt=Pt[It])&&(Lt=st?l.call(yt,qt):ae[It])>-1&&(yt[Lt]=!(At[Lt]=qt))}}else Pt=$i(Pt===At?Pt.splice(Te,Pt.length):Pt),st?st(null,At,Pt,Ht):x.apply(At,Pt)})}function co(O){for(var B,W,K,st=O.length,gt=f.relative[O[0].type],yt=gt||f.relative[" "],At=gt?1:0,xt=zi(function(It){return It===B},yt,!0),Ht=zi(function(It){return l.call(B,It)>-1},yt,!0),Lt=[function(It,qt,Pt){var ae=!gt&&(Pt||qt!=p)||((B=qt).nodeType?xt(It,qt,Pt):Ht(It,qt,Pt));return B=null,ae}];At<st;At++)if(W=f.relative[O[At].type])Lt=[zi(ao(Lt),W)];else{if(W=f.filter[O[At].type].apply(null,O[At].matches),W[at]){for(K=++At;K<st&&!f.relative[O[K].type];K++);return uo(At>1&&ao(Lt),At>1&&Vi(O.slice(0,At-1).concat({value:O[At-2].type===" "?"*":""})).replace(ot,"$1"),W,At<K&&co(O.slice(At,K)),K<st&&co(O=O.slice(K)),K<st&&Vi(O))}Lt.push(W)}return ao(Lt)}function Kd(O,B){var W=B.length>0,K=O.length>0,st=function(gt,yt,At,xt,Ht){var Lt,It,qt,Pt=0,ae="0",Ve=gt&&[],Te=[],Xe=p,xn=gt||K&&f.find.TAG("*",Ht),br=Z+=Xe==null?1:Math.random()||.1,Le=xn.length;for(Ht&&(p=yt==S||yt||Ht);ae!==Le&&(Lt=xn[ae])!=null;ae++){if(K&&Lt){for(It=0,!yt&&Lt.ownerDocument!=S&&(Bn(Lt),At=!k);qt=O[It++];)if(qt(Lt,yt||S,At)){x.call(xt,Lt);break}Ht&&(Z=br)}W&&((Lt=!qt&&Lt)&&Pt--,gt&&Ve.push(Lt))}if(Pt+=ae,W&&ae!==Pt){for(It=0;qt=B[It++];)qt(Ve,Te,yt,At);if(gt){if(Pt>0)for(;ae--;)Ve[ae]||Te[ae]||(Te[ae]=_.call(xt));Te=$i(Te)}x.apply(xt,Te),Ht&&!gt&&Te.length>0&&Pt+B.length>1&&c.uniqueSort(xt)}return Ht&&(Z=br,p=Xe),Ve};return W?an(st):st}function lo(O,B){var W,K=[],st=[],gt=Vt[O+" "];if(!gt){for(B||(B=Qr(O)),W=B.length;W--;)gt=co(B[W]),gt[at]?K.push(gt):st.push(gt);gt=Vt(O,Kd(st,K)),gt.selector=O}return gt}function Vu(O,B,W,K){var st,gt,yt,At,xt,Ht=typeof O=="function"&&O,Lt=!K&&Qr(O=Ht.selector||O);if(W=W||[],Lt.length===1){if(gt=Lt[0]=Lt[0].slice(0),gt.length>2&&(yt=gt[0]).type==="ID"&&B.nodeType===9&&k&&f.relative[gt[1].type]){if(B=(f.find.ID(yt.matches[0].replace(_n,Ln),B)||[])[0],B)Ht&&(B=B.parentNode);else return W;O=O.slice(gt.shift().value.length)}for(st=yn.needsContext.test(O)?0:gt.length;st--&&(yt=gt[st],!f.relative[At=yt.type]);)if((xt=f.find[At])&&(K=xt(yt.matches[0].replace(_n,Ln),so.test(gt[0].type)&&oo(B.parentNode)||B))){if(gt.splice(st,1),O=K.length&&Vi(gt),!O)return x.apply(W,K),W;break}}return(Ht||lo(O,Lt))(K,B,!k,W,!B||so.test(O)&&oo(B.parentNode)||B),W}A.sortStable=at.split("").sort(me).join("")===at,Bn(),A.sortDetached=xr(function(O){return O.compareDocumentPosition(S.createElement("fieldset"))&1}),c.find=ie,c.expr[":"]=c.expr.pseudos,c.unique=c.uniqueSort,ie.compile=lo,ie.select=Vu,ie.setDocument=Bn,ie.tokenize=Qr,ie.escape=c.escapeSelector,ie.getText=c.text,ie.isXML=c.isXMLDoc,ie.selectors=c.expr,ie.support=c.support,ie.uniqueSort=c.uniqueSort})();var U=function(a,f,p){for(var v=[],y=p!==void 0;(a=a[f])&&a.nodeType!==9;)if(a.nodeType===1){if(y&&c(a).is(p))break;v.push(a)}return v},Ct=function(a,f){for(var p=[];a;a=a.nextSibling)a.nodeType===1&&a!==f&&p.push(a);return p},St=c.expr.match.needsContext,ee=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function re(a,f,p){return E(f)?c.grep(a,function(v,y){return!!f.call(v,y,v)!==p}):f.nodeType?c.grep(a,function(v){return v===f!==p}):typeof f!="string"?c.grep(a,function(v){return l.call(f,v)>-1!==p}):c.filter(f,a,p)}c.filter=function(a,f,p){var v=f[0];return p&&(a=":not("+a+")"),f.length===1&&v.nodeType===1?c.find.matchesSelector(v,a)?[v]:[]:c.find.matches(a,c.grep(f,function(y){return y.nodeType===1}))},c.fn.extend({find:function(a){var f,p,v=this.length,y=this;if(typeof a!="string")return this.pushStack(c(a).filter(function(){for(f=0;f<v;f++)if(c.contains(y[f],this))return!0}));for(p=this.pushStack([]),f=0;f<v;f++)c.find(a,y[f],p);return v>1?c.uniqueSort(p):p},filter:function(a){return this.pushStack(re(this,a||[],!1))},not:function(a){return this.pushStack(re(this,a||[],!0))},is:function(a){return!!re(this,typeof a=="string"&&St.test(a)?c(a):a||[],!1).length}});var bt,Tt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,it=c.fn.init=function(a,f,p){var v,y;if(!a)return this;if(p=p||bt,typeof a=="string")if(a[0]==="<"&&a[a.length-1]===">"&&a.length>=3?v=[null,a,null]:v=Tt.exec(a),v&&(v[1]||!f))if(v[1]){if(f=f instanceof c?f[0]:f,c.merge(this,c.parseHTML(v[1],f&&f.nodeType?f.ownerDocument||f:L,!0)),ee.test(v[1])&&c.isPlainObject(f))for(v in f)E(this[v])?this[v](f[v]):this.attr(v,f[v]);return this}else return y=L.getElementById(v[2]),y&&(this[0]=y,this.length=1),this;else return!f||f.jquery?(f||p).find(a):this.constructor(f).find(a);else{if(a.nodeType)return this[0]=a,this.length=1,this;if(E(a))return p.ready!==void 0?p.ready(a):a(c)}return c.makeArray(a,this)};it.prototype=c.fn,bt=c(L);var Q=/^(?:parents|prev(?:Until|All))/,ft={children:!0,contents:!0,next:!0,prev:!0};c.fn.extend({has:function(a){var f=c(a,this),p=f.length;return this.filter(function(){for(var v=0;v<p;v++)if(c.contains(this,f[v]))return!0})},closest:function(a,f){var p,v=0,y=this.length,x=[],S=typeof a!="string"&&c(a);if(!St.test(a)){for(;v<y;v++)for(p=this[v];p&&p!==f;p=p.parentNode)if(p.nodeType<11&&(S?S.index(p)>-1:p.nodeType===1&&c.find.matchesSelector(p,a))){x.push(p);break}}return this.pushStack(x.length>1?c.uniqueSort(x):x)},index:function(a){return a?typeof a=="string"?l.call(c(a),this[0]):l.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,f){return this.pushStack(c.uniqueSort(c.merge(this.get(),c(a,f))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}});function $t(a,f){for(;(a=a[f])&&a.nodeType!==1;);return a}c.each({parent:function(a){var f=a.parentNode;return f&&f.nodeType!==11?f:null},parents:function(a){return U(a,"parentNode")},parentsUntil:function(a,f,p){return U(a,"parentNode",p)},next:function(a){return $t(a,"nextSibling")},prev:function(a){return $t(a,"previousSibling")},nextAll:function(a){return U(a,"nextSibling")},prevAll:function(a){return U(a,"previousSibling")},nextUntil:function(a,f,p){return U(a,"nextSibling",p)},prevUntil:function(a,f,p){return U(a,"previousSibling",p)},siblings:function(a){return Ct((a.parentNode||{}).firstChild,a)},children:function(a){return Ct(a.firstChild)},contents:function(a){return a.contentDocument!=null&&i(a.contentDocument)?a.contentDocument:(T(a,"template")&&(a=a.content||a),c.merge([],a.childNodes))}},function(a,f){c.fn[a]=function(p,v){var y=c.map(this,f,p);return a.slice(-5)!=="Until"&&(v=p),v&&typeof v=="string"&&(y=c.filter(v,y)),this.length>1&&(ft[a]||c.uniqueSort(y),Q.test(a)&&y.reverse()),this.pushStack(y)}});var kt=/[^\x20\t\r\n\f]+/g;function _t(a){var f={};return c.each(a.match(kt)||[],function(p,v){f[v]=!0}),f}c.Callbacks=function(a){a=typeof a=="string"?_t(a):c.extend({},a);var f,p,v,y,x=[],S=[],R=-1,k=function(){for(y=y||a.once,v=f=!0;S.length;R=-1)for(p=S.shift();++R<x.length;)x[R].apply(p[0],p[1])===!1&&a.stopOnFalse&&(R=x.length,p=!1);a.memory||(p=!1),f=!1,y&&(p?x=[]:x="")},z={add:function(){return x&&(p&&!f&&(R=x.length-1,S.push(p)),function tt(at){c.each(at,function(Z,lt){E(lt)?(!a.unique||!z.has(lt))&&x.push(lt):lt&&lt.length&&j(lt)!=="string"&&tt(lt)})}(arguments),p&&!f&&k()),this},remove:function(){return c.each(arguments,function(tt,at){for(var Z;(Z=c.inArray(at,x,Z))>-1;)x.splice(Z,1),Z<=R&&R--}),this},has:function(tt){return tt?c.inArray(tt,x)>-1:x.length>0},empty:function(){return x&&(x=[]),this},disable:function(){return y=S=[],x=p="",this},disabled:function(){return!x},lock:function(){return y=S=[],!p&&!f&&(x=p=""),this},locked:function(){return!!y},fireWith:function(tt,at){return y||(at=at||[],at=[tt,at.slice?at.slice():at],S.push(at),f||k()),this},fire:function(){return z.fireWith(this,arguments),this},fired:function(){return!!v}};return z};function Xt(a){return a}function Mt(a){throw a}function m(a,f,p,v){var y;try{a&&E(y=a.promise)?y.call(a).done(f).fail(p):a&&E(y=a.then)?y.call(a,f,p):f.apply(void 0,[a].slice(v))}catch(x){p.apply(void 0,[x])}}c.extend({Deferred:function(a){var f=[["notify","progress",c.Callbacks("memory"),c.Callbacks("memory"),2],["resolve","done",c.Callbacks("once memory"),c.Callbacks("once memory"),0,"resolved"],["reject","fail",c.Callbacks("once memory"),c.Callbacks("once memory"),1,"rejected"]],p="pending",v={state:function(){return p},always:function(){return y.done(arguments).fail(arguments),this},catch:function(x){return v.then(null,x)},pipe:function(){var x=arguments;return c.Deferred(function(S){c.each(f,function(R,k){var z=E(x[k[4]])&&x[k[4]];y[k[1]](function(){var tt=z&&z.apply(this,arguments);tt&&E(tt.promise)?tt.promise().progress(S.notify).done(S.resolve).fail(S.reject):S[k[0]+"With"](this,z?[tt]:arguments)})}),x=null}).promise()},then:function(x,S,R){var k=0;function z(tt,at,Z,lt){return function(){var Nt=this,Zt=arguments,Vt=function(){var me,pn;if(!(tt<k)){if(me=Z.apply(Nt,Zt),me===at.promise())throw new TypeError("Thenable self-resolution");pn=me&&(typeof me=="object"||typeof me=="function")&&me.then,E(pn)?lt?pn.call(me,z(k,at,Xt,lt),z(k,at,Mt,lt)):(k++,pn.call(me,z(k,at,Xt,lt),z(k,at,Mt,lt),z(k,at,Xt,at.notifyWith))):(Z!==Xt&&(Nt=void 0,Zt=[me]),(lt||at.resolveWith)(Nt,Zt))}},be=lt?Vt:function(){try{Vt()}catch(me){c.Deferred.exceptionHook&&c.Deferred.exceptionHook(me,be.error),tt+1>=k&&(Z!==Mt&&(Nt=void 0,Zt=[me]),at.rejectWith(Nt,Zt))}};tt?be():(c.Deferred.getErrorHook?be.error=c.Deferred.getErrorHook():c.Deferred.getStackHook&&(be.error=c.Deferred.getStackHook()),e.setTimeout(be))}}return c.Deferred(function(tt){f[0][3].add(z(0,tt,E(R)?R:Xt,tt.notifyWith)),f[1][3].add(z(0,tt,E(x)?x:Xt)),f[2][3].add(z(0,tt,E(S)?S:Mt))}).promise()},promise:function(x){return x!=null?c.extend(x,v):v}},y={};return c.each(f,function(x,S){var R=S[2],k=S[5];v[S[1]]=R.add,k&&R.add(function(){p=k},f[3-x][2].disable,f[3-x][3].disable,f[0][2].lock,f[0][3].lock),R.add(S[3].fire),y[S[0]]=function(){return y[S[0]+"With"](this===y?void 0:this,arguments),this},y[S[0]+"With"]=R.fireWith}),v.promise(y),a&&a.call(y,y),y},when:function(a){var f=arguments.length,p=f,v=Array(p),y=s.call(arguments),x=c.Deferred(),S=function(R){return function(k){v[R]=this,y[R]=arguments.length>1?s.call(arguments):k,--f||x.resolveWith(v,y)}};if(f<=1&&(m(a,x.done(S(p)).resolve,x.reject,!f),x.state()==="pending"||E(y[p]&&y[p].then)))return x.then();for(;p--;)m(y[p],S(p),x.reject);return x.promise()}});var C=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;c.Deferred.exceptionHook=function(a,f){e.console&&e.console.warn&&a&&C.test(a.name)&&e.console.warn("jQuery.Deferred exception: "+a.message,a.stack,f)},c.readyException=function(a){e.setTimeout(function(){throw a})};var M=c.Deferred();c.fn.ready=function(a){return M.then(a).catch(function(f){c.readyException(f)}),this},c.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--c.readyWait:c.isReady)||(c.isReady=!0,!(a!==!0&&--c.readyWait>0)&&M.resolveWith(L,[c]))}}),c.ready.then=M.then;function I(){L.removeEventListener("DOMContentLoaded",I),e.removeEventListener("load",I),c.ready()}L.readyState==="complete"||L.readyState!=="loading"&&!L.documentElement.doScroll?e.setTimeout(c.ready):(L.addEventListener("DOMContentLoaded",I),e.addEventListener("load",I));var J=function(a,f,p,v,y,x,S){var R=0,k=a.length,z=p==null;if(j(p)==="object"){y=!0;for(R in p)J(a,f,R,p[R],!0,x,S)}else if(v!==void 0&&(y=!0,E(v)||(S=!0),z&&(S?(f.call(a,v),f=null):(z=f,f=function(tt,at,Z){return z.call(c(tt),Z)})),f))for(;R<k;R++)f(a[R],p,S?v:v.call(a[R],R,f(a[R],p)));return y?a:z?f.call(a):k?f(a[0],p):x},et=/^-ms-/,mt=/-([a-z])/g;function Dt(a,f){return f.toUpperCase()}function jt(a){return a.replace(et,"ms-").replace(mt,Dt)}var ce=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType};function se(){this.expando=c.expando+se.uid++}se.uid=1,se.prototype={cache:function(a){var f=a[this.expando];return f||(f={},ce(a)&&(a.nodeType?a[this.expando]=f:Object.defineProperty(a,this.expando,{value:f,configurable:!0}))),f},set:function(a,f,p){var v,y=this.cache(a);if(typeof f=="string")y[jt(f)]=p;else for(v in f)y[jt(v)]=f[v];return y},get:function(a,f){return f===void 0?this.cache(a):a[this.expando]&&a[this.expando][jt(f)]},access:function(a,f,p){return f===void 0||f&&typeof f=="string"&&p===void 0?this.get(a,f):(this.set(a,f,p),p!==void 0?p:f)},remove:function(a,f){var p,v=a[this.expando];if(v!==void 0){if(f!==void 0)for(Array.isArray(f)?f=f.map(jt):(f=jt(f),f=f in v?[f]:f.match(kt)||[]),p=f.length;p--;)delete v[f[p]];(f===void 0||c.isEmptyObject(v))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var f=a[this.expando];return f!==void 0&&!c.isEmptyObject(f)}};var dt=new se,Ft=new se,Kt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,jn=/[A-Z]/g;function le(a){return a==="true"?!0:a==="false"?!1:a==="null"?null:a===+a+""?+a:Kt.test(a)?JSON.parse(a):a}function ve(a,f,p){var v;if(p===void 0&&a.nodeType===1)if(v="data-"+f.replace(jn,"-$&").toLowerCase(),p=a.getAttribute(v),typeof p=="string"){try{p=le(p)}catch{}Ft.set(a,f,p)}else p=void 0;return p}c.extend({hasData:function(a){return Ft.hasData(a)||dt.hasData(a)},data:function(a,f,p){return Ft.access(a,f,p)},removeData:function(a,f){Ft.remove(a,f)},_data:function(a,f,p){return dt.access(a,f,p)},_removeData:function(a,f){dt.remove(a,f)}}),c.fn.extend({data:function(a,f){var p,v,y,x=this[0],S=x&&x.attributes;if(a===void 0){if(this.length&&(y=Ft.get(x),x.nodeType===1&&!dt.get(x,"hasDataAttrs"))){for(p=S.length;p--;)S[p]&&(v=S[p].name,v.indexOf("data-")===0&&(v=jt(v.slice(5)),ve(x,v,y[v])));dt.set(x,"hasDataAttrs",!0)}return y}return typeof a=="object"?this.each(function(){Ft.set(this,a)}):J(this,function(R){var k;if(x&&R===void 0)return k=Ft.get(x,a),k!==void 0||(k=ve(x,a),k!==void 0)?k:void 0;this.each(function(){Ft.set(this,a,R)})},null,f,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Ft.remove(this,a)})}}),c.extend({queue:function(a,f,p){var v;if(a)return f=(f||"fx")+"queue",v=dt.get(a,f),p&&(!v||Array.isArray(p)?v=dt.access(a,f,c.makeArray(p)):v.push(p)),v||[]},dequeue:function(a,f){f=f||"fx";var p=c.queue(a,f),v=p.length,y=p.shift(),x=c._queueHooks(a,f),S=function(){c.dequeue(a,f)};y==="inprogress"&&(y=p.shift(),v--),y&&(f==="fx"&&p.unshift("inprogress"),delete x.stop,y.call(a,S,x)),!v&&x&&x.empty.fire()},_queueHooks:function(a,f){var p=f+"queueHooks";return dt.get(a,p)||dt.access(a,p,{empty:c.Callbacks("once memory").add(function(){dt.remove(a,[f+"queue",p])})})}}),c.fn.extend({queue:function(a,f){var p=2;return typeof a!="string"&&(f=a,a="fx",p--),arguments.length<p?c.queue(this[0],a):f===void 0?this:this.each(function(){var v=c.queue(this,a,f);c._queueHooks(this,a),a==="fx"&&v[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,f){var p,v=1,y=c.Deferred(),x=this,S=this.length,R=function(){--v||y.resolveWith(x,[x])};for(typeof a!="string"&&(f=a,a=void 0),a=a||"fx";S--;)p=dt.get(x[S],a+"queueHooks"),p&&p.empty&&(v++,p.empty.add(R));return R(),y.promise(f)}});var _e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rn=new RegExp("^(?:([+-])=|)("+_e+")([a-z%]*)$","i"),De=["Top","Right","Bottom","Left"],sn=L.documentElement,gn=function(a){return c.contains(a.ownerDocument,a)},gr={composed:!0};sn.getRootNode&&(gn=function(a){return c.contains(a.ownerDocument,a)||a.getRootNode(gr)===a.ownerDocument});var Xn=function(a,f){return a=f||a,a.style.display==="none"||a.style.display===""&&gn(a)&&c.css(a,"display")==="none"};function Gr(a,f,p,v){var y,x,S=20,R=v?function(){return v.cur()}:function(){return c.css(a,f,"")},k=R(),z=p&&p[3]||(c.cssNumber[f]?"":"px"),tt=a.nodeType&&(c.cssNumber[f]||z!=="px"&&+k)&&rn.exec(c.css(a,f));if(tt&&tt[3]!==z){for(k=k/2,z=z||tt[3],tt=+k||1;S--;)c.style(a,f,tt+z),(1-x)*(1-(x=R()/k||.5))<=0&&(S=0),tt=tt/x;tt=tt*2,c.style(a,f,tt+z),p=p||[]}return p&&(tt=+tt||+k||0,y=p[1]?tt+(p[1]+1)*p[2]:+p[2],v&&(v.unit=z,v.start=tt,v.end=y)),y}var Ur={};function In(a){var f,p=a.ownerDocument,v=a.nodeName,y=Ur[v];return y||(f=p.body.appendChild(p.createElement(v)),y=c.css(f,"display"),f.parentNode.removeChild(f),y==="none"&&(y="block"),Ur[v]=y,y)}function Cn(a,f){for(var p,v,y=[],x=0,S=a.length;x<S;x++)v=a[x],v.style&&(p=v.style.display,f?(p==="none"&&(y[x]=dt.get(v,"display")||null,y[x]||(v.style.display="")),v.style.display===""&&Xn(v)&&(y[x]=In(v))):p!=="none"&&(y[x]="none",dt.set(v,"display",p)));for(x=0;x<S;x++)y[x]!=null&&(a[x].style.display=y[x]);return a}c.fn.extend({show:function(){return Cn(this,!0)},hide:function(){return Cn(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){Xn(this)?c(this).show():c(this).hide()})}});var Rn=/^(?:checkbox|radio)$/i,Wr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ki=/^$|^module$|\/(?:java|ecma)script/i;(function(){var a=L.createDocumentFragment(),f=a.appendChild(L.createElement("div")),p=L.createElement("input");p.setAttribute("type","radio"),p.setAttribute("checked","checked"),p.setAttribute("name","t"),f.appendChild(p),A.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked,f.innerHTML="<textarea>x</textarea>",A.noCloneChecked=!!f.cloneNode(!0).lastChild.defaultValue,f.innerHTML="<option></option>",A.option=!!f.lastChild})();var de={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td,A.option||(de.optgroup=de.option=[1,"<select multiple='multiple'>","</select>"]);function Fe(a,f){var p;return typeof a.getElementsByTagName<"u"?p=a.getElementsByTagName(f||"*"):typeof a.querySelectorAll<"u"?p=a.querySelectorAll(f||"*"):p=[],f===void 0||f&&T(a,f)?c.merge([a],p):p}function Gs(a,f){for(var p=0,v=a.length;p<v;p++)dt.set(a[p],"globalEval",!f||dt.get(f[p],"globalEval"))}var hd=/<|&#?\w+;/;function hu(a,f,p,v,y){for(var x,S,R,k,z,tt,at=f.createDocumentFragment(),Z=[],lt=0,Nt=a.length;lt<Nt;lt++)if(x=a[lt],x||x===0)if(j(x)==="object")c.merge(Z,x.nodeType?[x]:x);else if(!hd.test(x))Z.push(f.createTextNode(x));else{for(S=S||at.appendChild(f.createElement("div")),R=(Wr.exec(x)||["",""])[1].toLowerCase(),k=de[R]||de._default,S.innerHTML=k[1]+c.htmlPrefilter(x)+k[2],tt=k[0];tt--;)S=S.lastChild;c.merge(Z,S.childNodes),S=at.firstChild,S.textContent=""}for(at.textContent="",lt=0;x=Z[lt++];){if(v&&c.inArray(x,v)>-1){y&&y.push(x);continue}if(z=gn(x),S=Fe(at.appendChild(x),"script"),z&&Gs(S),p)for(tt=0;x=S[tt++];)ki.test(x.type||"")&&p.push(x)}return at}var du=/^([^.]*)(?:\.(.+)|)/;function pr(){return!0}function vr(){return!1}function Us(a,f,p,v,y,x){var S,R;if(typeof f=="object"){typeof p!="string"&&(v=v||p,p=void 0);for(R in f)Us(a,R,p,v,f[R],x);return a}if(v==null&&y==null?(y=p,v=p=void 0):y==null&&(typeof p=="string"?(y=v,v=void 0):(y=v,v=p,p=void 0)),y===!1)y=vr;else if(!y)return a;return x===1&&(S=y,y=function(k){return c().off(k),S.apply(this,arguments)},y.guid=S.guid||(S.guid=c.guid++)),a.each(function(){c.event.add(this,f,y,v,p)})}c.event={global:{},add:function(a,f,p,v,y){var x,S,R,k,z,tt,at,Z,lt,Nt,Zt,Vt=dt.get(a);if(ce(a))for(p.handler&&(x=p,p=x.handler,y=x.selector),y&&c.find.matchesSelector(sn,y),p.guid||(p.guid=c.guid++),(k=Vt.events)||(k=Vt.events=Object.create(null)),(S=Vt.handle)||(S=Vt.handle=function(be){return typeof c<"u"&&c.event.triggered!==be.type?c.event.dispatch.apply(a,arguments):void 0}),f=(f||"").match(kt)||[""],z=f.length;z--;)R=du.exec(f[z])||[],lt=Zt=R[1],Nt=(R[2]||"").split(".").sort(),lt&&(at=c.event.special[lt]||{},lt=(y?at.delegateType:at.bindType)||lt,at=c.event.special[lt]||{},tt=c.extend({type:lt,origType:Zt,data:v,handler:p,guid:p.guid,selector:y,needsContext:y&&c.expr.match.needsContext.test(y),namespace:Nt.join(".")},x),(Z=k[lt])||(Z=k[lt]=[],Z.delegateCount=0,(!at.setup||at.setup.call(a,v,Nt,S)===!1)&&a.addEventListener&&a.addEventListener(lt,S)),at.add&&(at.add.call(a,tt),tt.handler.guid||(tt.handler.guid=p.guid)),y?Z.splice(Z.delegateCount++,0,tt):Z.push(tt),c.event.global[lt]=!0)},remove:function(a,f,p,v,y){var x,S,R,k,z,tt,at,Z,lt,Nt,Zt,Vt=dt.hasData(a)&&dt.get(a);if(!(!Vt||!(k=Vt.events))){for(f=(f||"").match(kt)||[""],z=f.length;z--;){if(R=du.exec(f[z])||[],lt=Zt=R[1],Nt=(R[2]||"").split(".").sort(),!lt){for(lt in k)c.event.remove(a,lt+f[z],p,v,!0);continue}for(at=c.event.special[lt]||{},lt=(v?at.delegateType:at.bindType)||lt,Z=k[lt]||[],R=R[2]&&new RegExp("(^|\\.)"+Nt.join("\\.(?:.*\\.|)")+"(\\.|$)"),S=x=Z.length;x--;)tt=Z[x],(y||Zt===tt.origType)&&(!p||p.guid===tt.guid)&&(!R||R.test(tt.namespace))&&(!v||v===tt.selector||v==="**"&&tt.selector)&&(Z.splice(x,1),tt.selector&&Z.delegateCount--,at.remove&&at.remove.call(a,tt));S&&!Z.length&&((!at.teardown||at.teardown.call(a,Nt,Vt.handle)===!1)&&c.removeEvent(a,lt,Vt.handle),delete k[lt])}c.isEmptyObject(k)&&dt.remove(a,"handle events")}},dispatch:function(a){var f,p,v,y,x,S,R=new Array(arguments.length),k=c.event.fix(a),z=(dt.get(this,"events")||Object.create(null))[k.type]||[],tt=c.event.special[k.type]||{};for(R[0]=k,f=1;f<arguments.length;f++)R[f]=arguments[f];if(k.delegateTarget=this,!(tt.preDispatch&&tt.preDispatch.call(this,k)===!1)){for(S=c.event.handlers.call(this,k,z),f=0;(y=S[f++])&&!k.isPropagationStopped();)for(k.currentTarget=y.elem,p=0;(x=y.handlers[p++])&&!k.isImmediatePropagationStopped();)(!k.rnamespace||x.namespace===!1||k.rnamespace.test(x.namespace))&&(k.handleObj=x,k.data=x.data,v=((c.event.special[x.origType]||{}).handle||x.handler).apply(y.elem,R),v!==void 0&&(k.result=v)===!1&&(k.preventDefault(),k.stopPropagation()));return tt.postDispatch&&tt.postDispatch.call(this,k),k.result}},handlers:function(a,f){var p,v,y,x,S,R=[],k=f.delegateCount,z=a.target;if(k&&z.nodeType&&!(a.type==="click"&&a.button>=1)){for(;z!==this;z=z.parentNode||this)if(z.nodeType===1&&!(a.type==="click"&&z.disabled===!0)){for(x=[],S={},p=0;p<k;p++)v=f[p],y=v.selector+" ",S[y]===void 0&&(S[y]=v.needsContext?c(y,this).index(z)>-1:c.find(y,this,null,[z]).length),S[y]&&x.push(v);x.length&&R.push({elem:z,handlers:x})}}return z=this,k<f.length&&R.push({elem:z,handlers:f.slice(k)}),R},addProp:function(a,f){Object.defineProperty(c.Event.prototype,a,{enumerable:!0,configurable:!0,get:E(f)?function(){if(this.originalEvent)return f(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(p){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:p})}})},fix:function(a){return a[c.expando]?a:new c.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){var f=this||a;return Rn.test(f.type)&&f.click&&T(f,"input")&&Ii(f,"click",!0),!1},trigger:function(a){var f=this||a;return Rn.test(f.type)&&f.click&&T(f,"input")&&Ii(f,"click"),!0},_default:function(a){var f=a.target;return Rn.test(f.type)&&f.click&&T(f,"input")&&dt.get(f,"click")||T(f,"a")}},beforeunload:{postDispatch:function(a){a.result!==void 0&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};function Ii(a,f,p){if(!p){dt.get(a,f)===void 0&&c.event.add(a,f,pr);return}dt.set(a,f,!1),c.event.add(a,f,{namespace:!1,handler:function(v){var y,x=dt.get(this,f);if(v.isTrigger&1&&this[f]){if(x)(c.event.special[f]||{}).delegateType&&v.stopPropagation();else if(x=s.call(arguments),dt.set(this,f,x),this[f](),y=dt.get(this,f),dt.set(this,f,!1),x!==y)return v.stopImmediatePropagation(),v.preventDefault(),y}else x&&(dt.set(this,f,c.event.trigger(x[0],x.slice(1),this)),v.stopPropagation(),v.isImmediatePropagationStopped=pr)}})}c.removeEvent=function(a,f,p){a.removeEventListener&&a.removeEventListener(f,p)},c.Event=function(a,f){if(!(this instanceof c.Event))return new c.Event(a,f);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===void 0&&a.returnValue===!1?pr:vr,this.target=a.target&&a.target.nodeType===3?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,f&&c.extend(this,f),this.timeStamp=a&&a.timeStamp||Date.now(),this[c.expando]=!0},c.Event.prototype={constructor:c.Event,isDefaultPrevented:vr,isPropagationStopped:vr,isImmediatePropagationStopped:vr,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=pr,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=pr,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=pr,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},c.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},c.event.addProp),c.each({focus:"focusin",blur:"focusout"},function(a,f){function p(v){if(L.documentMode){var y=dt.get(this,"handle"),x=c.event.fix(v);x.type=v.type==="focusin"?"focus":"blur",x.isSimulated=!0,y(v),x.target===x.currentTarget&&y(x)}else c.event.simulate(f,v.target,c.event.fix(v))}c.event.special[a]={setup:function(){var v;if(Ii(this,a,!0),L.documentMode)v=dt.get(this,f),v||this.addEventListener(f,p),dt.set(this,f,(v||0)+1);else return!1},trigger:function(){return Ii(this,a),!0},teardown:function(){var v;if(L.documentMode)v=dt.get(this,f)-1,v?dt.set(this,f,v):(this.removeEventListener(f,p),dt.remove(this,f));else return!1},_default:function(v){return dt.get(v.target,a)},delegateType:f},c.event.special[f]={setup:function(){var v=this.ownerDocument||this.document||this,y=L.documentMode?this:v,x=dt.get(y,f);x||(L.documentMode?this.addEventListener(f,p):v.addEventListener(a,p,!0)),dt.set(y,f,(x||0)+1)},teardown:function(){var v=this.ownerDocument||this.document||this,y=L.documentMode?this:v,x=dt.get(y,f)-1;x?dt.set(y,f,x):(L.documentMode?this.removeEventListener(f,p):v.removeEventListener(a,p,!0),dt.remove(y,f))}}}),c.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,f){c.event.special[a]={delegateType:f,bindType:f,handle:function(p){var v,y=this,x=p.relatedTarget,S=p.handleObj;return(!x||x!==y&&!c.contains(y,x))&&(p.type=S.origType,v=S.handler.apply(this,arguments),p.type=f),v}}}),c.fn.extend({on:function(a,f,p,v){return Us(this,a,f,p,v)},one:function(a,f,p,v){return Us(this,a,f,p,v,1)},off:function(a,f,p){var v,y;if(a&&a.preventDefault&&a.handleObj)return v=a.handleObj,c(a.delegateTarget).off(v.namespace?v.origType+"."+v.namespace:v.origType,v.selector,v.handler),this;if(typeof a=="object"){for(y in a)this.off(y,f,a[y]);return this}return(f===!1||typeof f=="function")&&(p=f,f=void 0),p===!1&&(p=vr),this.each(function(){c.event.remove(this,a,p,f)})}});var dd=/<script|<style|<link/i,gd=/checked\s*(?:[^=]|=\s*.checked.)/i,pd=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function gu(a,f){return T(a,"table")&&T(f.nodeType!==11?f:f.firstChild,"tr")&&c(a).children("tbody")[0]||a}function vd(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function md(a){return(a.type||"").slice(0,5)==="true/"?a.type=a.type.slice(5):a.removeAttribute("type"),a}function pu(a,f){var p,v,y,x,S,R,k;if(f.nodeType===1){if(dt.hasData(a)&&(x=dt.get(a),k=x.events,k)){dt.remove(f,"handle events");for(y in k)for(p=0,v=k[y].length;p<v;p++)c.event.add(f,y,k[y][p])}Ft.hasData(a)&&(S=Ft.access(a),R=c.extend({},S),Ft.set(f,R))}}function yd(a,f){var p=f.nodeName.toLowerCase();p==="input"&&Rn.test(a.type)?f.checked=a.checked:(p==="input"||p==="textarea")&&(f.defaultValue=a.defaultValue)}function mr(a,f,p,v){f=o(f);var y,x,S,R,k,z,tt=0,at=a.length,Z=at-1,lt=f[0],Nt=E(lt);if(Nt||at>1&&typeof lt=="string"&&!A.checkClone&&gd.test(lt))return a.each(function(Zt){var Vt=a.eq(Zt);Nt&&(f[0]=lt.call(this,Zt,Vt.html())),mr(Vt,f,p,v)});if(at&&(y=hu(f,a[0].ownerDocument,!1,a,v),x=y.firstChild,y.childNodes.length===1&&(y=x),x||v)){for(S=c.map(Fe(y,"script"),vd),R=S.length;tt<at;tt++)k=y,tt!==Z&&(k=c.clone(k,!0,!0),R&&c.merge(S,Fe(k,"script"))),p.call(a[tt],k,tt);if(R)for(z=S[S.length-1].ownerDocument,c.map(S,md),tt=0;tt<R;tt++)k=S[tt],ki.test(k.type||"")&&!dt.access(k,"globalEval")&&c.contains(z,k)&&(k.src&&(k.type||"").toLowerCase()!=="module"?c._evalUrl&&!k.noModule&&c._evalUrl(k.src,{nonce:k.nonce||k.getAttribute("nonce")},z):Y(k.textContent.replace(pd,""),k,z))}return a}function vu(a,f,p){for(var v,y=f?c.filter(f,a):a,x=0;(v=y[x])!=null;x++)!p&&v.nodeType===1&&c.cleanData(Fe(v)),v.parentNode&&(p&&gn(v)&&Gs(Fe(v,"script")),v.parentNode.removeChild(v));return a}c.extend({htmlPrefilter:function(a){return a},clone:function(a,f,p){var v,y,x,S,R=a.cloneNode(!0),k=gn(a);if(!A.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!c.isXMLDoc(a))for(S=Fe(R),x=Fe(a),v=0,y=x.length;v<y;v++)yd(x[v],S[v]);if(f)if(p)for(x=x||Fe(a),S=S||Fe(R),v=0,y=x.length;v<y;v++)pu(x[v],S[v]);else pu(a,R);return S=Fe(R,"script"),S.length>0&&Gs(S,!k&&Fe(a,"script")),R},cleanData:function(a){for(var f,p,v,y=c.event.special,x=0;(p=a[x])!==void 0;x++)if(ce(p)){if(f=p[dt.expando]){if(f.events)for(v in f.events)y[v]?c.event.remove(p,v):c.removeEvent(p,v,f.handle);p[dt.expando]=void 0}p[Ft.expando]&&(p[Ft.expando]=void 0)}}}),c.fn.extend({detach:function(a){return vu(this,a,!0)},remove:function(a){return vu(this,a)},text:function(a){return J(this,function(f){return f===void 0?c.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=f)})},null,a,arguments.length)},append:function(){return mr(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var f=gu(this,a);f.appendChild(a)}})},prepend:function(){return mr(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var f=gu(this,a);f.insertBefore(a,f.firstChild)}})},before:function(){return mr(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return mr(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,f=0;(a=this[f])!=null;f++)a.nodeType===1&&(c.cleanData(Fe(a,!1)),a.textContent="");return this},clone:function(a,f){return a=a??!1,f=f??a,this.map(function(){return c.clone(this,a,f)})},html:function(a){return J(this,function(f){var p=this[0]||{},v=0,y=this.length;if(f===void 0&&p.nodeType===1)return p.innerHTML;if(typeof f=="string"&&!dd.test(f)&&!de[(Wr.exec(f)||["",""])[1].toLowerCase()]){f=c.htmlPrefilter(f);try{for(;v<y;v++)p=this[v]||{},p.nodeType===1&&(c.cleanData(Fe(p,!1)),p.innerHTML=f);p=0}catch{}}p&&this.empty().append(f)},null,a,arguments.length)},replaceWith:function(){var a=[];return mr(this,arguments,function(f){var p=this.parentNode;c.inArray(this,a)<0&&(c.cleanData(Fe(this)),p&&p.replaceChild(f,this))},a)}}),c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,f){c.fn[a]=function(p){for(var v,y=[],x=c(p),S=x.length-1,R=0;R<=S;R++)v=R===S?this:this.clone(!0),c(x[R])[f](v),u.apply(y,v.get());return this.pushStack(y)}});var Ws=new RegExp("^("+_e+")(?!px)[a-z%]+$","i"),Ys=/^--/,Ri=function(a){var f=a.ownerDocument.defaultView;return(!f||!f.opener)&&(f=e),f.getComputedStyle(a)},mu=function(a,f,p){var v,y,x={};for(y in f)x[y]=a.style[y],a.style[y]=f[y];v=p.call(a);for(y in f)a.style[y]=x[y];return v},xd=new RegExp(De.join("|"),"i");(function(){function a(){if(z){k.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",z.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",sn.appendChild(k).appendChild(z);var tt=e.getComputedStyle(z);p=tt.top!=="1%",R=f(tt.marginLeft)===12,z.style.right="60%",x=f(tt.right)===36,v=f(tt.width)===36,z.style.position="absolute",y=f(z.offsetWidth/3)===12,sn.removeChild(k),z=null}}function f(tt){return Math.round(parseFloat(tt))}var p,v,y,x,S,R,k=L.createElement("div"),z=L.createElement("div");z.style&&(z.style.backgroundClip="content-box",z.cloneNode(!0).style.backgroundClip="",A.clearCloneStyle=z.style.backgroundClip==="content-box",c.extend(A,{boxSizingReliable:function(){return a(),v},pixelBoxStyles:function(){return a(),x},pixelPosition:function(){return a(),p},reliableMarginLeft:function(){return a(),R},scrollboxSize:function(){return a(),y},reliableTrDimensions:function(){var tt,at,Z,lt;return S==null&&(tt=L.createElement("table"),at=L.createElement("tr"),Z=L.createElement("div"),tt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",at.style.cssText="box-sizing:content-box;border:1px solid",at.style.height="1px",Z.style.height="9px",Z.style.display="block",sn.appendChild(tt).appendChild(at).appendChild(Z),lt=e.getComputedStyle(at),S=parseInt(lt.height,10)+parseInt(lt.borderTopWidth,10)+parseInt(lt.borderBottomWidth,10)===at.offsetHeight,sn.removeChild(tt)),S}}))})();function Yr(a,f,p){var v,y,x,S,R=Ys.test(f),k=a.style;return p=p||Ri(a),p&&(S=p.getPropertyValue(f)||p[f],R&&S&&(S=S.replace(ot,"$1")||void 0),S===""&&!gn(a)&&(S=c.style(a,f)),!A.pixelBoxStyles()&&Ws.test(S)&&xd.test(f)&&(v=k.width,y=k.minWidth,x=k.maxWidth,k.minWidth=k.maxWidth=k.width=S,S=p.width,k.width=v,k.minWidth=y,k.maxWidth=x)),S!==void 0?S+"":S}function yu(a,f){return{get:function(){if(a()){delete this.get;return}return(this.get=f).apply(this,arguments)}}}var xu=["Webkit","Moz","ms"],bu=L.createElement("div").style,wu={};function bd(a){for(var f=a[0].toUpperCase()+a.slice(1),p=xu.length;p--;)if(a=xu[p]+f,a in bu)return a}function js(a){var f=c.cssProps[a]||wu[a];return f||(a in bu?a:wu[a]=bd(a)||a)}var wd=/^(none|table(?!-c[ea]).+)/,Ad={position:"absolute",visibility:"hidden",display:"block"},Au={letterSpacing:"0",fontWeight:"400"};function Tu(a,f,p){var v=rn.exec(f);return v?Math.max(0,v[2]-(p||0))+(v[3]||"px"):f}function Xs(a,f,p,v,y,x){var S=f==="width"?1:0,R=0,k=0,z=0;if(p===(v?"border":"content"))return 0;for(;S<4;S+=2)p==="margin"&&(z+=c.css(a,p+De[S],!0,y)),v?(p==="content"&&(k-=c.css(a,"padding"+De[S],!0,y)),p!=="margin"&&(k-=c.css(a,"border"+De[S]+"Width",!0,y))):(k+=c.css(a,"padding"+De[S],!0,y),p!=="padding"?k+=c.css(a,"border"+De[S]+"Width",!0,y):R+=c.css(a,"border"+De[S]+"Width",!0,y));return!v&&x>=0&&(k+=Math.max(0,Math.ceil(a["offset"+f[0].toUpperCase()+f.slice(1)]-x-k-R-.5))||0),k+z}function Su(a,f,p){var v=Ri(a),y=!A.boxSizingReliable()||p,x=y&&c.css(a,"boxSizing",!1,v)==="border-box",S=x,R=Yr(a,f,v),k="offset"+f[0].toUpperCase()+f.slice(1);if(Ws.test(R)){if(!p)return R;R="auto"}return(!A.boxSizingReliable()&&x||!A.reliableTrDimensions()&&T(a,"tr")||R==="auto"||!parseFloat(R)&&c.css(a,"display",!1,v)==="inline")&&a.getClientRects().length&&(x=c.css(a,"boxSizing",!1,v)==="border-box",S=k in a,S&&(R=a[k])),R=parseFloat(R)||0,R+Xs(a,f,p||(x?"border":"content"),S,v,R)+"px"}c.extend({cssHooks:{opacity:{get:function(a,f){if(f){var p=Yr(a,"opacity");return p===""?"1":p}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(a,f,p,v){if(!(!a||a.nodeType===3||a.nodeType===8||!a.style)){var y,x,S,R=jt(f),k=Ys.test(f),z=a.style;if(k||(f=js(R)),S=c.cssHooks[f]||c.cssHooks[R],p!==void 0){if(x=typeof p,x==="string"&&(y=rn.exec(p))&&y[1]&&(p=Gr(a,f,y),x="number"),p==null||p!==p)return;x==="number"&&!k&&(p+=y&&y[3]||(c.cssNumber[R]?"":"px")),!A.clearCloneStyle&&p===""&&f.indexOf("background")===0&&(z[f]="inherit"),(!S||!("set"in S)||(p=S.set(a,p,v))!==void 0)&&(k?z.setProperty(f,p):z[f]=p)}else return S&&"get"in S&&(y=S.get(a,!1,v))!==void 0?y:z[f]}},css:function(a,f,p,v){var y,x,S,R=jt(f),k=Ys.test(f);return k||(f=js(R)),S=c.cssHooks[f]||c.cssHooks[R],S&&"get"in S&&(y=S.get(a,!0,p)),y===void 0&&(y=Yr(a,f,v)),y==="normal"&&f in Au&&(y=Au[f]),p===""||p?(x=parseFloat(y),p===!0||isFinite(x)?x||0:y):y}}),c.each(["height","width"],function(a,f){c.cssHooks[f]={get:function(p,v,y){if(v)return wd.test(c.css(p,"display"))&&(!p.getClientRects().length||!p.getBoundingClientRect().width)?mu(p,Ad,function(){return Su(p,f,y)}):Su(p,f,y)},set:function(p,v,y){var x,S=Ri(p),R=!A.scrollboxSize()&&S.position==="absolute",k=R||y,z=k&&c.css(p,"boxSizing",!1,S)==="border-box",tt=y?Xs(p,f,y,z,S):0;return z&&R&&(tt-=Math.ceil(p["offset"+f[0].toUpperCase()+f.slice(1)]-parseFloat(S[f])-Xs(p,f,"border",!1,S)-.5)),tt&&(x=rn.exec(v))&&(x[3]||"px")!=="px"&&(p.style[f]=v,v=c.css(p,f)),Tu(p,v,tt)}}}),c.cssHooks.marginLeft=yu(A.reliableMarginLeft,function(a,f){if(f)return(parseFloat(Yr(a,"marginLeft"))||a.getBoundingClientRect().left-mu(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),c.each({margin:"",padding:"",border:"Width"},function(a,f){c.cssHooks[a+f]={expand:function(p){for(var v=0,y={},x=typeof p=="string"?p.split(" "):[p];v<4;v++)y[a+De[v]+f]=x[v]||x[v-2]||x[0];return y}},a!=="margin"&&(c.cssHooks[a+f].set=Tu)}),c.fn.extend({css:function(a,f){return J(this,function(p,v,y){var x,S,R={},k=0;if(Array.isArray(v)){for(x=Ri(p),S=v.length;k<S;k++)R[v[k]]=c.css(p,v[k],!1,x);return R}return y!==void 0?c.style(p,v,y):c.css(p,v)},a,f,arguments.length>1)}});function Be(a,f,p,v,y){return new Be.prototype.init(a,f,p,v,y)}c.Tween=Be,Be.prototype={constructor:Be,init:function(a,f,p,v,y,x){this.elem=a,this.prop=p,this.easing=y||c.easing._default,this.options=f,this.start=this.now=this.cur(),this.end=v,this.unit=x||(c.cssNumber[p]?"":"px")},cur:function(){var a=Be.propHooks[this.prop];return a&&a.get?a.get(this):Be.propHooks._default.get(this)},run:function(a){var f,p=Be.propHooks[this.prop];return this.options.duration?this.pos=f=c.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=f=a,this.now=(this.end-this.start)*f+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),p&&p.set?p.set(this):Be.propHooks._default.set(this),this}},Be.prototype.init.prototype=Be.prototype,Be.propHooks={_default:{get:function(a){var f;return a.elem.nodeType!==1||a.elem[a.prop]!=null&&a.elem.style[a.prop]==null?a.elem[a.prop]:(f=c.css(a.elem,a.prop,""),!f||f==="auto"?0:f)},set:function(a){c.fx.step[a.prop]?c.fx.step[a.prop](a):a.elem.nodeType===1&&(c.cssHooks[a.prop]||a.elem.style[js(a.prop)]!=null)?c.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Be.propHooks.scrollTop=Be.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},c.easing={linear:function(a){return a},swing:function(a){return .5-Math.cos(a*Math.PI)/2},_default:"swing"},c.fx=Be.prototype.init,c.fx.step={};var yr,Di,Td=/^(?:toggle|show|hide)$/,Sd=/queueHooks$/;function Zs(){Di&&(L.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Zs):e.setTimeout(Zs,c.fx.interval),c.fx.tick())}function Pu(){return e.setTimeout(function(){yr=void 0}),yr=Date.now()}function Fi(a,f){var p,v=0,y={height:a};for(f=f?1:0;v<4;v+=2-f)p=De[v],y["margin"+p]=y["padding"+p]=a;return f&&(y.opacity=y.width=a),y}function Eu(a,f,p){for(var v,y=(on.tweeners[f]||[]).concat(on.tweeners["*"]),x=0,S=y.length;x<S;x++)if(v=y[x].call(p,f,a))return v}function Pd(a,f,p){var v,y,x,S,R,k,z,tt,at="width"in f||"height"in f,Z=this,lt={},Nt=a.style,Zt=a.nodeType&&Xn(a),Vt=dt.get(a,"fxshow");p.queue||(S=c._queueHooks(a,"fx"),S.unqueued==null&&(S.unqueued=0,R=S.empty.fire,S.empty.fire=function(){S.unqueued||R()}),S.unqueued++,Z.always(function(){Z.always(function(){S.unqueued--,c.queue(a,"fx").length||S.empty.fire()})}));for(v in f)if(y=f[v],Td.test(y)){if(delete f[v],x=x||y==="toggle",y===(Zt?"hide":"show"))if(y==="show"&&Vt&&Vt[v]!==void 0)Zt=!0;else continue;lt[v]=Vt&&Vt[v]||c.style(a,v)}if(k=!c.isEmptyObject(f),!(!k&&c.isEmptyObject(lt))){at&&a.nodeType===1&&(p.overflow=[Nt.overflow,Nt.overflowX,Nt.overflowY],z=Vt&&Vt.display,z==null&&(z=dt.get(a,"display")),tt=c.css(a,"display"),tt==="none"&&(z?tt=z:(Cn([a],!0),z=a.style.display||z,tt=c.css(a,"display"),Cn([a]))),(tt==="inline"||tt==="inline-block"&&z!=null)&&c.css(a,"float")==="none"&&(k||(Z.done(function(){Nt.display=z}),z==null&&(tt=Nt.display,z=tt==="none"?"":tt)),Nt.display="inline-block")),p.overflow&&(Nt.overflow="hidden",Z.always(function(){Nt.overflow=p.overflow[0],Nt.overflowX=p.overflow[1],Nt.overflowY=p.overflow[2]})),k=!1;for(v in lt)k||(Vt?"hidden"in Vt&&(Zt=Vt.hidden):Vt=dt.access(a,"fxshow",{display:z}),x&&(Vt.hidden=!Zt),Zt&&Cn([a],!0),Z.done(function(){Zt||Cn([a]),dt.remove(a,"fxshow");for(v in lt)c.style(a,v,lt[v])})),k=Eu(Zt?Vt[v]:0,v,Z),v in Vt||(Vt[v]=k.start,Zt&&(k.end=k.start,k.start=0))}}function Ed(a,f){var p,v,y,x,S;for(p in a)if(v=jt(p),y=f[v],x=a[p],Array.isArray(x)&&(y=x[1],x=a[p]=x[0]),p!==v&&(a[v]=x,delete a[p]),S=c.cssHooks[v],S&&"expand"in S){x=S.expand(x),delete a[v];for(p in x)p in a||(a[p]=x[p],f[p]=y)}else f[v]=y}function on(a,f,p){var v,y,x=0,S=on.prefilters.length,R=c.Deferred().always(function(){delete k.elem}),k=function(){if(y)return!1;for(var at=yr||Pu(),Z=Math.max(0,z.startTime+z.duration-at),lt=Z/z.duration||0,Nt=1-lt,Zt=0,Vt=z.tweens.length;Zt<Vt;Zt++)z.tweens[Zt].run(Nt);return R.notifyWith(a,[z,Nt,Z]),Nt<1&&Vt?Z:(Vt||R.notifyWith(a,[z,1,0]),R.resolveWith(a,[z]),!1)},z=R.promise({elem:a,props:c.extend({},f),opts:c.extend(!0,{specialEasing:{},easing:c.easing._default},p),originalProperties:f,originalOptions:p,startTime:yr||Pu(),duration:p.duration,tweens:[],createTween:function(at,Z){var lt=c.Tween(a,z.opts,at,Z,z.opts.specialEasing[at]||z.opts.easing);return z.tweens.push(lt),lt},stop:function(at){var Z=0,lt=at?z.tweens.length:0;if(y)return this;for(y=!0;Z<lt;Z++)z.tweens[Z].run(1);return at?(R.notifyWith(a,[z,1,0]),R.resolveWith(a,[z,at])):R.rejectWith(a,[z,at]),this}}),tt=z.props;for(Ed(tt,z.opts.specialEasing);x<S;x++)if(v=on.prefilters[x].call(z,a,tt,z.opts),v)return E(v.stop)&&(c._queueHooks(z.elem,z.opts.queue).stop=v.stop.bind(v)),v;return c.map(tt,Eu,z),E(z.opts.start)&&z.opts.start.call(a,z),z.progress(z.opts.progress).done(z.opts.done,z.opts.complete).fail(z.opts.fail).always(z.opts.always),c.fx.timer(c.extend(k,{elem:a,anim:z,queue:z.opts.queue})),z}c.Animation=c.extend(on,{tweeners:{"*":[function(a,f){var p=this.createTween(a,f);return Gr(p.elem,a,rn.exec(f),p),p}]},tweener:function(a,f){E(a)?(f=a,a=["*"]):a=a.match(kt);for(var p,v=0,y=a.length;v<y;v++)p=a[v],on.tweeners[p]=on.tweeners[p]||[],on.tweeners[p].unshift(f)},prefilters:[Pd],prefilter:function(a,f){f?on.prefilters.unshift(a):on.prefilters.push(a)}}),c.speed=function(a,f,p){var v=a&&typeof a=="object"?c.extend({},a):{complete:p||!p&&f||E(a)&&a,duration:a,easing:p&&f||f&&!E(f)&&f};return c.fx.off?v.duration=0:typeof v.duration!="number"&&(v.duration in c.fx.speeds?v.duration=c.fx.speeds[v.duration]:v.duration=c.fx.speeds._default),(v.queue==null||v.queue===!0)&&(v.queue="fx"),v.old=v.complete,v.complete=function(){E(v.old)&&v.old.call(this),v.queue&&c.dequeue(this,v.queue)},v},c.fn.extend({fadeTo:function(a,f,p,v){return this.filter(Xn).css("opacity",0).show().end().animate({opacity:f},a,p,v)},animate:function(a,f,p,v){var y=c.isEmptyObject(a),x=c.speed(f,p,v),S=function(){var R=on(this,c.extend({},a),x);(y||dt.get(this,"finish"))&&R.stop(!0)};return S.finish=S,y||x.queue===!1?this.each(S):this.queue(x.queue,S)},stop:function(a,f,p){var v=function(y){var x=y.stop;delete y.stop,x(p)};return typeof a!="string"&&(p=f,f=a,a=void 0),f&&this.queue(a||"fx",[]),this.each(function(){var y=!0,x=a!=null&&a+"queueHooks",S=c.timers,R=dt.get(this);if(x)R[x]&&R[x].stop&&v(R[x]);else for(x in R)R[x]&&R[x].stop&&Sd.test(x)&&v(R[x]);for(x=S.length;x--;)S[x].elem===this&&(a==null||S[x].queue===a)&&(S[x].anim.stop(p),y=!1,S.splice(x,1));(y||!p)&&c.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var f,p=dt.get(this),v=p[a+"queue"],y=p[a+"queueHooks"],x=c.timers,S=v?v.length:0;for(p.finish=!0,c.queue(this,a,[]),y&&y.stop&&y.stop.call(this,!0),f=x.length;f--;)x[f].elem===this&&x[f].queue===a&&(x[f].anim.stop(!0),x.splice(f,1));for(f=0;f<S;f++)v[f]&&v[f].finish&&v[f].finish.call(this);delete p.finish})}}),c.each(["toggle","show","hide"],function(a,f){var p=c.fn[f];c.fn[f]=function(v,y,x){return v==null||typeof v=="boolean"?p.apply(this,arguments):this.animate(Fi(f,!0),v,y,x)}}),c.each({slideDown:Fi("show"),slideUp:Fi("hide"),slideToggle:Fi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,f){c.fn[a]=function(p,v,y){return this.animate(f,p,v,y)}}),c.timers=[],c.fx.tick=function(){var a,f=0,p=c.timers;for(yr=Date.now();f<p.length;f++)a=p[f],!a()&&p[f]===a&&p.splice(f--,1);p.length||c.fx.stop(),yr=void 0},c.fx.timer=function(a){c.timers.push(a),c.fx.start()},c.fx.interval=13,c.fx.start=function(){Di||(Di=!0,Zs())},c.fx.stop=function(){Di=null},c.fx.speeds={slow:600,fast:200,_default:400},c.fn.delay=function(a,f){return a=c.fx&&c.fx.speeds[a]||a,f=f||"fx",this.queue(f,function(p,v){var y=e.setTimeout(p,a);v.stop=function(){e.clearTimeout(y)}})},function(){var a=L.createElement("input"),f=L.createElement("select"),p=f.appendChild(L.createElement("option"));a.type="checkbox",A.checkOn=a.value!=="",A.optSelected=p.selected,a=L.createElement("input"),a.value="t",a.type="radio",A.radioValue=a.value==="t"}();var Cu,jr=c.expr.attrHandle;c.fn.extend({attr:function(a,f){return J(this,c.attr,a,f,arguments.length>1)},removeAttr:function(a){return this.each(function(){c.removeAttr(this,a)})}}),c.extend({attr:function(a,f,p){var v,y,x=a.nodeType;if(!(x===3||x===8||x===2)){if(typeof a.getAttribute>"u")return c.prop(a,f,p);if((x!==1||!c.isXMLDoc(a))&&(y=c.attrHooks[f.toLowerCase()]||(c.expr.match.bool.test(f)?Cu:void 0)),p!==void 0){if(p===null){c.removeAttr(a,f);return}return y&&"set"in y&&(v=y.set(a,p,f))!==void 0?v:(a.setAttribute(f,p+""),p)}return y&&"get"in y&&(v=y.get(a,f))!==null?v:(v=c.find.attr(a,f),v??void 0)}},attrHooks:{type:{set:function(a,f){if(!A.radioValue&&f==="radio"&&T(a,"input")){var p=a.value;return a.setAttribute("type",f),p&&(a.value=p),f}}}},removeAttr:function(a,f){var p,v=0,y=f&&f.match(kt);if(y&&a.nodeType===1)for(;p=y[v++];)a.removeAttribute(p)}}),Cu={set:function(a,f,p){return f===!1?c.removeAttr(a,p):a.setAttribute(p,p),p}},c.each(c.expr.match.bool.source.match(/\w+/g),function(a,f){var p=jr[f]||c.find.attr;jr[f]=function(v,y,x){var S,R,k=y.toLowerCase();return x||(R=jr[k],jr[k]=S,S=p(v,y,x)!=null?k:null,jr[k]=R),S}});var Cd=/^(?:input|select|textarea|button)$/i,_d=/^(?:a|area)$/i;c.fn.extend({prop:function(a,f){return J(this,c.prop,a,f,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[c.propFix[a]||a]})}}),c.extend({prop:function(a,f,p){var v,y,x=a.nodeType;if(!(x===3||x===8||x===2))return(x!==1||!c.isXMLDoc(a))&&(f=c.propFix[f]||f,y=c.propHooks[f]),p!==void 0?y&&"set"in y&&(v=y.set(a,p,f))!==void 0?v:a[f]=p:y&&"get"in y&&(v=y.get(a,f))!==null?v:a[f]},propHooks:{tabIndex:{get:function(a){var f=c.find.attr(a,"tabindex");return f?parseInt(f,10):Cd.test(a.nodeName)||_d.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),A.optSelected||(c.propHooks.selected={get:function(a){var f=a.parentNode;return f&&f.parentNode&&f.parentNode.selectedIndex,null},set:function(a){var f=a.parentNode;f&&(f.selectedIndex,f.parentNode&&f.parentNode.selectedIndex)}}),c.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){c.propFix[this.toLowerCase()]=this});function Zn(a){var f=a.match(kt)||[];return f.join(" ")}function Jn(a){return a.getAttribute&&a.getAttribute("class")||""}function Js(a){return Array.isArray(a)?a:typeof a=="string"?a.match(kt)||[]:[]}c.fn.extend({addClass:function(a){var f,p,v,y,x,S;return E(a)?this.each(function(R){c(this).addClass(a.call(this,R,Jn(this)))}):(f=Js(a),f.length?this.each(function(){if(v=Jn(this),p=this.nodeType===1&&" "+Zn(v)+" ",p){for(x=0;x<f.length;x++)y=f[x],p.indexOf(" "+y+" ")<0&&(p+=y+" ");S=Zn(p),v!==S&&this.setAttribute("class",S)}}):this)},removeClass:function(a){var f,p,v,y,x,S;return E(a)?this.each(function(R){c(this).removeClass(a.call(this,R,Jn(this)))}):arguments.length?(f=Js(a),f.length?this.each(function(){if(v=Jn(this),p=this.nodeType===1&&" "+Zn(v)+" ",p){for(x=0;x<f.length;x++)for(y=f[x];p.indexOf(" "+y+" ")>-1;)p=p.replace(" "+y+" "," ");S=Zn(p),v!==S&&this.setAttribute("class",S)}}):this):this.attr("class","")},toggleClass:function(a,f){var p,v,y,x,S=typeof a,R=S==="string"||Array.isArray(a);return E(a)?this.each(function(k){c(this).toggleClass(a.call(this,k,Jn(this),f),f)}):typeof f=="boolean"&&R?f?this.addClass(a):this.removeClass(a):(p=Js(a),this.each(function(){if(R)for(x=c(this),y=0;y<p.length;y++)v=p[y],x.hasClass(v)?x.removeClass(v):x.addClass(v);else(a===void 0||S==="boolean")&&(v=Jn(this),v&&dt.set(this,"__className__",v),this.setAttribute&&this.setAttribute("class",v||a===!1?"":dt.get(this,"__className__")||""))}))},hasClass:function(a){var f,p,v=0;for(f=" "+a+" ";p=this[v++];)if(p.nodeType===1&&(" "+Zn(Jn(p))+" ").indexOf(f)>-1)return!0;return!1}});var Ld=/\r/g;c.fn.extend({val:function(a){var f,p,v,y=this[0];return arguments.length?(v=E(a),this.each(function(x){var S;this.nodeType===1&&(v?S=a.call(this,x,c(this).val()):S=a,S==null?S="":typeof S=="number"?S+="":Array.isArray(S)&&(S=c.map(S,function(R){return R==null?"":R+""})),f=c.valHooks[this.type]||c.valHooks[this.nodeName.toLowerCase()],(!f||!("set"in f)||f.set(this,S,"value")===void 0)&&(this.value=S))})):y?(f=c.valHooks[y.type]||c.valHooks[y.nodeName.toLowerCase()],f&&"get"in f&&(p=f.get(y,"value"))!==void 0?p:(p=y.value,typeof p=="string"?p.replace(Ld,""):p??"")):void 0}}),c.extend({valHooks:{option:{get:function(a){var f=c.find.attr(a,"value");return f??Zn(c.text(a))}},select:{get:function(a){var f,p,v,y=a.options,x=a.selectedIndex,S=a.type==="select-one",R=S?null:[],k=S?x+1:y.length;for(x<0?v=k:v=S?x:0;v<k;v++)if(p=y[v],(p.selected||v===x)&&!p.disabled&&(!p.parentNode.disabled||!T(p.parentNode,"optgroup"))){if(f=c(p).val(),S)return f;R.push(f)}return R},set:function(a,f){for(var p,v,y=a.options,x=c.makeArray(f),S=y.length;S--;)v=y[S],(v.selected=c.inArray(c.valHooks.option.get(v),x)>-1)&&(p=!0);return p||(a.selectedIndex=-1),x}}}}),c.each(["radio","checkbox"],function(){c.valHooks[this]={set:function(a,f){if(Array.isArray(f))return a.checked=c.inArray(c(a).val(),f)>-1}},A.checkOn||(c.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})});var Xr=e.location,_u={guid:Date.now()},Ks=/\?/;c.parseXML=function(a){var f,p;if(!a||typeof a!="string")return null;try{f=new e.DOMParser().parseFromString(a,"text/xml")}catch{}return p=f&&f.getElementsByTagName("parsererror")[0],(!f||p)&&c.error("Invalid XML: "+(p?c.map(p.childNodes,function(v){return v.textContent}).join(`
`):a)),f};var Lu=/^(?:focusinfocus|focusoutblur)$/,Mu=function(a){a.stopPropagation()};c.extend(c.event,{trigger:function(a,f,p,v){var y,x,S,R,k,z,tt,at,Z=[p||L],lt=h.call(a,"type")?a.type:a,Nt=h.call(a,"namespace")?a.namespace.split("."):[];if(x=at=S=p=p||L,!(p.nodeType===3||p.nodeType===8)&&!Lu.test(lt+c.event.triggered)&&(lt.indexOf(".")>-1&&(Nt=lt.split("."),lt=Nt.shift(),Nt.sort()),k=lt.indexOf(":")<0&&"on"+lt,a=a[c.expando]?a:new c.Event(lt,typeof a=="object"&&a),a.isTrigger=v?2:3,a.namespace=Nt.join("."),a.rnamespace=a.namespace?new RegExp("(^|\\.)"+Nt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=p),f=f==null?[a]:c.makeArray(f,[a]),tt=c.event.special[lt]||{},!(!v&&tt.trigger&&tt.trigger.apply(p,f)===!1))){if(!v&&!tt.noBubble&&!N(p)){for(R=tt.delegateType||lt,Lu.test(R+lt)||(x=x.parentNode);x;x=x.parentNode)Z.push(x),S=x;S===(p.ownerDocument||L)&&Z.push(S.defaultView||S.parentWindow||e)}for(y=0;(x=Z[y++])&&!a.isPropagationStopped();)at=x,a.type=y>1?R:tt.bindType||lt,z=(dt.get(x,"events")||Object.create(null))[a.type]&&dt.get(x,"handle"),z&&z.apply(x,f),z=k&&x[k],z&&z.apply&&ce(x)&&(a.result=z.apply(x,f),a.result===!1&&a.preventDefault());return a.type=lt,!v&&!a.isDefaultPrevented()&&(!tt._default||tt._default.apply(Z.pop(),f)===!1)&&ce(p)&&k&&E(p[lt])&&!N(p)&&(S=p[k],S&&(p[k]=null),c.event.triggered=lt,a.isPropagationStopped()&&at.addEventListener(lt,Mu),p[lt](),a.isPropagationStopped()&&at.removeEventListener(lt,Mu),c.event.triggered=void 0,S&&(p[k]=S)),a.result}},simulate:function(a,f,p){var v=c.extend(new c.Event,p,{type:a,isSimulated:!0});c.event.trigger(v,null,f)}}),c.fn.extend({trigger:function(a,f){return this.each(function(){c.event.trigger(a,f,this)})},triggerHandler:function(a,f){var p=this[0];if(p)return c.event.trigger(a,f,p,!0)}});var Md=/\[\]$/,Ou=/\r?\n/g,Od=/^(?:submit|button|image|reset|file)$/i,Nd=/^(?:input|select|textarea|keygen)/i;function Qs(a,f,p,v){var y;if(Array.isArray(f))c.each(f,function(x,S){p||Md.test(a)?v(a,S):Qs(a+"["+(typeof S=="object"&&S!=null?x:"")+"]",S,p,v)});else if(!p&&j(f)==="object")for(y in f)Qs(a+"["+y+"]",f[y],p,v);else v(a,f)}c.param=function(a,f){var p,v=[],y=function(x,S){var R=E(S)?S():S;v[v.length]=encodeURIComponent(x)+"="+encodeURIComponent(R??"")};if(a==null)return"";if(Array.isArray(a)||a.jquery&&!c.isPlainObject(a))c.each(a,function(){y(this.name,this.value)});else for(p in a)Qs(p,a[p],f,y);return v.join("&")},c.fn.extend({serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=c.prop(this,"elements");return a?c.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!c(this).is(":disabled")&&Nd.test(this.nodeName)&&!Od.test(a)&&(this.checked||!Rn.test(a))}).map(function(a,f){var p=c(this).val();return p==null?null:Array.isArray(p)?c.map(p,function(v){return{name:f.name,value:v.replace(Ou,`\r
`)}}):{name:f.name,value:p.replace(Ou,`\r
`)}}).get()}});var kd=/%20/g,Id=/#.*$/,Rd=/([?&])_=[^&]*/,Dd=/^(.*?):[ \t]*([^\r\n]*)$/mg,Fd=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bd=/^(?:GET|HEAD)$/,Vd=/^\/\//,Nu={},to={},ku="*/".concat("*"),eo=L.createElement("a");eo.href=Xr.href;function Iu(a){return function(f,p){typeof f!="string"&&(p=f,f="*");var v,y=0,x=f.toLowerCase().match(kt)||[];if(E(p))for(;v=x[y++];)v[0]==="+"?(v=v.slice(1)||"*",(a[v]=a[v]||[]).unshift(p)):(a[v]=a[v]||[]).push(p)}}function Ru(a,f,p,v){var y={},x=a===to;function S(R){var k;return y[R]=!0,c.each(a[R]||[],function(z,tt){var at=tt(f,p,v);if(typeof at=="string"&&!x&&!y[at])return f.dataTypes.unshift(at),S(at),!1;if(x)return!(k=at)}),k}return S(f.dataTypes[0])||!y["*"]&&S("*")}function no(a,f){var p,v,y=c.ajaxSettings.flatOptions||{};for(p in f)f[p]!==void 0&&((y[p]?a:v||(v={}))[p]=f[p]);return v&&c.extend(!0,a,v),a}function zd(a,f,p){for(var v,y,x,S,R=a.contents,k=a.dataTypes;k[0]==="*";)k.shift(),v===void 0&&(v=a.mimeType||f.getResponseHeader("Content-Type"));if(v){for(y in R)if(R[y]&&R[y].test(v)){k.unshift(y);break}}if(k[0]in p)x=k[0];else{for(y in p){if(!k[0]||a.converters[y+" "+k[0]]){x=y;break}S||(S=y)}x=x||S}if(x)return x!==k[0]&&k.unshift(x),p[x]}function $d(a,f,p,v){var y,x,S,R,k,z={},tt=a.dataTypes.slice();if(tt[1])for(S in a.converters)z[S.toLowerCase()]=a.converters[S];for(x=tt.shift();x;)if(a.responseFields[x]&&(p[a.responseFields[x]]=f),!k&&v&&a.dataFilter&&(f=a.dataFilter(f,a.dataType)),k=x,x=tt.shift(),x){if(x==="*")x=k;else if(k!=="*"&&k!==x){if(S=z[k+" "+x]||z["* "+x],!S){for(y in z)if(R=y.split(" "),R[1]===x&&(S=z[k+" "+R[0]]||z["* "+R[0]],S)){S===!0?S=z[y]:z[y]!==!0&&(x=R[0],tt.unshift(R[1]));break}}if(S!==!0)if(S&&a.throws)f=S(f);else try{f=S(f)}catch(at){return{state:"parsererror",error:S?at:"No conversion from "+k+" to "+x}}}}return{state:"success",data:f}}c.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Xr.href,type:"GET",isLocal:Fd.test(Xr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ku,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":c.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,f){return f?no(no(a,c.ajaxSettings),f):no(c.ajaxSettings,a)},ajaxPrefilter:Iu(Nu),ajaxTransport:Iu(to),ajax:function(a,f){typeof a=="object"&&(f=a,a=void 0),f=f||{};var p,v,y,x,S,R,k,z,tt,at,Z=c.ajaxSetup({},f),lt=Z.context||Z,Nt=Z.context&&(lt.nodeType||lt.jquery)?c(lt):c.event,Zt=c.Deferred(),Vt=c.Callbacks("once memory"),be=Z.statusCode||{},me={},pn={},vn="canceled",Gt={readyState:0,getResponseHeader:function(Jt){var fe;if(k){if(!x)for(x={};fe=Dd.exec(y);)x[fe[1].toLowerCase()+" "]=(x[fe[1].toLowerCase()+" "]||[]).concat(fe[2]);fe=x[Jt.toLowerCase()+" "]}return fe==null?null:fe.join(", ")},getAllResponseHeaders:function(){return k?y:null},setRequestHeader:function(Jt,fe){return k==null&&(Jt=pn[Jt.toLowerCase()]=pn[Jt.toLowerCase()]||Jt,me[Jt]=fe),this},overrideMimeType:function(Jt){return k==null&&(Z.mimeType=Jt),this},statusCode:function(Jt){var fe;if(Jt)if(k)Gt.always(Jt[Gt.status]);else for(fe in Jt)be[fe]=[be[fe],Jt[fe]];return this},abort:function(Jt){var fe=Jt||vn;return p&&p.abort(fe),Kn(0,fe),this}};if(Zt.promise(Gt),Z.url=((a||Z.url||Xr.href)+"").replace(Vd,Xr.protocol+"//"),Z.type=f.method||f.type||Z.method||Z.type,Z.dataTypes=(Z.dataType||"*").toLowerCase().match(kt)||[""],Z.crossDomain==null){R=L.createElement("a");try{R.href=Z.url,R.href=R.href,Z.crossDomain=eo.protocol+"//"+eo.host!=R.protocol+"//"+R.host}catch{Z.crossDomain=!0}}if(Z.data&&Z.processData&&typeof Z.data!="string"&&(Z.data=c.param(Z.data,Z.traditional)),Ru(Nu,Z,f,Gt),k)return Gt;z=c.event&&Z.global,z&&c.active++===0&&c.event.trigger("ajaxStart"),Z.type=Z.type.toUpperCase(),Z.hasContent=!Bd.test(Z.type),v=Z.url.replace(Id,""),Z.hasContent?Z.data&&Z.processData&&(Z.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Z.data=Z.data.replace(kd,"+")):(at=Z.url.slice(v.length),Z.data&&(Z.processData||typeof Z.data=="string")&&(v+=(Ks.test(v)?"&":"?")+Z.data,delete Z.data),Z.cache===!1&&(v=v.replace(Rd,"$1"),at=(Ks.test(v)?"&":"?")+"_="+_u.guid+++at),Z.url=v+at),Z.ifModified&&(c.lastModified[v]&&Gt.setRequestHeader("If-Modified-Since",c.lastModified[v]),c.etag[v]&&Gt.setRequestHeader("If-None-Match",c.etag[v])),(Z.data&&Z.hasContent&&Z.contentType!==!1||f.contentType)&&Gt.setRequestHeader("Content-Type",Z.contentType),Gt.setRequestHeader("Accept",Z.dataTypes[0]&&Z.accepts[Z.dataTypes[0]]?Z.accepts[Z.dataTypes[0]]+(Z.dataTypes[0]!=="*"?", "+ku+"; q=0.01":""):Z.accepts["*"]);for(tt in Z.headers)Gt.setRequestHeader(tt,Z.headers[tt]);if(Z.beforeSend&&(Z.beforeSend.call(lt,Gt,Z)===!1||k))return Gt.abort();if(vn="abort",Vt.add(Z.complete),Gt.done(Z.success),Gt.fail(Z.error),p=Ru(to,Z,f,Gt),!p)Kn(-1,"No Transport");else{if(Gt.readyState=1,z&&Nt.trigger("ajaxSend",[Gt,Z]),k)return Gt;Z.async&&Z.timeout>0&&(S=e.setTimeout(function(){Gt.abort("timeout")},Z.timeout));try{k=!1,p.send(me,Kn)}catch(Jt){if(k)throw Jt;Kn(-1,Jt)}}function Kn(Jt,fe,Jr,io){var mn,Kr,yn,Dn,Fn,je=fe;k||(k=!0,S&&e.clearTimeout(S),p=void 0,y=io||"",Gt.readyState=Jt>0?4:0,mn=Jt>=200&&Jt<300||Jt===304,Jr&&(Dn=zd(Z,Gt,Jr)),!mn&&c.inArray("script",Z.dataTypes)>-1&&c.inArray("json",Z.dataTypes)<0&&(Z.converters["text script"]=function(){}),Dn=$d(Z,Dn,Gt,mn),mn?(Z.ifModified&&(Fn=Gt.getResponseHeader("Last-Modified"),Fn&&(c.lastModified[v]=Fn),Fn=Gt.getResponseHeader("etag"),Fn&&(c.etag[v]=Fn)),Jt===204||Z.type==="HEAD"?je="nocontent":Jt===304?je="notmodified":(je=Dn.state,Kr=Dn.data,yn=Dn.error,mn=!yn)):(yn=je,(Jt||!je)&&(je="error",Jt<0&&(Jt=0))),Gt.status=Jt,Gt.statusText=(fe||je)+"",mn?Zt.resolveWith(lt,[Kr,je,Gt]):Zt.rejectWith(lt,[Gt,je,yn]),Gt.statusCode(be),be=void 0,z&&Nt.trigger(mn?"ajaxSuccess":"ajaxError",[Gt,Z,mn?Kr:yn]),Vt.fireWith(lt,[Gt,je]),z&&(Nt.trigger("ajaxComplete",[Gt,Z]),--c.active||c.event.trigger("ajaxStop")))}return Gt},getJSON:function(a,f,p){return c.get(a,f,p,"json")},getScript:function(a,f){return c.get(a,void 0,f,"script")}}),c.each(["get","post"],function(a,f){c[f]=function(p,v,y,x){return E(v)&&(x=x||y,y=v,v=void 0),c.ajax(c.extend({url:p,type:f,dataType:x,data:v,success:y},c.isPlainObject(p)&&p))}}),c.ajaxPrefilter(function(a){var f;for(f in a.headers)f.toLowerCase()==="content-type"&&(a.contentType=a.headers[f]||"")}),c._evalUrl=function(a,f,p){return c.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(v){c.globalEval(v,f,p)}})},c.fn.extend({wrapAll:function(a){var f;return this[0]&&(E(a)&&(a=a.call(this[0])),f=c(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&f.insertBefore(this[0]),f.map(function(){for(var p=this;p.firstElementChild;)p=p.firstElementChild;return p}).append(this)),this},wrapInner:function(a){return E(a)?this.each(function(f){c(this).wrapInner(a.call(this,f))}):this.each(function(){var f=c(this),p=f.contents();p.length?p.wrapAll(a):f.append(a)})},wrap:function(a){var f=E(a);return this.each(function(p){c(this).wrapAll(f?a.call(this,p):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){c(this).replaceWith(this.childNodes)}),this}}),c.expr.pseudos.hidden=function(a){return!c.expr.pseudos.visible(a)},c.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},c.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Hd={0:200,1223:204},Zr=c.ajaxSettings.xhr();A.cors=!!Zr&&"withCredentials"in Zr,A.ajax=Zr=!!Zr,c.ajaxTransport(function(a){var f,p;if(A.cors||Zr&&!a.crossDomain)return{send:function(v,y){var x,S=a.xhr();if(S.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(x in a.xhrFields)S[x]=a.xhrFields[x];a.mimeType&&S.overrideMimeType&&S.overrideMimeType(a.mimeType),!a.crossDomain&&!v["X-Requested-With"]&&(v["X-Requested-With"]="XMLHttpRequest");for(x in v)S.setRequestHeader(x,v[x]);f=function(R){return function(){f&&(f=p=S.onload=S.onerror=S.onabort=S.ontimeout=S.onreadystatechange=null,R==="abort"?S.abort():R==="error"?typeof S.status!="number"?y(0,"error"):y(S.status,S.statusText):y(Hd[S.status]||S.status,S.statusText,(S.responseType||"text")!=="text"||typeof S.responseText!="string"?{binary:S.response}:{text:S.responseText},S.getAllResponseHeaders()))}},S.onload=f(),p=S.onerror=S.ontimeout=f("error"),S.onabort!==void 0?S.onabort=p:S.onreadystatechange=function(){S.readyState===4&&e.setTimeout(function(){f&&p()})},f=f("abort");try{S.send(a.hasContent&&a.data||null)}catch(R){if(f)throw R}},abort:function(){f&&f()}}}),c.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return c.globalEval(a),a}}}),c.ajaxPrefilter("script",function(a){a.cache===void 0&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),c.ajaxTransport("script",function(a){if(a.crossDomain||a.scriptAttrs){var f,p;return{send:function(v,y){f=c("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",p=function(x){f.remove(),p=null,x&&y(x.type==="error"?404:200,x.type)}),L.head.appendChild(f[0])},abort:function(){p&&p()}}}});var Du=[],ro=/(=)\?(?=&|$)|\?\?/;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Du.pop()||c.expando+"_"+_u.guid++;return this[a]=!0,a}}),c.ajaxPrefilter("json jsonp",function(a,f,p){var v,y,x,S=a.jsonp!==!1&&(ro.test(a.url)?"url":typeof a.data=="string"&&(a.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ro.test(a.data)&&"data");if(S||a.dataTypes[0]==="jsonp")return v=a.jsonpCallback=E(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,S?a[S]=a[S].replace(ro,"$1"+v):a.jsonp!==!1&&(a.url+=(Ks.test(a.url)?"&":"?")+a.jsonp+"="+v),a.converters["script json"]=function(){return x||c.error(v+" was not called"),x[0]},a.dataTypes[0]="json",y=e[v],e[v]=function(){x=arguments},p.always(function(){y===void 0?c(e).removeProp(v):e[v]=y,a[v]&&(a.jsonpCallback=f.jsonpCallback,Du.push(v)),x&&E(y)&&y(x[0]),x=y=void 0}),"script"}),A.createHTMLDocument=function(){var a=L.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",a.childNodes.length===2}(),c.parseHTML=function(a,f,p){if(typeof a!="string")return[];typeof f=="boolean"&&(p=f,f=!1);var v,y,x;return f||(A.createHTMLDocument?(f=L.implementation.createHTMLDocument(""),v=f.createElement("base"),v.href=L.location.href,f.head.appendChild(v)):f=L),y=ee.exec(a),x=!p&&[],y?[f.createElement(y[1])]:(y=hu([a],f,x),x&&x.length&&c(x).remove(),c.merge([],y.childNodes))},c.fn.load=function(a,f,p){var v,y,x,S=this,R=a.indexOf(" ");return R>-1&&(v=Zn(a.slice(R)),a=a.slice(0,R)),E(f)?(p=f,f=void 0):f&&typeof f=="object"&&(y="POST"),S.length>0&&c.ajax({url:a,type:y||"GET",dataType:"html",data:f}).done(function(k){x=arguments,S.html(v?c("<div>").append(c.parseHTML(k)).find(v):k)}).always(p&&function(k,z){S.each(function(){p.apply(this,x||[k.responseText,z,k])})}),this},c.expr.pseudos.animated=function(a){return c.grep(c.timers,function(f){return a===f.elem}).length},c.offset={setOffset:function(a,f,p){var v,y,x,S,R,k,z,tt=c.css(a,"position"),at=c(a),Z={};tt==="static"&&(a.style.position="relative"),R=at.offset(),x=c.css(a,"top"),k=c.css(a,"left"),z=(tt==="absolute"||tt==="fixed")&&(x+k).indexOf("auto")>-1,z?(v=at.position(),S=v.top,y=v.left):(S=parseFloat(x)||0,y=parseFloat(k)||0),E(f)&&(f=f.call(a,p,c.extend({},R))),f.top!=null&&(Z.top=f.top-R.top+S),f.left!=null&&(Z.left=f.left-R.left+y),"using"in f?f.using.call(a,Z):at.css(Z)}},c.fn.extend({offset:function(a){if(arguments.length)return a===void 0?this:this.each(function(y){c.offset.setOffset(this,a,y)});var f,p,v=this[0];if(v)return v.getClientRects().length?(f=v.getBoundingClientRect(),p=v.ownerDocument.defaultView,{top:f.top+p.pageYOffset,left:f.left+p.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var a,f,p,v=this[0],y={top:0,left:0};if(c.css(v,"position")==="fixed")f=v.getBoundingClientRect();else{for(f=this.offset(),p=v.ownerDocument,a=v.offsetParent||p.documentElement;a&&(a===p.body||a===p.documentElement)&&c.css(a,"position")==="static";)a=a.parentNode;a&&a!==v&&a.nodeType===1&&(y=c(a).offset(),y.top+=c.css(a,"borderTopWidth",!0),y.left+=c.css(a,"borderLeftWidth",!0))}return{top:f.top-y.top-c.css(v,"marginTop",!0),left:f.left-y.left-c.css(v,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&c.css(a,"position")==="static";)a=a.offsetParent;return a||sn})}}),c.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,f){var p=f==="pageYOffset";c.fn[a]=function(v){return J(this,function(y,x,S){var R;if(N(y)?R=y:y.nodeType===9&&(R=y.defaultView),S===void 0)return R?R[f]:y[x];R?R.scrollTo(p?R.pageXOffset:S,p?S:R.pageYOffset):y[x]=S},a,v,arguments.length)}}),c.each(["top","left"],function(a,f){c.cssHooks[f]=yu(A.pixelPosition,function(p,v){if(v)return v=Yr(p,f),Ws.test(v)?c(p).position()[f]+"px":v})}),c.each({Height:"height",Width:"width"},function(a,f){c.each({padding:"inner"+a,content:f,"":"outer"+a},function(p,v){c.fn[v]=function(y,x){var S=arguments.length&&(p||typeof y!="boolean"),R=p||(y===!0||x===!0?"margin":"border");return J(this,function(k,z,tt){var at;return N(k)?v.indexOf("outer")===0?k["inner"+a]:k.document.documentElement["client"+a]:k.nodeType===9?(at=k.documentElement,Math.max(k.body["scroll"+a],at["scroll"+a],k.body["offset"+a],at["offset"+a],at["client"+a])):tt===void 0?c.css(k,z,R):c.style(k,z,tt,R)},f,S?y:void 0,S)}})}),c.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,f){c.fn[f]=function(p){return this.on(f,p)}}),c.fn.extend({bind:function(a,f,p){return this.on(a,null,f,p)},unbind:function(a,f){return this.off(a,null,f)},delegate:function(a,f,p,v){return this.on(f,a,p,v)},undelegate:function(a,f,p){return arguments.length===1?this.off(a,"**"):this.off(f,a||"**",p)},hover:function(a,f){return this.on("mouseenter",a).on("mouseleave",f||a)}}),c.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,f){c.fn[f]=function(p,v){return arguments.length>0?this.on(f,null,p,v):this.trigger(f)}});var qd=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;c.proxy=function(a,f){var p,v,y;if(typeof f=="string"&&(p=a[f],f=a,a=p),!!E(a))return v=s.call(arguments,2),y=function(){return a.apply(f||this,v.concat(s.call(arguments)))},y.guid=a.guid=a.guid||c.guid++,y},c.holdReady=function(a){a?c.readyWait++:c.ready(!0)},c.isArray=Array.isArray,c.parseJSON=JSON.parse,c.nodeName=T,c.isFunction=E,c.isWindow=N,c.camelCase=jt,c.type=j,c.now=Date.now,c.isNumeric=function(a){var f=c.type(a);return(f==="number"||f==="string")&&!isNaN(a-parseFloat(a))},c.trim=function(a){return a==null?"":(a+"").replace(qd,"$1")};var Gd=e.jQuery,Ud=e.$;return c.noConflict=function(a){return e.$===c&&(e.$=Ud),a&&e.jQuery===c&&(e.jQuery=Gd),c},typeof n>"u"&&(e.jQuery=e.$=c),c})})(Zf);var Jf=Zf.exports;const Wt=wl(Jf);(function(t){(function(e){var n=typeof self=="object"&&self.self===self&&self||typeof ri=="object"&&ri.global===ri&&ri;{var r=Zg,i;try{i=Jf}catch{}e(n,t,r,i)}})(function(e,n,r,i){var s=e.Backbone,o=Array.prototype.slice;n.VERSION="1.4.1",n.$=i,n.noConflict=function(){return e.Backbone=s,this},n.emulateHTTP=!1,n.emulateJSON=!1;var u=n.Events={},l=/\s+/,d,g=function(m,C,M,I,J){var et=0,mt;if(M&&typeof M=="object")for(I!==void 0&&("context"in J)&&J.context===void 0&&(J.context=I),mt=r.keys(M);et<mt.length;et++)C=g(m,C,mt[et],M[mt[et]],J);else if(M&&l.test(M))for(mt=M.split(l);et<mt.length;et++)C=m(C,mt[et],I,J);else C=m(C,M,I,J);return C};u.on=function(m,C,M){if(this._events=g(h,this._events||{},m,C,{context:M,ctx:this,listening:d}),d){var I=this._listeners||(this._listeners={});I[d.id]=d,d.interop=!1}return this},u.listenTo=function(m,C,M){if(!m)return this;var I=m._listenId||(m._listenId=r.uniqueId("l")),J=this._listeningTo||(this._listeningTo={}),et=d=J[I];et||(this._listenId||(this._listenId=r.uniqueId("l")),et=d=J[I]=new L(this,m));var mt=b(m,C,M,this);if(d=void 0,mt)throw mt;return et.interop&&et.on(C,M),this};var h=function(m,C,M,I){if(M){var J=m[C]||(m[C]=[]),et=I.context,mt=I.ctx,Dt=I.listening;Dt&&Dt.count++,J.push({callback:M,context:et,ctx:et||mt,listening:Dt})}return m},b=function(m,C,M,I){try{m.on(C,M,I)}catch(J){return J}};u.off=function(m,C,M){return this._events?(this._events=g(P,this._events,m,C,{context:M,listeners:this._listeners}),this):this},u.stopListening=function(m,C,M){var I=this._listeningTo;if(!I)return this;for(var J=m?[m._listenId]:r.keys(I),et=0;et<J.length;et++){var mt=I[J[et]];if(!mt)break;mt.obj.off(C,M,this),mt.interop&&mt.off(C,M)}return r.isEmpty(I)&&(this._listeningTo=void 0),this};var P=function(m,C,M,I){if(m){var J=I.context,et=I.listeners,mt=0,Dt;if(!C&&!J&&!M){for(Dt=r.keys(et);mt<Dt.length;mt++)et[Dt[mt]].cleanup();return}for(Dt=C?[C]:r.keys(m);mt<Dt.length;mt++){C=Dt[mt];var jt=m[C];if(!jt)break;for(var ce=[],se=0;se<jt.length;se++){var dt=jt[se];if(M&&M!==dt.callback&&M!==dt.callback._callback||J&&J!==dt.context)ce.push(dt);else{var Ft=dt.listening;Ft&&Ft.off(C,M)}}ce.length?m[C]=ce:delete m[C]}return m}};u.once=function(m,C,M){var I=g(A,{},m,C,this.off.bind(this));return typeof m=="string"&&M==null&&(C=void 0),this.on(I,C,M)},u.listenToOnce=function(m,C,M){var I=g(A,{},C,M,this.stopListening.bind(this,m));return this.listenTo(m,I)};var A=function(m,C,M,I){if(M){var J=m[C]=r.once(function(){I(C,J),M.apply(this,arguments)});J._callback=M}return m};u.trigger=function(m){if(!this._events)return this;for(var C=Math.max(0,arguments.length-1),M=Array(C),I=0;I<C;I++)M[I]=arguments[I+1];return g(E,this._events,m,void 0,M),this};var E=function(m,C,M,I){if(m){var J=m[C],et=m.all;J&&et&&(et=et.slice()),J&&N(J,I),et&&N(et,[C].concat(I))}return m},N=function(m,C){var M,I=-1,J=m.length,et=C[0],mt=C[1],Dt=C[2];switch(C.length){case 0:for(;++I<J;)(M=m[I]).callback.call(M.ctx);return;case 1:for(;++I<J;)(M=m[I]).callback.call(M.ctx,et);return;case 2:for(;++I<J;)(M=m[I]).callback.call(M.ctx,et,mt);return;case 3:for(;++I<J;)(M=m[I]).callback.call(M.ctx,et,mt,Dt);return;default:for(;++I<J;)(M=m[I]).callback.apply(M.ctx,C);return}},L=function(m,C){this.id=m._listenId,this.listener=m,this.obj=C,this.interop=!0,this.count=0,this._events=void 0};L.prototype.on=u.on,L.prototype.off=function(m,C){var M;this.interop?(this._events=g(P,this._events,m,C,{context:void 0,listeners:void 0}),M=!this._events):(this.count--,M=this.count===0),M&&this.cleanup()},L.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},u.bind=u.on,u.unbind=u.off,r.extend(n,u);var $=n.Model=function(m,C){var M=m||{};C||(C={}),this.preinitialize.apply(this,arguments),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},C.collection&&(this.collection=C.collection),C.parse&&(M=this.parse(M,C)||{});var I=r.result(this,"defaults");M=r.defaults(r.extend({},I,M),I),this.set(M,C),this.changed={},this.initialize.apply(this,arguments)};r.extend($.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(m){return r.clone(this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(m){return this.attributes[m]},escape:function(m){return r.escape(this.get(m))},has:function(m){return this.get(m)!=null},matches:function(m){return!!r.iteratee(m,this)(this.attributes)},set:function(m,C,M){if(m==null)return this;var I;if(typeof m=="object"?(I=m,M=C):(I={})[m]=C,M||(M={}),!this._validate(I,M))return!1;var J=M.unset,et=M.silent,mt=[],Dt=this._changing;this._changing=!0,Dt||(this._previousAttributes=r.clone(this.attributes),this.changed={});var jt=this.attributes,ce=this.changed,se=this._previousAttributes;for(var dt in I)C=I[dt],r.isEqual(jt[dt],C)||mt.push(dt),r.isEqual(se[dt],C)?delete ce[dt]:ce[dt]=C,J?delete jt[dt]:jt[dt]=C;if(this.idAttribute in I){var Ft=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Ft,M)}if(!et){mt.length&&(this._pending=M);for(var Kt=0;Kt<mt.length;Kt++)this.trigger("change:"+mt[Kt],this,jt[mt[Kt]],M)}if(Dt)return this;if(!et)for(;this._pending;)M=this._pending,this._pending=!1,this.trigger("change",this,M);return this._pending=!1,this._changing=!1,this},unset:function(m,C){return this.set(m,void 0,r.extend({},C,{unset:!0}))},clear:function(m){var C={};for(var M in this.attributes)C[M]=void 0;return this.set(C,r.extend({},m,{unset:!0}))},hasChanged:function(m){return m==null?!r.isEmpty(this.changed):r.has(this.changed,m)},changedAttributes:function(m){if(!m)return this.hasChanged()?r.clone(this.changed):!1;var C=this._changing?this._previousAttributes:this.attributes,M={},I;for(var J in m){var et=m[J];r.isEqual(C[J],et)||(M[J]=et,I=!0)}return I?M:!1},previous:function(m){return m==null||!this._previousAttributes?null:this._previousAttributes[m]},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(m){m=r.extend({parse:!0},m);var C=this,M=m.success;return m.success=function(I){var J=m.parse?C.parse(I,m):I;if(!C.set(J,m))return!1;M&&M.call(m.context,C,I,m),C.trigger("sync",C,I,m)},Mt(this,m),this.sync("read",this,m)},save:function(m,C,M){var I;m==null||typeof m=="object"?(I=m,M=C):(I={})[m]=C,M=r.extend({validate:!0,parse:!0},M);var J=M.wait;if(I&&!J){if(!this.set(I,M))return!1}else if(!this._validate(I,M))return!1;var et=this,mt=M.success,Dt=this.attributes;M.success=function(se){et.attributes=Dt;var dt=M.parse?et.parse(se,M):se;if(J&&(dt=r.extend({},I,dt)),dt&&!et.set(dt,M))return!1;mt&&mt.call(M.context,et,se,M),et.trigger("sync",et,se,M)},Mt(this,M),I&&J&&(this.attributes=r.extend({},Dt,I));var jt=this.isNew()?"create":M.patch?"patch":"update";jt==="patch"&&!M.attrs&&(M.attrs=I);var ce=this.sync(jt,this,M);return this.attributes=Dt,ce},destroy:function(m){m=m?r.clone(m):{};var C=this,M=m.success,I=m.wait,J=function(){C.stopListening(),C.trigger("destroy",C,C.collection,m)};m.success=function(mt){I&&J(),M&&M.call(m.context,C,mt,m),C.isNew()||C.trigger("sync",C,mt,m)};var et=!1;return this.isNew()?r.defer(m.success):(Mt(this,m),et=this.sync("delete",this,m)),I||J(),et},url:function(){var m=r.result(this,"urlRoot")||r.result(this.collection,"url")||Xt();if(this.isNew())return m;var C=this.get(this.idAttribute);return m.replace(/[^\/]$/,"$&/")+encodeURIComponent(C)},parse:function(m,C){return m},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(m){return this._validate({},r.extend({},m,{validate:!0}))},_validate:function(m,C){if(!C.validate||!this.validate)return!0;m=r.extend({},this.attributes,m);var M=this.validationError=this.validate(m,C)||null;return M?(this.trigger("invalid",this,M,r.extend(C,{validationError:M})),!1):!0}});var Y=n.Collection=function(m,C){C||(C={}),this.preinitialize.apply(this,arguments),C.model&&(this.model=C.model),C.comparator!==void 0&&(this.comparator=C.comparator),this._reset(),this.initialize.apply(this,arguments),m&&this.reset(m,r.extend({silent:!0},C))},j={add:!0,remove:!0,merge:!0},nt={add:!0,remove:!1},ut=function(m,C,M){M=Math.min(Math.max(M,0),m.length);var I=Array(m.length-M),J=C.length,et;for(et=0;et<I.length;et++)I[et]=m[et+M];for(et=0;et<J;et++)m[et+M]=C[et];for(et=0;et<I.length;et++)m[et+J+M]=I[et]};r.extend(Y.prototype,u,{model:$,preinitialize:function(){},initialize:function(){},toJSON:function(m){return this.map(function(C){return C.toJSON(m)})},sync:function(){return n.sync.apply(this,arguments)},add:function(m,C){return this.set(m,r.extend({merge:!1},C,nt))},remove:function(m,C){C=r.extend({},C);var M=!r.isArray(m);m=M?[m]:m.slice();var I=this._removeModels(m,C);return!C.silent&&I.length&&(C.changes={added:[],merged:[],removed:I},this.trigger("update",this,C)),M?I[0]:I},set:function(m,C){if(m!=null){C=r.extend({},j,C),C.parse&&!this._isModel(m)&&(m=this.parse(m,C)||[]);var M=!r.isArray(m);m=M?[m]:m.slice();var I=C.at;I!=null&&(I=+I),I>this.length&&(I=this.length),I<0&&(I+=this.length+1);var J=[],et=[],mt=[],Dt=[],jt={},ce=C.add,se=C.merge,dt=C.remove,Ft=!1,Kt=this.comparator&&I==null&&C.sort!==!1,jn=r.isString(this.comparator)?this.comparator:null,le,ve;for(ve=0;ve<m.length;ve++){le=m[ve];var _e=this.get(le);if(_e){if(se&&le!==_e){var rn=this._isModel(le)?le.attributes:le;C.parse&&(rn=_e.parse(rn,C)),_e.set(rn,C),mt.push(_e),Kt&&!Ft&&(Ft=_e.hasChanged(jn))}jt[_e.cid]||(jt[_e.cid]=!0,J.push(_e)),m[ve]=_e}else ce&&(le=m[ve]=this._prepareModel(le,C),le&&(et.push(le),this._addReference(le,C),jt[le.cid]=!0,J.push(le)))}if(dt){for(ve=0;ve<this.length;ve++)le=this.models[ve],jt[le.cid]||Dt.push(le);Dt.length&&this._removeModels(Dt,C)}var De=!1,sn=!Kt&&ce&&dt;if(J.length&&sn?(De=this.length!==J.length||r.some(this.models,function(gn,gr){return gn!==J[gr]}),this.models.length=0,ut(this.models,J,0),this.length=this.models.length):et.length&&(Kt&&(Ft=!0),ut(this.models,et,I??this.length),this.length=this.models.length),Ft&&this.sort({silent:!0}),!C.silent){for(ve=0;ve<et.length;ve++)I!=null&&(C.index=I+ve),le=et[ve],le.trigger("add",le,this,C);(Ft||De)&&this.trigger("sort",this,C),(et.length||Dt.length||mt.length)&&(C.changes={added:et,removed:Dt,merged:mt},this.trigger("update",this,C))}return M?m[0]:m}},reset:function(m,C){C=C?r.clone(C):{};for(var M=0;M<this.models.length;M++)this._removeReference(this.models[M],C);return C.previousModels=this.models,this._reset(),m=this.add(m,r.extend({silent:!0},C)),C.silent||this.trigger("reset",this,C),m},push:function(m,C){return this.add(m,r.extend({at:this.length},C))},pop:function(m){var C=this.at(this.length-1);return this.remove(C,m)},unshift:function(m,C){return this.add(m,r.extend({at:0},C))},shift:function(m){var C=this.at(0);return this.remove(C,m)},slice:function(){return o.apply(this.models,arguments)},get:function(m){if(m!=null)return this._byId[m]||this._byId[this.modelId(this._isModel(m)?m.attributes:m,m.idAttribute)]||m.cid&&this._byId[m.cid]},has:function(m){return this.get(m)!=null},at:function(m){return m<0&&(m+=this.length),this.models[m]},where:function(m,C){return this[C?"find":"filter"](m)},findWhere:function(m){return this.where(m,!0)},sort:function(m){var C=this.comparator;if(!C)throw new Error("Cannot sort a set without a comparator");m||(m={});var M=C.length;return r.isFunction(C)&&(C=C.bind(this)),M===1||r.isString(C)?this.models=this.sortBy(C):this.models.sort(C),m.silent||this.trigger("sort",this,m),this},pluck:function(m){return this.map(m+"")},fetch:function(m){m=r.extend({parse:!0},m);var C=m.success,M=this;return m.success=function(I){var J=m.reset?"reset":"set";M[J](I,m),C&&C.call(m.context,M,I,m),M.trigger("sync",M,I,m)},Mt(this,m),this.sync("read",this,m)},create:function(m,C){C=C?r.clone(C):{};var M=C.wait;if(m=this._prepareModel(m,C),!m)return!1;M||this.add(m,C);var I=this,J=C.success;return C.success=function(et,mt,Dt){M&&I.add(et,Dt),J&&J.call(Dt.context,et,mt,Dt)},m.save(null,C),m},parse:function(m,C){return m},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(m,C){return m[C||this.model.prototype.idAttribute||"id"]},values:function(){return new w(this,T)},keys:function(){return new w(this,_)},entries:function(){return new w(this,F)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(m,C){if(this._isModel(m))return m.collection||(m.collection=this),m;C=C?r.clone(C):{},C.collection=this;var M;return this.model.prototype?M=new this.model(m,C):M=this.model(m,C),M.validationError?(this.trigger("invalid",this,M.validationError,C),!1):M},_removeModels:function(m,C){for(var M=[],I=0;I<m.length;I++){var J=this.get(m[I]);if(J){var et=this.indexOf(J);this.models.splice(et,1),this.length--,delete this._byId[J.cid];var mt=this.modelId(J.attributes,J.idAttribute);mt!=null&&delete this._byId[mt],C.silent||(C.index=et,J.trigger("remove",J,this,C)),M.push(J),this._removeReference(J,C)}}return M},_isModel:function(m){return m instanceof $},_addReference:function(m,C){this._byId[m.cid]=m;var M=this.modelId(m.attributes,m.idAttribute);M!=null&&(this._byId[M]=m),m.on("all",this._onModelEvent,this)},_removeReference:function(m,C){delete this._byId[m.cid];var M=this.modelId(m.attributes,m.idAttribute);M!=null&&delete this._byId[M],this===m.collection&&delete m.collection,m.off("all",this._onModelEvent,this)},_onModelEvent:function(m,C,M,I){if(C){if((m==="add"||m==="remove")&&M!==this)return;if(m==="destroy"&&this.remove(C,I),m==="changeId"){var J=this.modelId(C.previousAttributes(),C.idAttribute),et=this.modelId(C.attributes,C.idAttribute);J!=null&&delete this._byId[J],et!=null&&(this._byId[et]=C)}}this.trigger.apply(this,arguments)}});var c=typeof Symbol=="function"&&Symbol.iterator;c&&(Y.prototype[c]=Y.prototype.values);var w=function(m,C){this._collection=m,this._kind=C,this._index=0},T=1,_=2,F=3;c&&(w.prototype[c]=function(){return this}),w.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var m=this._collection.at(this._index);this._index++;var C;if(this._kind===T)C=m;else{var M=this._collection.modelId(m.attributes,m.idAttribute);this._kind===_?C=M:C=[M,m]}return{value:C,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var H=n.View=function(m){this.cid=r.uniqueId("view"),this.preinitialize.apply(this,arguments),r.extend(this,r.pick(m,ot)),this._ensureElement(),this.initialize.apply(this,arguments)},V=/^(\S+)\s*(.*)$/,ot=["model","collection","el","id","attributes","className","tagName","events"];r.extend(H.prototype,u,{tagName:"div",$:function(m){return this.$el.find(m)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(m){return this.undelegateEvents(),this._setElement(m),this.delegateEvents(),this},_setElement:function(m){this.$el=m instanceof n.$?m:n.$(m),this.el=this.$el[0]},delegateEvents:function(m){if(m||(m=r.result(this,"events")),!m)return this;this.undelegateEvents();for(var C in m){var M=m[C];if(r.isFunction(M)||(M=this[M]),!!M){var I=C.match(V);this.delegate(I[1],I[2],M.bind(this))}}return this},delegate:function(m,C,M){return this.$el.on(m+".delegateEvents"+this.cid,C,M),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(m,C,M){return this.$el.off(m+".delegateEvents"+this.cid,C,M),this},_createElement:function(m){return document.createElement(m)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var m=r.extend({},r.result(this,"attributes"));this.id&&(m.id=r.result(this,"id")),this.className&&(m.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(m)}},_setAttributes:function(m){this.$el.attr(m)}});var ht=function(m,C,M,I){switch(C){case 1:return function(){return m[M](this[I])};case 2:return function(J){return m[M](this[I],J)};case 3:return function(J,et){return m[M](this[I],G(J,this),et)};case 4:return function(J,et,mt){return m[M](this[I],G(J,this),et,mt)};default:return function(){var J=o.call(arguments);return J.unshift(this[I]),m[M].apply(m,J)}}},q=function(m,C,M,I){r.each(M,function(J,et){C[et]&&(m.prototype[et]=ht(C,J,et,I))})},G=function(m,C){return r.isFunction(m)?m:r.isObject(m)&&!C._isModel(m)?X(m):r.isString(m)?function(M){return M.get(m)}:m},X=function(m){var C=r.matches(m);return function(M){return C(M.attributes)}},U={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Ct={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r.each([[Y,U,"models"],[$,Ct,"attributes"]],function(m){var C=m[0],M=m[1],I=m[2];C.mixin=function(J){var et=r.reduce(r.functions(J),function(mt,Dt){return mt[Dt]=0,mt},{});q(C,J,et,I)},q(C,r,M,I)}),n.sync=function(m,C,M){var I=St[m];r.defaults(M||(M={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var J={type:I,dataType:"json"};if(M.url||(J.url=r.result(C,"url")||Xt()),M.data==null&&C&&(m==="create"||m==="update"||m==="patch")&&(J.contentType="application/json",J.data=JSON.stringify(M.attrs||C.toJSON(M))),M.emulateJSON&&(J.contentType="application/x-www-form-urlencoded",J.data=J.data?{model:J.data}:{}),M.emulateHTTP&&(I==="PUT"||I==="DELETE"||I==="PATCH")){J.type="POST",M.emulateJSON&&(J.data._method=I);var et=M.beforeSend;M.beforeSend=function(jt){if(jt.setRequestHeader("X-HTTP-Method-Override",I),et)return et.apply(this,arguments)}}J.type!=="GET"&&!M.emulateJSON&&(J.processData=!1);var mt=M.error;M.error=function(jt,ce,se){M.textStatus=ce,M.errorThrown=se,mt&&mt.call(M.context,jt,ce,se)};var Dt=M.xhr=n.ajax(r.extend(J,M));return C.trigger("request",C,Dt,M),Dt};var St={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var ee=n.Router=function(m){m||(m={}),this.preinitialize.apply(this,arguments),m.routes&&(this.routes=m.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},re=/\((.*?)\)/g,bt=/(\(\?)?:\w+/g,Tt=/\*\w+/g,it=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(ee.prototype,u,{preinitialize:function(){},initialize:function(){},route:function(m,C,M){r.isRegExp(m)||(m=this._routeToRegExp(m)),r.isFunction(C)&&(M=C,C=""),M||(M=this[C]);var I=this;return n.history.route(m,function(J){var et=I._extractParameters(m,J);I.execute(M,et,C)!==!1&&(I.trigger.apply(I,["route:"+C].concat(et)),I.trigger("route",C,et),n.history.trigger("route",I,C,et))}),this},execute:function(m,C,M){m&&m.apply(this,C)},navigate:function(m,C){return n.history.navigate(m,C),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var m,C=r.keys(this.routes);(m=C.pop())!=null;)this.route(m,this.routes[m])}},_routeToRegExp:function(m){return m=m.replace(it,"\\$&").replace(re,"(?:$1)?").replace(bt,function(C,M){return M?C:"([^/?]+)"}).replace(Tt,"([^?]*?)"),new RegExp("^"+m+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(m,C){var M=m.exec(C).slice(1);return r.map(M,function(I,J){return J===M.length-1?I||null:I?decodeURIComponent(I):null})}});var Q=n.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},ft=/^[#\/]|\s+$/g,$t=/^\/+|\/+$/g,kt=/#.*$/;Q.started=!1,r.extend(Q.prototype,u,{interval:50,atRoot:function(){var m=this.location.pathname.replace(/[^\/]$/,"$&/");return m===this.root&&!this.getSearch()},matchRoot:function(){var m=this.decodeFragment(this.location.pathname),C=m.slice(0,this.root.length-1)+"/";return C===this.root},decodeFragment:function(m){return decodeURI(m.replace(/%25/g,"%2525"))},getSearch:function(){var m=this.location.href.replace(/#.*/,"").match(/\?.+/);return m?m[0]:""},getHash:function(m){var C=(m||this).location.href.match(/#(.*)$/);return C?C[1]:""},getPath:function(){var m=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return m.charAt(0)==="/"?m.slice(1):m},getFragment:function(m){return m==null&&(this._usePushState||!this._wantsHashChange?m=this.getPath():m=this.getHash()),m.replace(ft,"")},start:function(m){if(Q.started)throw new Error("Backbone.history has already been started");if(Q.started=!0,this.options=r.extend({root:"/"},this.options,m),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace($t,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var C=this.root.slice(0,-1)||"/";return this.location.replace(C+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var M=document.body,I=M.insertBefore(this.iframe,M.firstChild).contentWindow;I.document.open(),I.document.close(),I.location.hash="#"+this.fragment}var J=window.addEventListener||function(et,mt){return attachEvent("on"+et,mt)};if(this._usePushState?J("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?J("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var m=window.removeEventListener||function(C,M){return detachEvent("on"+C,M)};this._usePushState?m("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&m("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Q.started=!1},route:function(m,C){this.handlers.unshift({route:m,callback:C})},checkUrl:function(m){var C=this.getFragment();if(C===this.fragment&&this.iframe&&(C=this.getHash(this.iframe.contentWindow)),C===this.fragment)return!1;this.iframe&&this.navigate(C),this.loadUrl()},loadUrl:function(m){return this.matchRoot()?(m=this.fragment=this.getFragment(m),r.some(this.handlers,function(C){if(C.route.test(m))return C.callback(m),!0})):!1},navigate:function(m,C){if(!Q.started)return!1;(!C||C===!0)&&(C={trigger:!!C}),m=this.getFragment(m||"");var M=this.root;(m===""||m.charAt(0)==="?")&&(M=M.slice(0,-1)||"/");var I=M+m;m=m.replace(kt,"");var J=this.decodeFragment(m);if(this.fragment!==J){if(this.fragment=J,this._usePushState)this.history[C.replace?"replaceState":"pushState"]({},document.title,I);else if(this._wantsHashChange){if(this._updateHash(this.location,m,C.replace),this.iframe&&m!==this.getHash(this.iframe.contentWindow)){var et=this.iframe.contentWindow;C.replace||(et.document.open(),et.document.close()),this._updateHash(et.location,m,C.replace)}}else return this.location.assign(I);if(C.trigger)return this.loadUrl(m)}},_updateHash:function(m,C,M){if(M){var I=m.href.replace(/(javascript:|#).*$/,"");m.replace(I+"#"+C)}else m.hash="#"+C}}),n.history=new Q;var _t=function(m,C){var M=this,I;return m&&r.has(m,"constructor")?I=m.constructor:I=function(){return M.apply(this,arguments)},r.extend(I,M,C),I.prototype=r.create(M.prototype,m),I.prototype.constructor=I,I.__super__=M.prototype,I};$.extend=Y.extend=ee.extend=H.extend=Q.extend=_t;var Xt=function(){throw new Error('A "url" property or function must be specified')},Mt=function(m,C){var M=C.error;C.error=function(I){M&&M.call(C.context,m,I,C),m.trigger("error",m,I,C)}};return n})})(Al);const Se=wl(Al),rt=function(){var t=typeof window=="object"&&!!window.SVGAngle;if(!t)return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},n="1.1",r=Math,i=r.PI,s=r.atan2,o=r.sqrt,u=r.min,l=r.max,d=r.cos,g=r.sin,h=function(c,w,T){if(!(this instanceof h))return h.apply(Object.create(h.prototype),arguments);if(c){if(h.isV(c)&&(c=c.node),w=w||{},h.isString(c)){if(c=c.trim(),c.toLowerCase()==="svg")c=h.createSvgDocument();else if(c[0]==="<"){var _=h.createSvgDocument(c);if(_.childNodes.length>1){var F=[],H,V;for(H=0,V=_.childNodes.length;H<V;H++){var ot=_.childNodes[H];F.push(new h(document.importNode(ot,!0)))}return F}c=document.importNode(_.firstChild,!0)}else c=document.createElementNS(e.svg,c);h.ensureId(c)}return this.node=c,this.setAttributes(w),T&&this.append(T),this}},b=h.prototype;Object.defineProperty(b,"id",{enumerable:!0,get:function(){return this.node.id},set:function(c){this.node.id=c}}),b.getTransformToElement=function(c){var w=this.node;if(h.isSVGGraphicsElement(c)&&h.isSVGGraphicsElement(w)){var T=h.toNode(c).getScreenCTM(),_=w.getScreenCTM();if(T&&_)return T.inverse().multiply(_)}return h.createSVGMatrix()},b.transform=function(c,w){var T=this.node;if(h.isUndefined(c))return h.transformStringToMatrix(this.attr("transform"));if(w&&w.absolute)return this.attr("transform",h.matrixToTransformString(c));var _=h.createSVGTransform(c);return T.transform.baseVal.appendItem(_),this},b.translate=function(c,w,T){T=T||{},w=w||0;var _=this.attr("transform")||"",F=h.parseTransformString(_);if(_=F.value,h.isUndefined(c))return F.translate;_=_.replace(/translate\([^)]*\)/g,"").trim();var H=T.absolute?c:F.translate.tx+c,V=T.absolute?w:F.translate.ty+w,ot="translate("+H+","+V+")";return this.attr("transform",(ot+" "+_).trim()),this},b.rotate=function(c,w,T,_){_=_||{};var F=this.attr("transform")||"",H=h.parseTransformString(F);if(F=H.value,h.isUndefined(c))return H.rotate;F=F.replace(/rotate\([^)]*\)/g,"").trim(),c%=360;var V=_.absolute?c:H.rotate.angle+c,ot=w!==void 0&&T!==void 0?","+w+","+T:"",ht="rotate("+V+ot+")";return this.attr("transform",(F+" "+ht).trim()),this},b.scale=function(c,w){w=h.isUndefined(w)?c:w;var T=this.attr("transform")||"",_=h.parseTransformString(T);if(T=_.value,h.isUndefined(c))return _.scale;T=T.replace(/scale\([^)]*\)/g,"").trim();var F="scale("+c+","+w+")";return this.attr("transform",(T+" "+F).trim()),this},b.bbox=function(c,w){var T,_=this.node,F=_.ownerSVGElement;if(!F)return new pt(0,0,0,0);try{T=_.getBBox()}catch{T={x:_.clientLeft,y:_.clientTop,width:_.clientWidth,height:_.clientHeight}}if(c)return new pt(T);var H=this.getTransformToElement(w||F);return h.transformRect(T,H)},b.getBBox=function(c){var w={},T,_=this.node,F=_.ownerSVGElement;if(!F||!h.isSVGGraphicsElement(_))return new pt(0,0,0,0);if(c&&(c.target&&(w.target=h.toNode(c.target)),c.recursive&&(w.recursive=c.recursive)),w.recursive){var V=this.children(),ot=V.length;if(ot===0)return this.getBBox({target:w.target,recursive:!1});w.target||(w.target=this);for(var ht=0;ht<ot;ht++){var q=V[ht],G;q.children().length===0?G=q.getBBox({target:w.target,recursive:!1}):G=q.getBBox({target:w.target,recursive:!0}),T?T=T.union(G):T=G}return T}else{try{T=_.getBBox()}catch{T={x:_.clientLeft,y:_.clientTop,width:_.clientWidth,height:_.clientHeight}}if(w.target){var H=this.getTransformToElement(w.target);return h.transformRect(T,H)}else return new pt(T)}};function P(c,w){c||(c={});var T=h("textPath"),_=c.d;if(_&&c["xlink:href"]===void 0){var F=h("path").attr("d",_).appendTo(w.defs());T.attr("xlink:href","#"+F.id)}return h.isObject(c)&&T.attr(c),T.node}function A(c,w,T){T||(T={});for(var _=T.includeAnnotationIndices,F=T.eol,H=T.lineHeight,V=T.baseSize,ot=0,ht={},q=w.length-1,G=0;G<=q;G++){var X=w[G],U=null;if(h.isObject(X)){var Ct=X.attrs,St=h("tspan",Ct),ee=St.node,re=X.t;F&&G===q&&(re+=F),ee.textContent=re;var bt=Ct.class;bt&&St.addClass(bt),_&&St.attr("annotations",X.annotations),U=parseFloat(Ct["font-size"]),isFinite(U)||(U=V),U&&U>ot&&(ot=U)}else F&&G===q&&(X+=F),ee=document.createTextNode(X||" "),V&&V>ot&&(ot=V);c.appendChild(ee)}return ot&&(ht.maxFontSize=ot),H?ht.lineHeight=H:ot&&(ht.lineHeight=ot*1.2),ht}var E=/em$/;function N(c,w){var T=parseFloat(c);return E.test(c)?T*w:T}function L(c,w,T,_){if(!Array.isArray(w))return 0;var F=w.length;if(!F)return 0;for(var H=w[0],V=N(H.maxFontSize,T)||T,ot=0,ht=N(_,T),q=1;q<F;q++){H=w[q];var G=N(H.lineHeight,T)||ht;ot+=G}var X=N(H.maxFontSize,T)||T,U;switch(c){case"middle":U=V/2-.15*X-ot/2;break;case"bottom":U=-(.25*X)-ot;break;default:case"top":U=.8*V;break}return U}b.text=function(c,w){if(c&&typeof c!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");c=h.sanitizeText(c),w||(w={});var T=w.displayEmpty,_=w.eol,F=w.textPath,H=w.textVerticalAnchor,V=H==="middle"||H==="bottom"||H==="top",ot=w.x;ot===void 0&&(ot=this.attr("x")||0);var ht=w.includeAnnotationIndices,q=w.annotations;q&&!h.isArray(q)&&(q=[q]);var G=w.lineHeight,X=G==="auto",U=X?"1.5em":G||"1em";this.empty(),this.attr({"xml:space":"preserve",display:c||T?null:"none"});var Ct=parseFloat(this.attr("font-size"));Ct||(Ct=16,(V||q)&&this.attr("font-size",Ct));var St=document,ee;F?(typeof F=="string"&&(F={d:F}),ee=P(F,this)):ee=St.createDocumentFragment();for(var re=0,bt=c.split(`
`),Tt=[],it,Q=0,ft=bt.length-1;Q<=ft;Q++){var $t=U,kt="v-line",_t=St.createElementNS(e.svg,"tspan"),Xt=bt[Q],Mt;if(Xt)if(q){var m=h.annotateString(Xt,q,{offset:-re,includeAnnotationIndices:ht});Mt=A(_t,m,{includeAnnotationIndices:ht,eol:Q!==ft&&_,lineHeight:X?null:U,baseSize:Ct});var C=Mt.lineHeight;C&&X&&Q!==0&&($t=C),Q===0&&(it=Mt.maxFontSize*.8)}else _&&Q!==ft&&(Xt+=_),_t.textContent=Xt;else{_t.textContent="-",kt+=" v-empty-line";var M=_t.style;if(M.fillOpacity=0,M.strokeOpacity=0,q){Mt={},m=h.findAnnotationsAtIndex(q,re);let J=Ct;for(let et=m.length;et>0;et--){const mt=m[et-1].attrs;if(!mt||!("font-size"in mt))continue;const Dt=parseFloat(mt["font-size"]);if(isFinite(Dt)){J=Dt;break}}X&&(Q>0?$t=J*1.2:it=J*.8),_t.setAttribute("font-size",J),Mt.maxFontSize=J}}Mt&&Tt.push(Mt),Q>0&&_t.setAttribute("dy",$t),(Q>0||F)&&_t.setAttribute("x",ot),_t.className.baseVal=kt,ee.appendChild(_t),re+=Xt.length+1}if(V)if(q)$t=L(H,Tt,Ct,U);else if(H==="top")$t="0.8em";else{var I;switch(ft>0?(I=parseFloat(U)||1,I*=ft,E.test(U)||(I/=Ct)):I=0,H){case"middle":$t=.3-I/2+"em";break;case"bottom":$t=-I-.3+"em";break}}else H===0?$t="0em":H?$t=H:($t=0,this.attr("y")===null&&this.attr("y",it||"0.8em"));return ee.firstChild.setAttribute("dy",$t),this.append(ee),this},b.removeAttr=function(c){const w=nt[c],{ns:T,local:_}=h.qualifyAttr(w),F=this.node;return T?F.hasAttributeNS(T,_)&&F.removeAttributeNS(T,_):F.hasAttribute(w)&&F.removeAttribute(w),this},b.attr=function(c,w){if(h.isUndefined(c)){for(var T=this.node.attributes,_={},F=0;F<T.length;F++)_[T[F].name]=T[F].value;return _}if(h.isString(c)&&h.isUndefined(w))return this.node.getAttribute(nt[c]);if(typeof c=="object")for(var H in c)c.hasOwnProperty(H)&&this.setAttribute(H,c[H]);else this.setAttribute(c,w);return this},b.normalizePath=function(){var c=this.tagName();return c==="PATH"&&this.attr("d",h.normalizePathData(this.attr("d"))),this},b.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},b.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},b.setAttributes=function(c){for(var w in c)c.hasOwnProperty(w)&&this.setAttribute(w,c[w]);return this},b.append=function(c){h.isArray(c)||(c=[c]);for(var w=0,T=c.length;w<T;w++)this.node.appendChild(h.toNode(c[w]));return this},b.prepend=function(c){var w=this.node.firstChild;return w?h(w).before(c):this.append(c)},b.before=function(c){var w=this.node,T=w.parentNode;if(T){h.isArray(c)||(c=[c]);for(var _=0,F=c.length;_<F;_++)T.insertBefore(h.toNode(c[_]),w)}return this},b.appendTo=function(c){return h.toNode(c).appendChild(this.node),this},b.svg=function(){return this.node instanceof window.SVGSVGElement?this:h(this.node.ownerSVGElement)},b.tagName=function(){return this.node.tagName.toUpperCase()},b.defs=function(){var c=this.svg()||this,w=c.node.getElementsByTagName("defs")[0];return w?h(w):h("defs").appendTo(c)},b.clone=function(){var c=h(this.node.cloneNode(!0));return c.node.id=h.uniqueId(),c},b.findOne=function(c){var w=this.node.querySelector(c);return w?h(w):void 0},b.find=function(c){var w=[],T=this.node.querySelectorAll(c);if(T)for(var _=0;_<T.length;_++)w.push(h(T[_]));return w},b.children=function(){for(var c=this.node.childNodes,w=[],T=0;T<c.length;T++){var _=c[T];_.nodeType===1&&w.push(h(c[T]))}return w},b.parent=function(){return h(this.node.parentNode)||null},b.index=function(){for(var c=0,w=this.node.previousSibling;w;)w.nodeType===1&&c++,w=w.previousSibling;return c},b.findParentByClass=function(c,w){for(var T=this.node.ownerSVGElement,_=this.node.parentNode;_&&_!==w&&_!==T;){var F=h(_);if(F.hasClass(c))return F;_=_.parentNode}return null},b.contains=function(c){var w=this.node,T=h.toNode(c),_=T&&T.parentNode;return w===_||!!(_&&_.nodeType===1&&w.compareDocumentPosition(_)&16)},b.toLocalPoint=function(c,w){var T=this.svg().node,_=T.createSVGPoint();_.x=c,_.y=w;try{var F=_.matrixTransform(T.getScreenCTM().inverse()),H=this.getTransformToElement(T).inverse()}catch{return _}return F.matrixTransform(H)},b.translateCenterToPoint=function(c){var w=this.getBBox({target:this.svg()}),T=w.center();return this.translate(c.x-T.x,c.y-T.y),this},b.translateAndAutoOrient=function(c,w,T){c=new D(c),w=new D(w),T||(T=this.svg());var _=this.scale();this.attr("transform","");var F=this.getBBox({target:T}).scale(_.sx,_.sy),H=h.createSVGTransform();H.setTranslate(-F.x-F.width/2,-F.y-F.height/2);var V=h.createSVGTransform(),ot=c.angleBetween(w,c.clone().offset(1,0));ot&&V.setRotate(ot,0,0);var ht=h.createSVGTransform(),q=c.clone().move(w,F.width/2);ht.setTranslate(2*c.x-q.x,2*c.y-q.y);var G=this.getTransformToElement(T),X=h.createSVGTransform();return X.setMatrix(ht.matrix.multiply(V.matrix.multiply(H.matrix.multiply(G.scale(_.sx,_.sy))))),this.attr("transform",h.matrixToTransformString(X.matrix)),this},b.animateAlongPath=function(c,w){w=h.toNode(w);var T=h.ensureId(w),_=h("animateMotion",c),F=h("mpath",{"xlink:href":"#"+T});_.append(F),this.append(_);try{_.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var H=_.node;H.animators=[];var V=H.getAttribute("id");V&&(id2anim[V]=H);for(var ot=getTargets(H),ht=0,q=ot.length;ht<q;ht++){var G=ot[ht],X=new Animator(H,G,ht);animators.push(X),H.animators[ht]=X,X.register()}}}return this};const $=/[^\x20\t\r\n\f]+/g;function Y(c){return h.isString(c)?c.trim().match($)||[]:[]}b.hasClass=function(c){return h.isString(c)?this.node.classList.contains(c.trim()):!1},b.addClass=function(c){return this.node.classList.add(...Y(c)),this},b.removeClass=function(c){return this.node.classList.remove(...Y(c)),this},b.toggleClass=function(c,w){const T=Y(c);for(let _=0;_<T.length;_++)this.node.classList.toggle(T[_],w);return this},b.sample=function(c){c=c||1;for(var w=this.node,T=w.getTotalLength(),_=[],F=0,H;F<T;)H=w.getPointAtLength(F),_.push({x:H.x,y:H.y,distance:F}),F+=c;return _},b.convertToPath=function(){var c=h("path");c.attr(this.attr());var w=this.convertToPathData();return w&&c.attr("d",w),c},b.convertToPathData=function(){var c=this.tagName();switch(c){case"PATH":return this.attr("d");case"LINE":return h.convertLineToPathData(this.node);case"POLYGON":return h.convertPolygonToPathData(this.node);case"POLYLINE":return h.convertPolylineToPathData(this.node);case"ELLIPSE":return h.convertEllipseToPathData(this.node);case"CIRCLE":return h.convertCircleToPathData(this.node);case"RECT":return h.convertRectToPathData(this.node)}throw new Error(c+" cannot be converted to PATH.")},h.prototype.toGeometryShape=function(){var c,w,T,_,F,H,V,ot,ht,q,G,X,U,Ct,St;switch(this.tagName()){case"RECT":return c=parseFloat(this.attr("x"))||0,w=parseFloat(this.attr("y"))||0,T=parseFloat(this.attr("width"))||0,_=parseFloat(this.attr("height"))||0,new pt(c,w,T,_);case"CIRCLE":return F=parseFloat(this.attr("cx"))||0,H=parseFloat(this.attr("cy"))||0,V=parseFloat(this.attr("r"))||0,new Ne({x:F,y:H},V,V);case"ELLIPSE":return F=parseFloat(this.attr("cx"))||0,H=parseFloat(this.attr("cy"))||0,ot=parseFloat(this.attr("rx"))||0,ht=parseFloat(this.attr("ry"))||0,new Ne({x:F,y:H},ot,ht);case"POLYLINE":return q=h.getPointsFromSvgNode(this),new oe(q);case"POLYGON":return q=h.getPointsFromSvgNode(this),q.length>1&&q.push(q[0]),new oe(q);case"PATH":return G=this.attr("d"),wt.isDataSupported(G)||(G=h.normalizePathData(G)),new wt(G);case"LINE":return X=parseFloat(this.attr("x1"))||0,Ct=parseFloat(this.attr("y1"))||0,U=parseFloat(this.attr("x2"))||0,St=parseFloat(this.attr("y2"))||0,new vt({x:X,y:Ct},{x:U,y:St})}return this.getBBox()},b.findIntersection=function(c,w){var T=this.svg().node;w=w||T;var _=this.getBBox({target:w}),F=_.center();if(_.intersectionWithLineFromCenterToPoint(c)){var H,V=this.tagName();if(V==="RECT"){var ot=new pt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),ht=this.getTransformToElement(w),q=h.decomposeMatrix(ht),G=T.createSVGTransform();G.setRotate(-q.rotation,F.x,F.y);var X=h.transformRect(ot,G.matrix.multiply(ht));H=new pt(X).intersectionWithLineFromCenterToPoint(c,q.rotation)}else if(V==="PATH"||V==="POLYGON"||V==="POLYLINE"||V==="CIRCLE"||V==="ELLIPSE"){var U=V==="PATH"?this:this.convertToPath(),Ct=U.sample(),St=1/0,ee=[],re,bt,Tt,it,Q,ft;for(re=0;re<Ct.length;re++)bt=Ct[re],Tt=h.createSVGPoint(bt.x,bt.y),Tt=Tt.matrixTransform(this.getTransformToElement(w)),bt=new D(Tt),it=bt.distance(F),Q=bt.distance(c)*1.1,ft=it+Q,ft<St?(St=ft,ee=[{sample:bt,refDistance:Q}]):ft<St+1&&ee.push({sample:bt,refDistance:Q});ee.sort(function($t,kt){return $t.refDistance-kt.refDistance}),ee[0]&&(H=ee[0].sample)}return H}},b.setAttribute=function(c,w){const T=this.node;if(w===null)return this.removeAttr(c),this;const _=nt[c],{ns:F}=h.qualifyAttr(_);return F?T.setAttributeNS(F,_,w):_==="id"?T.id=w:T.setAttribute(_,w),this},h.createSvgDocument=function(c){if(c){const T=`<svg xmlns="${e.svg}" xmlns:xlink="${e.xlink}" version="${n}">${c}</svg>`,{documentElement:_}=h.parseXML(T,{async:!1});return _}const w=document.createElementNS(e.svg,"svg");return w.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),w.setAttribute("version",n),w},h.createSVGStyle=function(c){const{node:w}=h("style",{type:"text/css"},[h.createCDATASection(c)]);return w},h.createCDATASection=function(c=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(c)},h.idCounter=0,h.uniqueId=function(){return"v-"+ ++h.idCounter},h.toNode=function(c){return h.isV(c)?c.node:c.nodeName&&c||c[0]},h.ensureId=function(c){return c=h.toNode(c),c.id||(c.id=h.uniqueId())},h.sanitizeText=function(c){return(c||"").replace(/ /g," ")},h.isUndefined=function(c){return typeof c>"u"},h.isString=function(c){return typeof c=="string"},h.isObject=function(c){return c&&typeof c=="object"},h.isArray=Array.isArray,h.parseXML=function(c,w){w=w||{};var T;try{var _=new DOMParser;h.isUndefined(w.async)||(_.async=w.async),T=_.parseFromString(c,"text/xml")}catch{T=void 0}if(!T||T.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+c);return T};const j=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(c=>j[c]=c);const nt=new Proxy(j,{get(c,w){return h.supportCamelCaseAttributes?w in c?c[w]:c[w]=w.replace(/[A-Z]/g,"-$&").toLowerCase():w}});Object.defineProperty(h,"attributeNames",{value:nt,writable:!1}),Object.defineProperty(h,"supportCamelCaseAttributes",{value:!1,writable:!0}),h.qualifyAttr=function(c){if(c.indexOf(":")!==-1){var w=c.split(":");return{ns:e[w[0]],local:w[1]}}return{ns:null,local:c}},h.transformSeparatorRegex=/[ ,]+/,h.transformRegex=/\b\w+\([^()]+\)/g,h.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,h.transformTranslateRegex=/\btranslate\(([^()]+)\)/,h.transformRotateRegex=/\brotate\(([^()]+)\)/,h.transformScaleRegex=/\bscale\(([^()]+)\)/,h.transformStringToMatrix=function(c){let w=h.createSVGMatrix();const T=c&&c.match(h.transformRegex);if(!T)return w;const _=T.length;for(let F=0;F<_;F++){const V=T[F].match(h.transformFunctionRegex);if(V){let ot,ht,q,G,X,U=h.createSVGMatrix();const Ct=V[1].toLowerCase(),St=V[2].split(h.transformSeparatorRegex);switch(Ct){case"scale":ot=parseFloat(St[0]),ht=St[1]===void 0?ot:parseFloat(St[1]),U=U.scaleNonUniform(ot,ht);break;case"translate":q=parseFloat(St[0]),G=parseFloat(St[1]),U=U.translate(q,G);break;case"rotate":X=parseFloat(St[0]),q=parseFloat(St[1])||0,G=parseFloat(St[2])||0,q!==0||G!==0?U=U.translate(q,G).rotate(X).translate(-q,-G):U=U.rotate(X);break;case"skewx":X=parseFloat(St[0]),U=U.skewX(X);break;case"skewy":X=parseFloat(St[0]),U=U.skewY(X);break;case"matrix":U.a=parseFloat(St[0]),U.b=parseFloat(St[1]),U.c=parseFloat(St[2]),U.d=parseFloat(St[3]),U.e=parseFloat(St[4]),U.f=parseFloat(St[5]);break;default:continue}w=w.multiply(U)}}return w},h.matrixToTransformString=function(c){return c||(c=!0),"matrix("+(c.a!==void 0?c.a:1)+","+(c.b!==void 0?c.b:0)+","+(c.c!==void 0?c.c:0)+","+(c.d!==void 0?c.d:1)+","+(c.e!==void 0?c.e:0)+","+(c.f!==void 0?c.f:0)+")"},h.parseTransformString=function(c){var w,T,_;if(c){var F=h.transformSeparatorRegex;if(c.trim().indexOf("matrix")>=0){var H=h.transformStringToMatrix(c),V=h.decomposeMatrix(H);w=[V.translateX,V.translateY],_=[V.scaleX,V.scaleY],T=[V.rotation];var ot=[];(w[0]!==0||w[1]!==0)&&ot.push("translate("+w+")"),(_[0]!==1||_[1]!==1)&&ot.push("scale("+_+")"),T[0]!==0&&ot.push("rotate("+T+")"),c=ot.join(" ")}else{const q=c.match(h.transformTranslateRegex);q&&(w=q[1].split(F));const G=c.match(h.transformRotateRegex);G&&(T=G[1].split(F));const X=c.match(h.transformScaleRegex);X&&(_=X[1].split(F))}}var ht=_&&_[0]?parseFloat(_[0]):1;return{value:c,translate:{tx:w&&w[0]?parseInt(w[0],10):0,ty:w&&w[1]?parseInt(w[1],10):0},rotate:{angle:T&&T[0]?parseInt(T[0],10):0,cx:T&&T[1]?parseInt(T[1],10):void 0,cy:T&&T[2]?parseInt(T[2],10):void 0},scale:{sx:ht,sy:_&&_[1]?parseFloat(_[1]):ht}}},h.deltaTransformPoint=function(c,w){var T=w.x*c.a+w.y*c.c+0,_=w.x*c.b+w.y*c.d+0;return{x:T,y:_}},h.decomposeMatrix=function(c){var w=h.deltaTransformPoint(c,{x:0,y:1}),T=h.deltaTransformPoint(c,{x:1,y:0}),_=180/i*s(w.y,w.x)-90,F=180/i*s(T.y,T.x);return{translateX:c.e,translateY:c.f,scaleX:o(c.a*c.a+c.b*c.b),scaleY:o(c.c*c.c+c.d*c.d),skewX:_,skewY:F,rotation:_}},h.matrixToScale=function(c){var w,T,_,F;return c?(w=h.isUndefined(c.a)?1:c.a,F=h.isUndefined(c.d)?1:c.d,T=c.b,_=c.c):w=F=1,{sx:T?o(w*w+T*T):w,sy:_?o(_*_+F*F):F}},h.matrixToRotate=function(c){var w={x:0,y:1};return c&&(w=h.deltaTransformPoint(c,w)),{angle:fn(xs(s(w.y,w.x))-90)}},h.matrixToTranslate=function(c){return{tx:c&&c.e||0,ty:c&&c.f||0}},h.isV=function(c){return c instanceof h},h.isVElement=h.isV,h.isSVGGraphicsElement=function(c){return c?(c=h.toNode(c),c instanceof SVGElement&&typeof c.getScreenCTM=="function"):!1};var ut=h("svg").node;return h.createSVGMatrix=function(c){var w=ut.createSVGMatrix();for(var T in c)w[T]=c[T];return w},h.createSVGTransform=function(c){return h.isUndefined(c)?ut.createSVGTransform():(c instanceof SVGMatrix||(c=h.createSVGMatrix(c)),ut.createSVGTransformFromMatrix(c))},h.createSVGPoint=function(c,w){var T=ut.createSVGPoint();return T.x=c,T.y=w,T},h.transformRect=function(c,w){var T=ut.createSVGPoint();T.x=c.x,T.y=c.y;var _=T.matrixTransform(w);T.x=c.x+c.width,T.y=c.y;var F=T.matrixTransform(w);T.x=c.x+c.width,T.y=c.y+c.height;var H=T.matrixTransform(w);T.x=c.x,T.y=c.y+c.height;var V=T.matrixTransform(w),ot=u(_.x,F.x,H.x,V.x),ht=l(_.x,F.x,H.x,V.x),q=u(_.y,F.y,H.y,V.y),G=l(_.y,F.y,H.y,V.y);return new pt(ot,q,ht-ot,G-q)},h.transformPoint=function(c,w){return new D(h.createSVGPoint(c.x,c.y).matrixTransform(w))},h.transformLine=function(c,w){return new vt(h.transformPoint(c.start,w),h.transformPoint(c.end,w))},h.transformPolyline=function(c,w){var T=c instanceof oe?c.points:c;h.isArray(T)||(T=[]);for(var _=[],F=0,H=T.length;F<H;F++)_[F]=h.transformPoint(T[F],w);return new oe(_)},h.styleToObject=function(c){for(var w={},T=c.split(";"),_=0;_<T.length;_++){var F=T[_],H=F.split("=");w[H[0].trim()]=H[1].trim()}return w},h.createSlicePathData=function(c,w,T,_){var F=2*i-1e-6,H=c,V=w,ot=T,ht=_,q=(ht<ot&&(q=ot,ot=ht,ht=q),ht-ot),G=q<i?"0":"1",X=d(ot),U=g(ot),Ct=d(ht),St=g(ht);return q>=F?H?"M0,"+V+"A"+V+","+V+" 0 1,1 0,"+-V+"A"+V+","+V+" 0 1,1 0,"+V+"M0,"+H+"A"+H+","+H+" 0 1,0 0,"+-H+"A"+H+","+H+" 0 1,0 0,"+H+"Z":"M0,"+V+"A"+V+","+V+" 0 1,1 0,"+-V+"A"+V+","+V+" 0 1,1 0,"+V+"Z":H?"M"+V*X+","+V*U+"A"+V+","+V+" 0 "+G+",1 "+V*Ct+","+V*St+"L"+H*Ct+","+H*St+"A"+H+","+H+" 0 "+G+",0 "+H*X+","+H*U+"Z":"M"+V*X+","+V*U+"A"+V+","+V+" 0 "+G+",1 "+V*Ct+","+V*St+"L0,0Z"},h.mergeAttrs=function(c,w){for(var T in w)T==="class"?c[T]=c[T]?c[T]+" "+w[T]:w[T]:T==="style"?h.isObject(c[T])&&h.isObject(w[T])?c[T]=h.mergeAttrs(c[T],w[T]):h.isObject(c[T])?c[T]=h.mergeAttrs(c[T],h.styleToObject(w[T])):h.isObject(w[T])?c[T]=h.mergeAttrs(h.styleToObject(c[T]),w[T]):c[T]=h.mergeAttrs(h.styleToObject(c[T]),h.styleToObject(w[T])):c[T]=w[T];return c},h.annotateString=function(c,w,T){w=w||[],T=T||{};for(var _=T.offset||0,F=[],H,V=[],ot,ht,q=0;q<c.length;q++){ot=V[q]=c[q];for(var G=0;G<w.length;G++){var X=w[G],U=X.start+_,Ct=X.end+_;q>=U&&q<Ct&&(h.isObject(ot)?ot.attrs=h.mergeAttrs(h.mergeAttrs({},ot.attrs),X.attrs):ot=V[q]={t:c[q],attrs:X.attrs},T.includeAnnotationIndices&&(ot.annotations||(ot.annotations=[])).push(G))}ht=V[q-1],ht?h.isObject(ot)&&h.isObject(ht)?JSON.stringify(ot.attrs)===JSON.stringify(ht.attrs)?H.t+=ot.t:(F.push(H),H=ot):h.isObject(ot)||h.isObject(ht)?(F.push(H),H=ot):H=(H||"")+ot:H=ot}return H&&F.push(H),F},h.findAnnotationsAtIndex=function(c,w){var T=[];return c&&c.forEach(function(_){_.start<w&&w<=_.end&&T.push(_)}),T},h.findAnnotationsBetweenIndexes=function(c,w,T){var _=[];return c&&c.forEach(function(F){(w>=F.start&&w<F.end||T>F.start&&T<=F.end||F.start>=w&&F.end<T)&&_.push(F)}),_},h.shiftAnnotations=function(c,w,T){return c&&c.forEach(function(_){_.start<w&&_.end>=w?_.end+=T:_.start>=w&&(_.start+=T,_.end+=T)}),c},h.convertLineToPathData=function(c){c=h(c);var w=["M",c.attr("x1"),c.attr("y1"),"L",c.attr("x2"),c.attr("y2")].join(" ");return w},h.convertPolygonToPathData=function(c){var w=h.getPointsFromSvgNode(c);return w.length===0?null:h.svgPointsToPath(w)+" Z"},h.convertPolylineToPathData=function(c){var w=h.getPointsFromSvgNode(c);return w.length===0?null:h.svgPointsToPath(w)},h.svgPointsToPath=function(c){for(var w=0,T=c.length;w<T;w++)c[w]=c[w].x+" "+c[w].y;return"M "+c.join(" L")},h.getPointsFromSvgNode=function(c){c=h.toNode(c);var w=[],T=c.points;if(T)for(var _=0,F=T.numberOfItems;_<F;_++)w.push(T.getItem(_));return w},h.KAPPA=.551784,h.convertCircleToPathData=function(c){c=h(c);var w=parseFloat(c.attr("cx"))||0,T=parseFloat(c.attr("cy"))||0,_=parseFloat(c.attr("r")),F=_*h.KAPPA,H=["M",w,T-_,"C",w+F,T-_,w+_,T-F,w+_,T,"C",w+_,T+F,w+F,T+_,w,T+_,"C",w-F,T+_,w-_,T+F,w-_,T,"C",w-_,T-F,w-F,T-_,w,T-_,"Z"].join(" ");return H},h.convertEllipseToPathData=function(c){c=h(c);var w=parseFloat(c.attr("cx"))||0,T=parseFloat(c.attr("cy"))||0,_=parseFloat(c.attr("rx")),F=parseFloat(c.attr("ry"))||_,H=_*h.KAPPA,V=F*h.KAPPA,ot=["M",w,T-F,"C",w+H,T-F,w+_,T-V,w+_,T,"C",w+_,T+V,w+H,T+F,w,T+F,"C",w-H,T+F,w-_,T+V,w-_,T,"C",w-_,T-V,w-H,T-F,w,T-F,"Z"].join(" ");return ot},h.convertRectToPathData=function(c){return c=h(c),h.rectToPath({x:parseFloat(c.attr("x"))||0,y:parseFloat(c.attr("y"))||0,width:parseFloat(c.attr("width"))||0,height:parseFloat(c.attr("height"))||0,rx:parseFloat(c.attr("rx"))||0,ry:parseFloat(c.attr("ry"))||0})},h.rectToPath=function(c){var w,T=c.x,_=c.y,F=c.width,H=c.height,V=u(c.rx||c["top-rx"]||0,F/2),ot=u(c.rx||c["bottom-rx"]||0,F/2),ht=u(c.ry||c["top-ry"]||0,H/2),q=u(c.ry||c["bottom-ry"]||0,H/2);return V||ot||ht||q?w=["M",T,_+ht,"v",H-ht-q,"a",ot,q,0,0,0,ot,q,"h",F-2*ot,"a",ot,q,0,0,0,ot,-q,"v",-(H-q-ht),"a",V,ht,0,0,0,-V,-ht,"h",-(F-2*V),"a",V,ht,0,0,0,-V,ht,"Z"]:w=["M",T,_,"H",T+F,"V",_+H,"H",T,"V",_,"Z"],w.join(" ")},h.normalizePathData=function(){var c=`	
\v\f\r   ᠎             　\u2028\u2029`,w=new RegExp("([a-z])["+c+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+c+"]*,?["+c+"]*)+)","ig"),T=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+c+"]*,?["+c+"]*","ig"),_=Math,F=_.PI,H=_.sin,V=_.cos,ot=_.tan,ht=_.asin,q=_.sqrt,G=_.abs;function X(bt,Tt,it,Q,ft,$t){var kt=.3333333333333333,_t=2/3;return[kt*bt+_t*it,kt*Tt+_t*Q,kt*ft+_t*it,kt*$t+_t*Q,ft,$t]}function U(bt,Tt,it){var Q=bt*V(it)-Tt*H(it),ft=bt*H(it)+Tt*V(it);return{x:Q,y:ft}}function Ct(bt,Tt,it,Q,ft,$t,kt,_t,Xt,Mt){var m=F*120/180,C=F/180*(+ft||0),M=[],I;if(Mt)Ft=Mt[0],Kt=Mt[1],se=Mt[2],dt=Mt[3];else{I=U(bt,Tt,-C),bt=I.x,Tt=I.y,I=U(_t,Xt,-C),_t=I.x,Xt=I.y;var J=(bt-_t)/2,et=(Tt-Xt)/2,mt=J*J/(it*it)+et*et/(Q*Q);mt>1&&(mt=q(mt),it=mt*it,Q=mt*Q);var Dt=it*it,jt=Q*Q,ce=($t==kt?-1:1)*q(G((Dt*jt-Dt*et*et-jt*J*J)/(Dt*et*et+jt*J*J))),se=ce*it*et/Q+(bt+_t)/2,dt=ce*-Q*J/it+(Tt+Xt)/2,Ft=ht(((Tt-dt)/Q).toFixed(9)),Kt=ht(((Xt-dt)/Q).toFixed(9));Ft=bt<se?F-Ft:Ft,Kt=_t<se?F-Kt:Kt,Ft<0&&(Ft=F*2+Ft),Kt<0&&(Kt=F*2+Kt),kt&&Ft>Kt&&(Ft=Ft-F*2),!kt&&Kt>Ft&&(Kt=Kt-F*2)}var jn=Kt-Ft;if(G(jn)>m){var le=Kt,ve=_t,_e=Xt;Kt=Ft+m*(kt&&Kt>Ft?1:-1),_t=se+it*V(Kt),Xt=dt+Q*H(Kt),M=Ct(_t,Xt,it,Q,ft,0,kt,ve,_e,[Kt,le,se,dt])}jn=Kt-Ft;var rn=V(Ft),De=H(Ft),sn=V(Kt),gn=H(Kt),gr=ot(jn/4),Xn=4/3*(it*gr),Gr=4/3*(Q*gr),Ur=[bt,Tt],In=[bt+Xn*De,Tt-Gr*rn],Cn=[_t+Xn*gn,Xt-Gr*sn],Rn=[_t,Xt];if(In[0]=2*Ur[0]-In[0],In[1]=2*Ur[1]-In[1],Mt)return[In,Cn,Rn].concat(M);M=[In,Cn,Rn].concat(M).join().split(",");for(var Wr=[],ki=M.length,de=0;de<ki;de++)Wr[de]=de%2?U(M[de-1],M[de],C).y:U(M[de],M[de+1],C).x;return Wr}function St(bt){if(!bt)return null;var Tt={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},it=[];return String(bt).replace(w,function(Q,ft,$t){var kt=[],_t=ft.toLowerCase();for($t.replace(T,function(Xt,Mt){Mt&&kt.push(+Mt)}),_t==="m"&&kt.length>2&&(it.push([ft].concat(kt.splice(0,2))),_t="l",ft=ft==="m"?"l":"L");kt.length>=Tt[_t]&&(it.push([ft].concat(kt.splice(0,Tt[_t]))),!!Tt[_t]););}),it}function ee(bt){if((!Array.isArray(bt)||!Array.isArray(bt&&bt[0]))&&(bt=St(bt)),!bt||!bt.length)return[["M",0,0]];for(var Tt=[],it=0,Q=0,ft=0,$t=0,kt=0,_t,Xt=bt.length,Mt=kt;Mt<Xt;Mt++){var m=[];Tt.push(m);var C=bt[Mt];if(_t=C[0],_t!=_t.toUpperCase()){m[0]=_t.toUpperCase();var M,I;switch(m[0]){case"A":m[1]=C[1],m[2]=C[2],m[3]=C[3],m[4]=C[4],m[5]=C[5],m[6]=+C[6]+it,m[7]=+C[7]+Q;break;case"V":m[1]=+C[1]+Q;break;case"H":m[1]=+C[1]+it;break;case"M":for(ft=+C[1]+it,$t=+C[2]+Q,M=C.length,I=1;I<M;I++)m[I]=+C[I]+(I%2?it:Q);break;default:for(M=C.length,I=1;I<M;I++)m[I]=+C[I]+(I%2?it:Q);break}}else for(var J=C.length,et=0;et<J;et++)m[et]=C[et];switch(m[0]){case"Z":it=+ft,Q=+$t;break;case"H":it=m[1];break;case"V":Q=m[1];break;case"M":ft=m[m.length-2],$t=m[m.length-1],it=m[m.length-2],Q=m[m.length-1];break;default:it=m[m.length-2],Q=m[m.length-1];break}}return Tt}function re(bt){var Tt=ee(bt),it={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function Q(M,I,J){var et,mt;if(!M)return["C",I.x,I.y,I.x,I.y,I.x,I.y];switch(M[0]in{T:1,Q:1}||(I.qx=null,I.qy=null),M[0]){case"M":I.X=M[1],I.Y=M[2];break;case"A":parseFloat(M[1])===0||parseFloat(M[2])===0?M=["L",M[6],M[7]]:M=["C"].concat(Ct.apply(0,[I.x,I.y].concat(M.slice(1))));break;case"S":J==="C"||J==="S"?(et=I.x*2-I.bx,mt=I.y*2-I.by):(et=I.x,mt=I.y),M=["C",et,mt].concat(M.slice(1));break;case"T":J==="Q"||J==="T"?(I.qx=I.x*2-I.qx,I.qy=I.y*2-I.qy):(I.qx=I.x,I.qy=I.y),M=["C"].concat(X(I.x,I.y,I.qx,I.qy,M[1],M[2]));break;case"Q":I.qx=M[1],I.qy=M[2],M=["C"].concat(X(I.x,I.y,M[1],M[2],M[3],M[4]));break;case"H":M=["L"].concat(M[1],I.y);break;case"V":M=["L"].concat(I.x,M[1]);break}return M}function ft(M,I){if(M[I].length>7){M[I].shift();for(var J=M[I];J.length;)$t[I]="A",M.splice(I++,0,["C"].concat(J.splice(0,6)));M.splice(I,1),Xt=Tt.length}}for(var $t=[],kt="",_t="",Xt=Tt.length,Mt=0;Mt<Xt;Mt++){Tt[Mt]&&(kt=Tt[Mt][0]),kt!=="C"&&($t[Mt]=kt,Mt>0&&(_t=$t[Mt-1])),Tt[Mt]=Q(Tt[Mt],it,_t),$t[Mt]!=="A"&&kt==="C"&&($t[Mt]="C"),ft(Tt,Mt);var m=Tt[Mt],C=m.length;it.x=m[C-2],it.y=m[C-1],it.bx=parseFloat(m[C-4])||it.x,it.by=parseFloat(m[C-3])||it.y}return(!Tt[0][0]||Tt[0][0]!=="M")&&Tt.unshift(["M",0,0]),Tt}return function(bt){return re(bt).join(",").split(",").join(" ")}}(),h.namespace=e,h.g=wg,h}(),Pn={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},pi="[object Arguments]",Bo="[object Array]",Is="[object Boolean]",Ua="[object Date]",Kf="[object Error]",Jg="[object Function]",Si="[object Map]",Rs="[object Number]",Kg="[object Null]",Cr="[object Object]",Wa="[object RegExp]",Pi="[object Set]",Ds="[object String]",Fs="[object Symbol]",Qg="[object Undefined]",tp="[object WeakMap]",Ya="[object ArrayBuffer]",ja="[object DataView]",Qf="[object Float32Array]",th="[object Float64Array]",eh="[object Int8Array]",nh="[object Int16Array]",rh="[object Int32Array]",ih="[object Uint8Array]",sh="[object Uint8ClampedArray]",oh="[object Uint16Array]",ah="[object Uint32Array]",ep={[pi]:!0,[Bo]:!0,[Ya]:!0,[ja]:!0,[Is]:!0,[Ua]:!0,[Qf]:!0,[th]:!0,[eh]:!0,[nh]:!0,[rh]:!0,[Si]:!0,[Rs]:!0,[Cr]:!0,[Wa]:!0,[Pi]:!0,[Ds]:!0,[Fs]:!0,[ih]:!0,[sh]:!0,[oh]:!0,[ah]:!0,[Kf]:!1,[Jg]:!1,[tp]:!1},Xa="\\ud800-\\udfff",np="\\u0300-\\u036f",rp="\\ufe20-\\ufe2f",ip="\\u20d0-\\u20ff",sp="\\u1ab0-\\u1aff",op="\\u1dc0-\\u1dff",ap=np+rp+ip+sp+op,uh="\\u2700-\\u27bf",ch="a-z\\xdf-\\xf6\\xf8-\\xff",up="\\xac\\xb1\\xd7\\xf7",cp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lp="\\u2000-\\u206f",fp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lh="A-Z\\xc0-\\xd6\\xd8-\\xde",hp="\\ufe0e\\ufe0f",fh=up+cp+lp+fp,hh="['’]",oc=`[${fh}]`,Za=`[${ap}]`,dh="\\d",dp=`[${uh}]`,gh=`[${ch}]`,ph=`[^${Xa}${fh+dh+uh+ch+lh}]`,Vo="\\ud83c[\\udffb-\\udfff]",gp=`(?:${Za}|${Vo})`,vh=`[^${Xa}]`,Ja="(?:\\ud83c[\\udde6-\\uddff]){2}",Ka="[\\ud800-\\udbff][\\udc00-\\udfff]",Pr=`[${lh}]`,pp="\\u200d",ac=`(?:${gh}|${ph})`,vp=`(?:${Pr}|${ph})`,uc=`(?:${hh}(?:d|ll|m|re|s|t|ve))?`,cc=`(?:${hh}(?:D|LL|M|RE|S|T|VE))?`,mh=`${gp}?`,yh=`[${hp}]?`,mp=`(?:${pp}(?:${[vh,Ja,Ka].join("|")})${yh+mh})*`,yp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xh=yh+mh+mp,bp=`(?:${[dp,Ja,Ka].join("|")})${xh}`,wp=RegExp([`${Pr}?${gh}+${uc}(?=${[oc,Pr,"$"].join("|")})`,`${vp}+${cc}(?=${[oc,Pr+ac,"$"].join("|")})`,`${Pr}?${ac}+${uc}`,`${Pr}+${cc}`,xp,yp,`${dh}+`,bp].join("|"),"g"),Qa=200,zo="__hash_undefined__",Ap=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,Tp=`[${Xa}]`,Sp=`${vh}${Za}?`,Pp=`(?:${[Sp,Za,Ja,Ka,Tp].join("|")})`,bh=RegExp(`${Vo}(?=${Vo})|${Pp+xh}`,"g"),Ep=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cp=/^\w*$/,_p=46,Lp=/\\(\\)?/g,Mp=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Op=/^(?:0|[1-9]\d*)$/,Np=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),kp=4294967294,Ip=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wh=t=>bh.test(t),Rp=t=>t.match(bh)||[],Dp=t=>t.split(""),Ah=t=>wh(t)?Rp(t):Dp(t),Fp=t=>t==null?[]:Ei(t).map(e=>t[e]),Ei=t=>nn(t)?Th(t):Object.keys(Object(t)),Bp=t=>{if(!Bs(t))return Object.keys(t);var e=[];for(var n in Object(t))hasOwnProperty.call(t,n)&&n!="constructor"&&e.push(n);return e},Th=(t,e)=>{const n=Array.isArray(t),r=!n&&dn(t)&&en(t)===pi,i=!n&&!r&&Li(t),s=n||r||i,o=t.length,u=new Array(s?o:0);let l=s?-1:o;for(;++l<o;)u[l]=`${l}`;for(const d in t)(e||hasOwnProperty.call(t,d))&&!(s&&(d==="length"||Nh(d,o)))&&u.push(d);return u},Yi=(t,e)=>{let{length:n}=t;for(;n--;)if($r(t[n][0],e))return n;return-1},$r=(t,e)=>t===e||t!==t&&e!==e,dn=t=>t!=null&&typeof t=="object",gs=(t,e,n)=>{if(!te(n))return!1;const r=typeof e;return(r=="number"?nn(n)&&e>-1&&e<n.length:r=="string"&&e in n)?$r(n[e],t):!1},Vp=t=>dn(t)&&en(t)==Pi,zp=t=>dn(t)&&en(t)==Si,Bs=t=>{const e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Object.prototype;return t===n},Ci=(t,e,n)=>{const r=t[e];(!(hasOwnProperty.call(t,e)&&$r(r,n))||n===void 0&&!(e in t))&&(t[e]=n)},_i=(t,e,n)=>{let r=-1;const i=e.length;for(;++r<i;){const s=e[r];Ci(n,s,t[s])}return n},nn=t=>t!=null&&typeof t!="function"&&typeof t.length=="number"&&t.length>-1&&t.length%1===0,Vr=t=>typeof t=="symbol"||dn(t)&&en(t)===Fs,$p=t=>{const e=t.length;let n=new t.constructor(e);return e&&typeof t[0]=="string"&&hasOwnProperty.call(t,"index")&&(n.index=t.index,n.input=t.input),n},tu=(t,e)=>{let n=-1;const r=t.length;for(e||(e=new Array(r));++n<r;)e[n]=t[n];return e},en=t=>t==null?t===void 0?Qg:Kg:Object.prototype.toString.call(t),eu=t=>{const e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e},Sh=(t,e)=>{const n=e?eu(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Hp=t=>{const e=new t.constructor(t.source,/\w*$/.exec(t));return e.lastIndex=t.lastIndex,e},Ph=t=>typeof t.constructor=="function"&&!Bs(t)?Object.create(Object.getPrototypeOf(t)):{},nu=t=>t==null?[]:(t=Object(t),Object.getOwnPropertySymbols(t).filter(n=>propertyIsEnumerable.call(t,n))),qp=(t,e)=>_i(t,nu(t),e);function Gp(t,e){const n=e?eu(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}const Up=(t,e,n)=>{const r=t.constructor;switch(e){case Ya:return eu(t);case Is:case Ua:return new r(+t);case ja:return Gp(t,n);case Qf:case th:case eh:case nh:case rh:case ih:case sh:case oh:case ah:return Sh(t,n);case Si:return new r(t);case Rs:case Ds:return new r(t);case Wa:return Hp(t);case Pi:return new r;case Fs:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(t)):{}}},Li=t=>dn(t)&&Ap.test(en(t)),$o=t=>{const e=Object.keys(t);return!Array.isArray(t)&&t!=null&&e.push(...nu(Object(t))),e},Eh=t=>{const e=[];for(;t;)e.push(...nu(t)),t=Object.getPrototypeOf(Object(t));return e},Ch=t=>{const e=[];for(const n in t)e.push(n);return Array.isArray(t)||e.push(...Eh(t)),e},ji=({__data__:t},e)=>{const n=t;return nv(e)?n[typeof e=="string"?"string":"hash"]:n.map},Wp=(t,e,n,r)=>{const i=$o(t),s=i.length,u=$o(e).length;if(s!=u)return!1;let l,d=s;for(;d--;)if(l=i[d],!hasOwnProperty.call(e,l))return!1;const g=r.get(t),h=r.get(e);if(g&&h)return g==e&&h==t;let b=!0;r.set(t,e),r.set(e,t);let P;for(;++d<s;){l=i[d];const A=t[l],E=e[l];if(!(A===E||n(A,E,r))){b=!1;break}P||(P=l=="constructor")}if(b&&!P){const A=t.constructor,E=e.constructor;A!=E&&"constructor"in t&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof E=="function"&&E instanceof E)&&(b=!1)}return r.delete(t),r.delete(e),b},Vs=(t,e,n)=>t===e?!0:t==null||e==null||!dn(t)&&!dn(e)?t!==t&&e!==e:Yp(t,e,Vs,n),Yp=(t,e,n,r)=>{let i=Array.isArray(t);const s=Array.isArray(e);let o=i?Bo:en(t),u=s?Bo:en(e);o=o==pi?Cr:o,u=u==pi?Cr:u;let l=o==Cr;const d=u==Cr,g=o==u;if(g&&!l)return r||(r=new Ir),i||Li(t)?_h(t,e,!1,n,r):Zp(t,e,o,n,r);const h=l&&hasOwnProperty.call(t,"__wrapped__"),b=d&&hasOwnProperty.call(e,"__wrapped__");if(h||b){const P=h?t.value():t,A=b?e.value():e;return r||(r=new Ir),n(P,A,r)}return g?(r||(r=new Ir),Wp(t,e,n,r)):!1},_h=(t,e,n,r,i)=>{const o=t.length,u=e.length;if(o!=u)return!1;const l=i.get(t),d=i.get(e);if(l&&d)return l==e&&d==t;let g=-1,h=!0;const b=n?new mi:void 0;for(i.set(t,e),i.set(e,t);++g<o;){const P=t[g],A=e[g];if(b){if(!jp(e,(E,N)=>{if(!Xp(b,N)&&(P===E||r(P,E,i)))return b.push(N)})){h=!1;break}}else if(!(P===A||r(P,A,i))){h=!1;break}}return i.delete(t),i.delete(e),h},jp=(t,e)=>{let n=-1;const r=t==null?0:t.length;for(;++n<r;)if(e(t[n],n,t))return!0;return!1},Xp=(t,e)=>t.has(e),lc=(t,e,n,r)=>!(t.byteLength!=e.byteLength||!n(new Uint8Array(t),new Uint8Array(e),r)),Zp=(t,e,n,r,i)=>{switch(n){case ja:return t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset?!1:(t=t.buffer,e=e.buffer,lc(t,e,r,i));case Ya:return lc(t,e,r,i);case Is:case Ua:case Rs:return $r(+t,+e);case Kf:return t.name==e.name&&t.message==e.message;case Wa:case Ds:return t==`${e}`;case Si:let s=Lh;case Pi:if(s||(s=zs),t.size!=e.size)return!1;const o=i.get(t);if(o)return o==e;i.set(t,e);const u=_h(s(t),s(e),!0,r,i);return i.delete(t),u;case Fs:return Symbol.prototype.valueOf.call(t)==Symbol.prototype.valueOf.call(e)}return!1},Lh=t=>{let e=-1,n=Array(t.size);return t.forEach((r,i)=>{n[++e]=[i,r]}),n},zs=t=>{let e=-1;const n=new Array(t.size);return t.forEach(r=>{n[++e]=r}),n},ru=(t,e)=>{if(Array.isArray(t))return!1;const n=typeof t;return n==="number"||n==="boolean"||t==null||Vr(t)?!0:Cp.test(t)||!Ep.test(t)||e!=null&&t in Object(e)},Jp=t=>{const e=[];return t.charCodeAt(0)===_p&&e.push(""),t.replace(Mp,(n,r,i,s)=>{let o=n;i?o=s.replace(Lp,"$1"):r&&(o=r.trim()),e.push(o)}),e},Hr=(t,e)=>Array.isArray(t)?t:ru(t,e)?[t]:Jp(`${t}`),$s=(t,e)=>{e=Hr(e,t);let n=0;const r=e.length;for(;t!=null&&n<r;)t=t[hr(e[n])],n++;return n&&n==r?t:void 0};function Kp(t,e){if(t!==e){const n=t!==void 0,r=t===null,i=t===t,s=Vr(t),o=e!==void 0,u=e===null,l=e===e,d=Vr(e);if(!u&&!d&&!s&&t>e||s&&o&&l&&!u&&!d||r&&o&&l||!n&&l||!i)return 1;if(!r&&!s&&!d&&t<e||d&&n&&i&&!r&&!s||u&&n&&i||!o&&i||!l)return-1}return 0}function Qp(t,e,n){let r=-1;const i=t.criteria,s=e.criteria,o=i.length,u=n.length;for(;++r<o;){const l=r<u?n[r]:null,g=(l&&typeof l=="function"?l:Kp)(i[r],s[r]);if(g)return l&&typeof l!="function"?g*(l=="desc"?-1:1):g}return t.index-e.index}const Mh=(t,e)=>{let n=(o,u)=>!!(o==null?0:o.length)&&o.indexOf(u)>-1,r=!0;const i=[],s=e.length;if(!t.length)return i;e.length>=Qa&&(n=(o,u)=>o.has(u),r=!1,e=new mi(e));t:for(let o in t){let u=t[o];const l=u;if(u=u!==0?u:0,r&&l===l){let d=s;for(;d--;)if(e[d]===l)continue t;i.push(u)}else n(e,l)||i.push(u)}return i},hr=t=>{if(typeof t=="string"||Vr(t))return t;const e=`${t}`;return e=="0"&&1/t==-1/0?"-0":e},kr=(t,e=!1,n=!1,r=!0,i,s,o,u)=>{let l;if(i&&(l=o?i(t,s,o,u):i(t)),l!==void 0)return l;if(!te(t))return t;const d=Array.isArray(t),g=en(t);if(d){if(l=$p(t),!e)return tu(t,l)}else{const A=typeof t=="function";if(g===Cr||g===pi||A&&!o){if(l=n||A?{}:Ph(t),!e)return n?tv(t,_i(t,Object.keys(t),l)):qp(t,Object.assign(l,t))}else{if(A||!ep[g])return o?t:{};l=Up(t,g,e)}}u||(u=new Ir);const h=u.get(t);if(h)return h;if(u.set(t,l),zp(t))return t.forEach((A,E)=>{l.set(E,kr(A,e,n,r,i,E,t,u))}),l;if(Vp(t))return t.forEach(A=>{l.add(kr(A,e,n,r,i,A,t,u))}),l;if(Li(t))return l;const P=d?void 0:(r?n?Ch:$o:n?kh:Ei)(t);return(P||t).forEach((A,E)=>{P&&(E=A,A=t[E]),Ci(l,E,kr(A,e,n,r,i,E,t,u))}),l},tv=(t,e)=>_i(t,Eh(t),e),Oh=(t,e)=>e.length<2?t:$s(t,e.slice(0,-1)),Nh=(t,e)=>{const n=typeof t;return e=e??Number.MAX_SAFE_INTEGER,!!e&&(n==="number"||n!=="symbol"&&Op.test(t))&&t>-1&&t%1==0&&t<e},ev=(t,e)=>{e=Hr(e,t),t=Oh(t,e);const n=e[e.length-1];return t==null||delete t[hr(n)]},nv=t=>{const e=typeof t;return e==="string"||e==="number"||e==="symbol"||e==="boolean"?t!=="__proto__":t===null},kh=t=>{const e=[];for(const n in t)e.push(n);return e},rv=t=>{t=Object(t);const e={};for(const n in t)e[n]=t[n];return e},fc=(t,e)=>{if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]};function Ih(t,e=!1){return(n,...r)=>{let i=-1,s=r.length,o=s>1?r[s-1]:void 0;const u=s>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(s--,o):e?(l,d)=>{if(Array.isArray(l)&&!Array.isArray(d))return d}:void 0,u&&gs(r[0],r[1],u)&&(o=s<3?void 0:o,s=1),n=Object(n);++i<s;){const l=r[i];l&&t(n,l,i,o)}return n}}const iu=(t,e,n,r,i)=>{t!==e&&Ke(e,(s,o)=>{if(te(s))i||(i=new Ir),iv(t,e,o,n,iu,r,i);else{let u=r?r(t[o],s,`${o}`,t,e,i):void 0;u===void 0&&(u=s),Ho(t,o,u)}})},iv=(t,e,n,r,i,s,o)=>{const u=fc(t,n),l=fc(e,n),d=o.get(l);if(d){Ho(t,n,d);return}let g=s?s(u,l,`${n}`,t,e,o):void 0,h=g===void 0;if(h){const b=Array.isArray(l),P=!b&&Li(l);g=l,b||P?Array.isArray(u)?g=u:dn(u)&&nn(u)?g=tu(u):P?(h=!1,g=Sh(l,!0)):g=[]:ge(l)||vi(l)?(g=u,vi(u)?g=rv(u):(typeof u=="function"||!te(u))&&(g=Ph(l))):h=!1}h&&(o.set(l,g),i(g,l,r,s,o),o.delete(l)),Ho(t,n,g)},Ho=(t,e,n)=>{(n!==void 0&&!$r(t[e],n)||n===void 0&&!(e in t))&&Ci(t,e,n)};function sv(t,e,n){const r=Object(t),i=n(t);let{length:s}=i,o=-1;for(;s--;){const u=i[++o];if(e(r[u],u,r)===!1)break}return t}const ov=(t,e)=>t&&sv(t,e,Ei),su=(t,e)=>{if(t==null)return t;if(!nn(t))return ov(t,e);const n=t.length,r=Object(t);let i=-1;for(;++i<n&&e(r[i],i,r)!==!1;);return t};function av(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}const uv=Set&&1/zs(new Set([void 0,-0]))[1]==1/0?t=>new Set(t):()=>{};function Rh(t,e,n,r,i,s){return te(t)&&te(e)&&(s.set(e,t),iu(t,e,void 0,Rh,s),s.delete(e)),t}function cv(t,e,n){e.length?e=e.map(o=>Array.isArray(o)?u=>$s(u,o.length===1?o[0]:o):o):e=[o=>o];let r=-1,i=-1;const s=nn(t)?new Array(t.length):[];return su(t,o=>{const u=e.map(l=>l(o));s[++i]={criteria:u,index:++r,value:o}}),lv(s,(o,u)=>Qp(o,u,n))}function lv(t,e){let{length:n}=t;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Dh(t){return t===t&&!te(t)}function Fh(t,e){return n=>n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}function fv(t,e){return t!=null&&Ev(t,e,Pv)}function hv(t,e){return ru(t)&&Dh(e)?Fh(hr(t),e):n=>{const r=$s(n,t);return r===void 0&&r===e?fv(n,t):Vs(e,r)}}function dv(t){const e=gv(t);return e.length===1&&e[0][2]?Fh(e[0][0],e[0][1]):n=>n===t||pv(n,t,e)}function gv(t){const e=Ei(t);let n=e.length;for(;n--;){const r=e[n],i=t[r];e[n]=[r,i,Dh(i)]}return e}function pv(t,e,n,r){let i=n.length;const s=i;if(t==null)return!s;let o;for(t=Object(t);i--;)if(o=n[i],o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1;for(;++i<s;){o=n[i];const u=o[0],l=t[u],d=o[1];if(o[2]){if(l===void 0&&!(u in t))return!1}else{const g=new Ir;if(!Vs(d,l,g))return!1}}return!0}function vv(t){return ru(t)?mv(hr(t)):yv(t)}function mv(t){return e=>e==null?void 0:e[t]}function yv(t){return e=>$s(e,t)}function xv(t){return typeof t=="function"?t:t==null?e=>e:typeof t=="object"?Array.isArray(t)?hv(t[0],t[1]):dv(t):vv(t)}function Hs(){const t=xv;return arguments.length?t(arguments[0]):t}const bv=(t,e,n,r)=>{let i=-1;const s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n},wv=(t,e,n,r,i)=>(i(t,(s,o,u)=>{n=r?(r=!1,s):e(n,s,o,u)}),n);function Av(t,e,n){const r=Array.isArray(t)?bv:wv,i=arguments.length<3;return r(t,e,n,i,su)}const Tv=t=>Array.isArray(t)||vi(t)||!!(t&&t[Symbol.isConcatSpreadable]);function Bh(t,e,n,r,i){let s=-1;const o=t.length;for(n||(n=Tv),i||(i=[]);++s<o;){var u=t[s];e>0&&n(u)?e>1?Bh(u,e-1,n,r,i):i.push(...u):i[i.length]=u}return i}const vi=t=>dn(t)&&en(t)=="[object Arguments]",Sv=t=>typeof t=="number"&&t>-1&&t%1==0&&t<=Number.MAX_SAFE_INTEGER,Pv=(t,e)=>t!=null&&e in Object(t),Ev=(t,e,n)=>{e=Hr(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=hr(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&Sv(i)&&Nh(o,i)&&(Array.isArray(t)||vi(t)))},Cv=t=>t.match(Ip),_v=t=>t.match(wp),Lv=(t,e)=>(Np(t)?_v(t):Cv(t))||[],Mv=(t,e,n)=>{const{length:r}=t;return n=n===void 0?r:n,!e&&n>=r?t:t.slice(e,n)},Ov=Nv("toUpperCase");function Nv(t){return e=>{if(!e)return"";const n=wh(e)?Ah(e):void 0,r=n?n[0]:e[0],i=n?Mv(n,1).join(""):e.slice(1);return r[t]()+i}}class Ir{constructor(e){const n=this.__data__=new yo(e);this.size=n.size}clear(){this.__data__=new yo,this.size=0}delete(e){const n=this.__data__,r=n.delete(e);return this.size=n.size,r}get(e){return this.__data__.get(e)}has(e){return this.__data__.has(e)}set(e,n){let r=this.__data__;if(r instanceof yo){const i=r.__data__;if(i.length<Qa-1)return i.push([e,n]),this.size=++r.size,this;r=this.__data__=new Vh(i)}return r.set(e,n),this.size=r.size,this}}class yo{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(e){const n=this.__data__,r=Yi(n,e);if(r<0)return!1;const i=n.length-1;return r==i?n.pop():n.splice(r,1),--this.size,!0}get(e){const n=this.__data__,r=Yi(n,e);return r<0?void 0:n[r][1]}has(e){return Yi(this.__data__,e)>-1}set(e,n){const r=this.__data__,i=Yi(r,e);return i<0?(++this.size,r.push([e,n])):r[i][1]=n,this}}class Vh{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new hc,map:new Map,string:new hc}}delete(e){const n=ji(this,e).delete(e);return this.size-=n?1:0,n}get(e){return ji(this,e).get(e)}has(e){return ji(this,e).has(e)}set(e,n){const r=ji(this,e),i=r.size;return r.set(e,n),this.size+=r.size==i?0:1,this}}class hc{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(e){const n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}get(e){const r=this.__data__[e];return r===zo?void 0:r}has(e){return this.__data__[e]!==void 0}set(e,n){const r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n===void 0?zo:n,this}}class mi{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.__data__=new Vh;++n<r;)this.add(e[n])}add(e){return this.__data__.set(e,zo),this}has(e){return this.__data__.has(e)}}mi.prototype.push=mi.prototype.add;const kv=function(t){var e=Object.prototype.toString;return t===!0||t===!1||!!t&&typeof t=="object"&&e.call(t)===Is},te=function(t){return!!t&&(typeof t=="object"||typeof t=="function")},ze=function(t){var e=Object.prototype.toString;return typeof t=="number"||!!t&&typeof t=="object"&&e.call(t)===Rs},Pe=function(t){var e=Object.prototype.toString;return typeof t=="string"||!!t&&typeof t=="object"&&e.call(t)===Ds},Et=Ih((t,e)=>{if(Bs(e)||nn(e)){_i(e,Ei(e),t);return}for(var n in e)hasOwnProperty.call(e,n)&&Ci(t,n,e[n])}),Iv=(t,...e)=>{let n=-1,r=e.length;const i=r>2?e[2]:void 0;for(i&&gs(e[0],e[1],i)&&(r=1);++n<r;){const s=e[n];if(s==null)continue;const o=Object.keys(s),u=o.length;let l=-1;for(;++l<u;){const d=o[l],g=t[d];(g===void 0||$r(g,Object.prototype[d])&&!hasOwnProperty.call(t,d))&&(t[d]=s[d])}}return t},Ze=Iv,Rv=function(...e){return e.push(void 0,Rh),ye.apply(void 0,e)},ou=Rv,Tn=(t,e,...n)=>{let r=-1;const i=typeof e=="function",s=nn(t)?new Array(t.length):[];return su(t,o=>{s[++r]=i?e.apply(o,n):Dv(o,e,...n)}),s},Dv=(t,e,...n)=>{e=Hr(e,t),t=Oh(t,e);const r=t==null?t:t[hr(av(e))];return r==null?void 0:r.apply(t,n)},zh=(t,e,n)=>{let r=0,i=t==null?0:t.length;if(i==0)return 0;n=Hs(n,2),e=n(e);const s=e!==e,o=e===null,u=Vr(e),l=e===void 0;for(;r<i;){let d;const g=Math.floor((r+i)/2),h=n(t[g]),b=h!==void 0,P=h===null,A=h===h,E=Vr(h);s?d=A:l?d=A&&b:o?d=A&&b&&!P:u?d=A&&b&&!P&&!E:P||E?d=!1:d=h<e,d?r=g+1:i=g}return Math.min(i,kp)},Mi=(t,e)=>{let n=-1,r=(l,d)=>!!(l==null?0:l.length)&&l.indexOf(d)>-1;e=Hs(e,2);let i=!0;const{length:s}=t,o=[];let u=o;if(s>=Qa){const l=e?null:uv(t);if(l)return zs(l);i=!1,r=(d,g)=>d.has(g),u=new mi}else u=e?[]:o;t:for(;++n<s;){let l=t[n];const d=e?e(l):l;if(l=l!==0?l:0,i&&d===d){let g=u.length;for(;g--;)if(u[g]===d)continue t;e&&u.push(d),o.push(l)}else r(u,d)||(u!==o&&u.push(d),o.push(l))}return o},bn=t=>kr(t),Je=t=>kr(t,!0),On=t=>{if(t==null)return!0;if(nn(t)&&(Array.isArray(t)||typeof t=="string"||typeof t.splice=="function"||Li(t)||vi(t)))return!t.length;const e=en(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(Bs(t))return!Bp(t).length;for(const n in t)if(hasOwnProperty.call(t,n))return!1;return!0},_r=(t,e)=>Vs(t,e),ue=t=>typeof t=="function",ge=t=>{if(!dn(t)||en(t)!="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Yt=t=>{if(!t)return[];if(nn(t))return Pe(t)?Ah(t):tu(t);if(Symbol.iterator&&Symbol.iterator in Object(t)){const r=t[Symbol.iterator]();let i;const s=[];for(;!(i=r.next()).done;)s.push(i.value);return s}const e=en(t);return(e==Si?Lh:e==Pi?zs:Fp)(t)};function Fv(t,e,n){if(typeof t!="function")throw new TypeError("Expected a function");let r,i,s,o,u,l,d=0,g=!1,h=!1,b=!0;const P=!e&&e!==0&&window&&typeof window.requestAnimationFrame=="function";e=+e||0,te(n)&&(g=!!n.leading,h="maxWait"in n,s=h?Math.max(+n.maxWait||0,e):s,b="trailing"in n?!!n.trailing:b);function A(c){const w=r,T=i;return r=i=void 0,d=c,o=t.apply(T,w),o}function E(c,w){return P?(window.cancelAnimationFrame(u),window.requestAnimationFrame(c)):setTimeout(c,w)}function N(c){if(P)return window.cancelAnimationFrame(c);clearTimeout(c)}function L(c){return d=c,u=E(j,e),g?A(c):o}function $(c){const w=c-l,T=c-d,_=e-w;return h?Math.min(_,s-T):_}function Y(c){const w=c-l,T=c-d;return l===void 0||w>=e||w<0||h&&T>=s}function j(){const c=Date.now();if(Y(c))return nt(c);u=E(j,$(c))}function nt(c){return u=void 0,b&&r?A(c):(r=i=void 0,o)}function ut(...c){const w=Date.now(),T=Y(w);if(r=c,i=this,l=w,T){if(u===void 0)return L(l);if(h)return u=E(j,e),A(l)}return u===void 0&&(u=E(j,e)),o}return ut.cancel=()=>{u!==void 0&&N(u),d=0,r=l=i=u=void 0},ut.flush=()=>u===void 0?o:nt(Date.now()),ut.pending=()=>u!==void 0,ut}const Bv=(t,e)=>(e=Hs(e,2),Av(t,(n,r,i)=>(i=e(r),hasOwnProperty.call(n,i)?n[i].push(r):Ci(n,i,[r]),n),{})),xo=(t,e=[])=>{if(t==null)return[];const n=e.length;return n>1&&gs(t,e[0],e[1])?e=[]:n>2&&gs(e[0],e[1],e[2])&&(e=[e[0]]),Array.isArray(e)||(e=[Hs(e,2)]),cv(t,e.flat(1),[])},Vv=t=>(t==null?0:t.length)?Bh(t,1/0):[],dc=(t,...e)=>nn(t)?Mh(t,e):[],zv=(t,...e)=>dn(t)&&nn(t)?Mh(t,e.flat(1)):[],qo=(...t)=>{const e=t.flat(1);return Mi(e)},Hn=(t,e)=>{if(t==null)return!1;typeof e=="string"&&(e=e.split("."));let n=-1,r=t;for(;++n<e.length;){if(!r||!hasOwnProperty.call(r,e[n]))return!1;r=r[e[n]]}return!0},pe=(t,e,n)=>{e=Hr(e,t);let r=-1,i=e.length;for(i||(i=1,t=void 0);++r<i;){let s=t==null?void 0:t[hr(e[r])];s===void 0&&(r=i,s=n),t=typeof s=="function"?s.call(t):s}return t},yi=(t,...e)=>{let n={};if(t==null)return n;let r=!1;e=e.flat(1).map(s=>(s=Hr(s,t),r||(r=s.length>1),s)),_i(t,Ch(t),n),r&&(n=kr(n,!0,!0,!0,s=>ge(s)?void 0:s));let i=e.length;for(;i--;)ev(n,e[i]);return n},Ke=(t,e=n=>n)=>{let n=-1;const r=Object(t),i=nn(t)?Th(t,!0):kh(t);let s=i.length;for(;s--;){const o=i[++n];if(e(r[o],o,r)===!1)break}},$v=(t="")=>Lv(`${t}`.replace(/['\u2019]/g,"")).reduce((e,n,r)=>(n=n.toLowerCase(),e+(r?Ov(n):n)),"");let Hv=0;const qv=(t="")=>{const e=++Hv;return`${t}`+e},ye=Ih((t,e,n,r)=>{iu(t,e,n,r)},!0),cn=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,Pn.classNamePrefix.length)!==Pn.classNamePrefix&&(e=Pn.classNamePrefix+e),e}).join(" ")},Gv=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,Pn.classNamePrefix.length)===Pn.classNamePrefix&&(e=e.substr(Pn.classNamePrefix.length)),e}).join(" ")},ps=function(t,e){const n={},r={},i=rt.namespace.svg,s=e||i,o=document.createDocumentFragment(),u=function(l,d,g){for(let h=0;h<l.length;h++){const b=l[h];if(typeof b=="string"){const j=document.createTextNode(b);d.appendChild(j);continue}if(!b.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const P=b.tagName;let A;b.hasOwnProperty("namespaceURI")&&(g=b.namespaceURI),A=document.createElementNS(g,P);const E=g===i,N=E?rt:Wt,L=b.attributes;L&&N(A).attr(L);const $=b.style;if($&&Wt(A).css($),b.hasOwnProperty("className")){const j=b.className;E?A.className.baseVal=j:A.className=j}if(b.hasOwnProperty("textContent")&&(A.textContent=b.textContent),b.hasOwnProperty("selector")){const j=b.selector;if(n[j])throw new Error("json-dom-parser: selector must be unique");n[j]=A,N(A).attr("joint-selector",j)}if(b.hasOwnProperty("groupSelector")){let j=b.groupSelector;Array.isArray(j)||(j=[j]);for(let nt=0;nt<j.length;nt++){const ut=j[nt];let c=r[ut];c||(c=r[ut]=[]),c.push(A)}}d.appendChild(A);const Y=b.children;Array.isArray(Y)&&u(Y,A,g)}};return u(t,o,s),{fragment:o,selectors:n,groupSelectors:r}},Xi=function(t){let e=0;if(t.length===0)return e;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return e},xi=function(t,e,n){for(var r=Array.isArray(e)?e:e.split(n||"/"),i,s=0,o=r.length;s<o;)if(i=r[s++],Object(t)===t&&i in t)t=t[i];else return;return t},$h=function(t,e){return typeof e!="string"&&typeof e!="number"&&(e=String(e)),!(e==="constructor"&&typeof t[e]=="function"||e==="__proto__")},gc=function(t,e,n,r){const i=Array.isArray(e)?e:e.split(r||"/"),s=i.length-1;let o=t,u=0;for(;u<s;u++){const l=i[u];if(!$h(o,l))return t;o=o[l]||(o[l]={})}return o[i[s]]=n,t},pc=function(t,e,n){const r=Array.isArray(e)?e:e.split(n),i=r.length-1;let s=t,o=0;for(;o<i;o++){const u=r[o];if(!$h(s,u))return t;const l=s[u];if(!l)return t;s=l}return delete s[r[i]],t},Uv=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t==="x"?e:e&3|8;return n.toString(16)})},Lr=function(t){return Lr.id=Lr.id||1,t===void 0?"j_"+Lr.id++:(t.id=t.id===void 0?"j_"+Lr.id++:t.id,t.id)},Wv=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},we=function(t){if(t.normalized)return t;const{originalEvent:e,target:n}=t,r=e&&e.changedTouches&&e.changedTouches[0];if(r)for(let i in r)t[i]===void 0&&(t[i]=r[i]);if(n){const i=n.correspondingUseElement;i&&(t.target=i)}return t.normalized=!0,t},Yv=function(t){let i=0,s=0,o=0,u=0;return"detail"in t&&(s=t.detail),"wheelDelta"in t&&(s=-t.wheelDelta/120),"wheelDeltaY"in t&&(s=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(i=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=s,s=0),o="deltaX"in t?t.deltaX:i*10,u="deltaY"in t?t.deltaY:s*10,(o||u)&&t.deltaMode&&(t.deltaMode==1?(o*=40,u*=40):(o*=800,u*=800)),t.deltaX===0&&t.deltaY!==0&&t.shiftKey&&(o=u,u=0,i=s,s=0),o&&!i&&(i=o<1?-1:1),u&&!s&&(s=u<1?-1:1),{spinX:i,spinY:s,deltaX:o,deltaY:u}},jv=function(t,e){return t>e?e:t<-e?-e:t},Go=function(){var t;if(typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(n){var r=new Date().getTime(),i=Math.max(0,16-(r-e)),s=setTimeout(function(){n(r+i)},i);return e=r+i,s}}return function(n,r,...i){return t(r!==void 0?n.bind(r,...i):n)}}(),Uo=function(){var t,e=typeof window<"u";return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?t.bind(window):t}(),qe=function(t){return Pe(t)&&t.slice(-1)==="%"},Xv=function(t,e){function n(u){var l=new RegExp("(?:\\d+(?:\\.\\d+)*)("+u+")$").exec(t);return l?l[1]:null}var r=parseFloat(t);if(Number.isNaN(r))return null;var i={};i.value=r;var s;if(e==null)s="[A-Za-z]*";else if(Array.isArray(e)){if(e.length===0)return null;s=e.join("|")}else Pe(e)&&(s=e);var o=n(s);return o===null?null:(i.unit=o,i)},oi=0;function Zv(t,e){const n=t.split(e);let r=1;for(let i=0,s=n.length-1;i<s;i++){const o=[];(i>0||n[0]!=="")&&o.push(oi),o.push(e),(i<s-1||n[s]!=="")&&o.push(oi),n.splice(r,0,...o),r+=o.length+1}return n.filter(i=>i!=="")}function vc(t,e){if(t===null)return e.getBBox().height;switch(t.unit){case"em":return e.getBBox().height*t.value;case"px":case"":return t.value}}const Jv=function(t,e,n={},r={}){var i=e.width,s=e.height,o=r.svgDocument||rt("svg").node,u=rt("tspan").node,l=rt("text").attr(n).append(u).node,d=document.createTextNode("");l.style.opacity=0,l.style.display="block",u.style.display="block",u.appendChild(d),o.appendChild(l),r.svgDocument||document.body.appendChild(o);const g=r.preserveSpaces,h=" ",b=r.separator||r.separator===""?r.separator:h,P=typeof b=="string"?b:h;var A=r.eol||`
`,E=r.hyphen?new RegExp(r.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,N=r.maxLineCount;ze(N)||(N=1/0);var L=t.split(b),$=[],Y=[],j,nt,ut;g&&rt(u).attr("xml:space","preserve");for(var c=0,w=0,T=L.length;c<T;c++){var _=L[c];if(!(!_&&!g)&&typeof _=="string"){var F=!1;if(A&&_.indexOf(A)>=0)if(_.length>1){const Ct=Zv(L[c],A);L.splice(c,1,...Ct),c--,T=L.length;continue}else{if(g&&typeof L[c-1]=="string"){L.splice(c,oi,"",oi),T+=2,c--;continue}Y[++w]=!g||typeof L[c+1]=="string"?"":void 0,F=!0}if(!F){let Ct;if(g?Ct=Y[w]!==void 0?Y[w]+P+_:_:Ct=Y[w]?Y[w]+P+_:_,d.data=Ct,u.getComputedTextLength()<=i)Y[w]=Ct,(j||nt)&&($[w++]=!0,j=0,nt=0);else{if(!Y[w]||j){var H=!!j;if(j=_.length-1,H||!j){if(!j){if(!Y[w]){Y=[];break}L.splice(c,2,_+L[c+1]),T--,$[w++]=!0,c--;continue}L[c]=_.substring(0,j);const St=L[c+1];L[c+1]=_.substring(j)+(St===void 0||St===oi?"":St)}else{if(nt)L.splice(c,2,L[c]+L[c+1]),nt=0;else{var V=_.search(E);V>-1&&V!==_.length-1&&V!==0&&(nt=V+1,j=0),L.splice(c,1,_.substring(0,nt||j),_.substring(nt||j)),T++}w&&!$[w-1]&&w--}(!g||Y[w]!=="")&&c--;continue}w++,c--}}var ot=null;if(Y.length>N)ot=N-1;else if(s!==void 0){if(ut===void 0&&d.data!=="")if(n.lineHeight==="auto")ut=vc({value:1.5,unit:"em"},l);else{const Ct=Xv(n.lineHeight,["em","px",""]);ut=vc(Ct,l)}ut*Y.length>s&&(ot=Math.floor(s/ut)-1)}if(ot!==null){Y.splice(ot+1);var ht=r.ellipsis;if(!ht||ot<0)break;typeof ht!="string"&&(ht="…");var q=Y[ot];if(!q&&!F)break;var G=q.length,X,U;do{if(U=q[G],X=q.substring(0,G),U?U.match(b)&&(X+=U):X+=P,X+=ht,d.data=X,u.getComputedTextLength()<=i){Y[ot]=X;break}G--}while(G>=0);break}}}return r.svgDocument?o.removeChild(l):document.body.removeChild(o),Y.join(A)},H0=function(t){var e=Wt(Wt.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var n=this;Wt.each(n.attributes,function(){var r=this,i=r.name,s=r.value;(i.startsWith("on")||s.startsWith("javascript:")||s.startsWith("data:")||s.startsWith("vbscript:"))&&Wt(n).removeAttr(i)})}),e.html()},Kv=function(t,e){var n=Wt(t),r=n.map(function(){var i=this,s=i.parentNode,o=s.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,o),s.removeChild(o)}});return Array.prototype.sort.call(n,e).each(function(i){r[i].call(this)})},ar=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var n,r,i,s;return n=r=i=s=0,isFinite(t.vertical)&&(n=i=+t.vertical),isFinite(t.horizontal)&&(r=s=+t.horizontal),isFinite(t.top)&&(n=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(s=+t.left),{top:n,right:r,bottom:i,left:s}},Qv={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return .5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(r){var i=t(r);return i<e?e:i>n?n:i}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},Hh={number:function(t,e){var n=e-t;return function(r){return t+n*r}},object:function(t,e){var n=Object.keys(t);return function(r){var i,s,o={};for(i=n.length-1;i!=-1;i--)s=n[i],o[s]=t[s]+(e[s]-t[s])*r;return o}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),i=n&255,s=(r&255)-i,o=n&65280,u=(r&65280)-o,l=n&16711680,d=(r&16711680)-l;return function(g){var h=i+s*g&255,b=o+u*g&65280,P=l+d*g&16711680;return"#"+(1<<24|h|b|P).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),i=n.exec(e),s=i[1].indexOf("."),o=s>0?i[1].length-s-1:0;t=+r[1];var u=+i[1]-t,l=r[2];return function(d){return(t+u*d).toFixed(o)+l}}},tm={outline:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',n=Number.isFinite(t.margin)?t.margin:2,r=Number.isFinite(t.width)?t.width:1;return Me(e)({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return Me(e)({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return Me('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Me(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Me('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Me('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Me('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return Me('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Me('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return Me('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Me('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},Me=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(r){for(var i=Array.from(arguments),s=i.slice(1,4).find(function(l){return!!l}),o=s.split("."),u=n[o.shift()];u!==void 0&&o.length;)u=u[o.shift()];return u!==void 0?u:""})}};function qh(t){t=Mi(t);const e=Yt(t).reduce(function(n,r){return n[r.id]=r.clone(),n},{});return Yt(t).forEach(function(n){const r=e[n.id];if(r.isLink()){const o=r.source(),u=r.target();o.id&&e[o.id]&&r.prop("source/id",e[o.id].id),u.id&&e[u.id]&&r.prop("target/id",e[u.id].id)}const i=n.get("parent");i&&e[i]&&r.set("parent",e[i].id);const s=Yt(n.get("embeds")).reduce(function(o,u){return e[u]&&o.push(e[u].id),o},[]);On(s)||r.set("embeds",s)}),e}const em=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],nm=em.reduce((t,e)=>(t[e]=!0,t),{}),rm={qualify:function(t){return ge(t)},set:function(t,e,n){Object.keys(t).forEach(function(r){if(nm[r]&&r in n){const i=t[r];n.tagName==="SELECT"&&Array.isArray(i)?Array.from(n.options).forEach(function(s,o){s.selected=i.includes(s.value)}):n[r]=i}})}};function zn(t,e){return function(n,r){var i=qe(n);n=parseFloat(n),i&&(n/=100);var s={};if(isFinite(n)){var o=i||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);s[t]=o}return s}}function Zi(t,e,n){return function(r,i){var s=qe(r);r=parseFloat(r),s&&(r/=100);var o;if(isFinite(r)){var u=i[n]();s||r>0&&r<1?o=u[t]+i[e]*r:o=u[t]+r}var l=D();return l[t]=o||0,l}}function mc(t,e,n){return function(r,i){var s;r==="middle"?s=i[e]/2:r===n?s=i[e]:isFinite(r)?s=r>-1&&r<1?-i[e]*r:-r:qe(r)?s=i[e]*parseFloat(r)/100:s=0;var o=D();return o[t]=-(i[t]+s),o}}function Gh(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(i,s,o){var u=Wt(o),l=u.data(n);if(!l||l.value!==i){var d=t(i);l={value:i,shape:d,shapeBBox:d.bbox()},u.data(n,l)}var g=l.shape.clone(),h=l.shapeBBox.clone(),b=h.origin(),P=s.origin();h.x=P.x,h.y=P.y;var A=s.maxRectScaleToFit(h,P),E=h.width===0||s.width===0?1:A.sx,N=h.height===0||s.height===0?1:A.sy;return g.scale(E,N,b),r&&g.translate(-b.x,-b.y),g}}function yc(t){function e(r){return new wt(rt.normalizePathData(r))}var n=Gh(e,t);return function(r,i,s){var o=n(r,i,s);return{d:o.serialize()}}}function xc(t){var e=Gh(oe,t);return function(n,r,i){var s=e(n,r,i);return{points:s.serialize()}}}function Ji(t,e){var n=new D(1,0);return function(r){var i,s,o=this[t](r);return o?(s=e.rotate?o.vector().vectorAngle(n):0,i=o.start):(i=this.path.start,s=0),s===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+s+")"}}}function bc(t){return function(n,r,i){const s=rt(i);s.attr(t)!==n&&s.attr(t,n)}}function wr(t,e,n){return n.text!==void 0}function ei(){return this.model.isLink()}function bo(t){var e={},n=t.stroke;typeof n=="string"&&(e.stroke=n,e.fill=n);var r=t.strokeOpacity;return r===void 0&&(r=t["stroke-opacity"]),r===void 0&&(r=t.opacity),r!==void 0&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function wc(t){const{paper:e}=this;return`url(#${t.type==="pattern"?e.definePattern(t):e.defineGradient(t)})`}const Rt={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:bc("href")},xlinkHref:{set:bc("xlink:href")},filter:{qualify:ge,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:ge,set:wc},stroke:{qualify:ge,set:wc},sourceMarker:{qualify:ge,set:function(t,e,n,r){return t=Et(bo(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:ge,set:function(t,e,n,r){return t=Et(bo(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:ge,set:function(t,e,n,r){return t=Et(bo(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!ge(n.textWrap)},set:function(t,e,n,r){const i=Wt(n),s="joint-text",o=i.data(s),{lineHeight:u,annotations:l,textVerticalAnchor:d,eol:g,displayEmpty:h}=r;let b=r.textPath,P=r.x;wn(P)&&(P=An(P,e));let A=r["font-size"]||r.fontSize;wn(A)&&(A=An(A,e));const E=JSON.stringify([t,u,l,d,g,h,b,P,A]);if(o===void 0||o!==E){if(A&&n.setAttribute("font-size",A),te(b)){const N=b.selector;if(typeof N=="string"){const[L]=this.findBySelector(N);L instanceof SVGPathElement&&(b=Et({"xlink:href":"#"+L.id},b))}}rt(n).text(""+t,{lineHeight:u,annotations:l,textPath:b,x:P,textVerticalAnchor:d,eol:g,displayEmpty:h}),i.data(s,E)}}},textWrap:{qualify:ge,set:function(t,e,n,r){var i={},s=t.width||0;qe(s)?i.width=e.width*parseFloat(s)/100:wn(s)?i.width=Number(An(s,e)):t.width===null?i.width=1/0:s<=0?i.width=e.width+s:i.width=s;var o=t.height||0;qe(o)?i.height=e.height*parseFloat(o)/100:wn(o)?i.height=Number(An(o,e)):t.height===null||(o<=0?i.height=e.height+o:i.height=o);var u,l=t.text;if(l===void 0&&(l=r.text),l!==void 0){const d=t.breakText||Jv,g=r["font-size"]||r.fontSize;u=d(""+l,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":wn(g)?An(g,e):g,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,separator:t.separator,maxLineCount:t.maxLineCount,preserveSpaces:t.preserveSpaces})}else u="";Rt.text.set.call(this,u,e,n,r)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var r=Wt(n),i="joint-title",s=r.data(i);if(s===void 0||s!==t){if(r.data(i,t),n.tagName==="title"){n.textContent=t;return}var o=n.firstElementChild;if(o&&o.tagName==="title")o.textContent=t;else{var u=document.createElementNS(n.namespaceURI,"title");u.textContent=t,n.insertBefore(u,o)}}}},lineHeight:{qualify:wr},textVerticalAnchor:{qualify:wr},textPath:{qualify:wr},annotations:{qualify:wr},eol:{qualify:wr},displayEmpty:{qualify:wr},port:{set:function(t){return t===null||t.id===void 0?t:t.id}},style:{qualify:ge,set:function(t,e,n){Wt(n).css(t)}},html:{set:function(t,e,n){Wt(n).html(t+"")}},props:rm,ref:{},refX:{position:Zi("x","width","origin")},refY:{position:Zi("y","height","origin")},refDx:{position:Zi("x","width","corner")},refDy:{position:Zi("y","height","corner")},refWidth:{set:zn("width","width")},refHeight:{set:zn("height","height")},refRx:{set:zn("rx","width")},refRy:{set:zn("ry","height")},refRInscribed:{set:function(t){var e=zn(t,"width"),n=zn(t,"height");return function(r,i){var s=i.height>i.width?e:n;return s(r,i)}}("r")},refRCircumscribed:{set:function(t,e){var n=qe(t);t=parseFloat(t),n&&(t/=100);var r=Math.sqrt(e.height*e.height+e.width*e.width),i;return isFinite(t)&&(n||t>=0&&t<=1?i=t*r:i=Math.max(t+r,0)),{r:i}}},refCx:{set:zn("cx","width")},refCy:{set:zn("cy","height")},xAlignment:{offset:mc("x","width","right")},yAlignment:{offset:mc("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:yc({resetOffset:!0})},refDKeepOffset:{set:yc({resetOffset:!1})},refPointsResetOffset:{set:xc({resetOffset:!0})},refPointsKeepOffset:{set:xc({resetOffset:!1})},connection:{qualify:ei,set:function({stubs:t=0}){let e;if(isFinite(t)&&t!==0){let n;t<0?n=(this.getConnectionLength()+t)/2:n=t;const r=this.getConnection(),i=this.getConnectionSubdivisions(),s=r.divideAtLength(n,{segmentSubdivisions:i}),o=r.divideAtLength(-n,{segmentSubdivisions:i});s&&o&&(e=`${s[0].serialize()} ${o[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:ei,set:Ji("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:ei,set:Ji("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:ei,set:Ji("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:ei,set:Ji("getTangentAtRatio",{rotate:!1})}};Rt["xlink:href"]=Rt.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(t=>{Rt[t]={qualify:wn,set:function(n,r){return{[t]:An(n,r)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(t=>{Rt[t]={qualify:wn,set:function(n,r){return{[t]:Math.max(0,An(n,r))}}}});Rt.refR=Rt.refRInscribed;Rt.refD=Rt.refDResetOffset;Rt.refPoints=Rt.refPointsResetOffset;Rt.atConnectionLength=Rt.atConnectionLengthKeepGradient;Rt.atConnectionRatio=Rt.atConnectionRatioKeepGradient;Rt.fontSize=Rt["font-size"];Rt.strokeWidth=Rt["stroke-width"];Rt.refX2=Rt.refX;Rt.refY2=Rt.refY;Rt.refWidth2=Rt.refWidth;Rt.refHeight2=Rt.refHeight;Rt["ref-x"]=Rt.refX;Rt["ref-y"]=Rt.refY;Rt["ref-dy"]=Rt.refDy;Rt["ref-dx"]=Rt.refDx;Rt["ref-width"]=Rt.refWidth;Rt["ref-height"]=Rt.refHeight;Rt["x-alignment"]=Rt.xAlignment;Rt["y-alignment"]=Rt.yAlignment;const Uh=Rt,En=Se.Model.extend({constructor:function(t,e){var n,r=t||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=qv("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=pe(this,"defaults"))&&(r=ye({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){const e=pe(this.constructor.prototype,"defaults").attrs||{},n=this.attributes.attrs,r={};Ke(n,function(s,o){const u=e[o];Ke(s,function(l,d){te(l)&&!Array.isArray(l)?Ke(l,function(g,h){(!u||!u[d]||!_r(u[d][h],g))&&(r[o]=r[o]||{},(r[o][d]||(r[o][d]={}))[h]=g)}):(!u||!_r(u[d],l))&&(r[o]=r[o]||{},r[o][d]=l)})});const i=Je(yi(this.attributes,"attrs"));return i.attrs=r,i},initialize:function(t){const e=this.getIdAttribute();(!t||t[e]===void 0)&&this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return Uv()},processPorts:function(){var t=this.ports,e={};Ke(this.get("attrs"),function(s,o){s&&s.port&&(s.port.id!==void 0?e[s.port.id]=s.port:e[s.port]={id:s.port})});var n={};if(Ke(t,function(s,o){e[o]||(n[o]=!0)}),this.graph&&!On(n)){var r=this.graph.getConnectedLinks(this,{inbound:!0});r.forEach(function(s){n[s.get("target").port]&&s.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(s){n[s.get("source").port]&&s.remove()})}this.ports=e},remove:function(t={}){const{graph:e,collection:n}=this;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const i=this.getEmbeddedCells();for(let s=0,o=i.length;s<o;s++){const u=i[s];u&&u.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=Ze(t||{},{foregroundEmbeds:!0});let n;t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1,sortSiblings:t.foregroundEmbeds}),n.unshift(this)):n=[this];const r=t.foregroundEmbeds?n:xo(n,l=>l.z());let s=e.maxZIndex()-n.length+1;const o=e.get("cells");let u=o.indexOf(r[0])!==o.length-n.length;u||(u=r.some(function(l,d){return l.z()!==s+d})),u&&(this.startBatch("to-front"),s=s+n.length,r.forEach(function(l,d){l.set("z",s+d,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=Ze(t||{},{foregroundEmbeds:!0});let r;t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1,sortSiblings:t.foregroundEmbeds}),r.unshift(this)):r=[this];const i=t.foregroundEmbeds?r:xo(r,u=>u.z());let s=e.minZIndex();var n=e.get("cells");let o=n.indexOf(i[0])!==0;o||(o=i.some(function(u,l){return u.z()!==s+l})),o&&(this.startBatch("to-back"),s-=r.length,i.forEach(function(u,l){u.set("z",s+l,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return t===void 0?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){const n=Array.isArray(t)?t:[t];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(n.some(r=>r.isEmbedded()&&this.id!==r.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,e),this},unembed:function(t,e){const n=Array.isArray(t)?t:[t];return this._unembedCells(n,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(t,e){const n="embed";this.startBatch(n);const r=Et([],this.get("embeds"));t.forEach(i=>{r[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,e)}),this.set("embeds",Mi(r),e),this.stopBatch(n)},_unembedCells:function(t,e){const n="unembed";this.startBatch(n),t.forEach(r=>r.unset("parent",e)),this.set("embeds",dc(this.get("embeds"),...t.map(r=>r.id)),e),this.stopBatch(n)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},!this.graph)return[];if(t.deep)return t.breadthFirst?this._getEmbeddedCellsBfs(t.sortSiblings):this._getEmbeddedCellsDfs(t.sortSiblings);const e=this.get("embeds");if(On(e))return[];let n=e.map(this.graph.getCell,this.graph);return t.sortSiblings&&(n=xo(n,r=>r.z())),n},_getEmbeddedCellsBfs:function(t){const e=[],n=[];for(n.push(this);n.length>0;){const r=n.shift();e.push(r);const i=r.getEmbeddedCells({sortSiblings:t});n.push(...i)}return e.shift(),e},_getEmbeddedCellsDfs:function(t){const e=[],n=[];for(n.push(this);n.length>0;){const r=n.pop();e.push(r);const i=r.getEmbeddedCells({sortSiblings:t});for(let s=i.length-1;s>=0;--s)n.push(i[s])}return e.shift(),e},isEmbeddedIn:function(t,e){var n=Pe(t)?t:t.id,r=this.parent();if(e=Et({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}else return r===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if(t=t||{},t.deep)return Yt(qh([this].concat(this.getEmbeddedCells({deep:!0}))));var e=Se.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var r="/",i=Pe(t);if(i||Array.isArray(t))if(arguments.length>1){var s,o;i?(s=t,o=s.split("/")):(s=t.join(r),o=t.slice());var u=o[0],l=o.length;const Y=n||{};Y.propertyPath=s,Y.propertyValue=e,Y.propertyPathArray=o,"rewrite"in Y||(Y.rewrite=!1);for(var d={},g=d,h=u,b=1;b<l;b++){var P=o[b],A=Number.isFinite(i?Number(P):P);g=g[h]=A?[]:{},h=P}d=gc(d,o,e,"/");var E=ye({},this.attributes);Y.rewrite&&pc(E,s,"/");var N=ye(E,d);return this.set(u,N[u],Y)}else return xi(this.attributes,t,r);const L=e||{};L.propertyPath=null,L.propertyValue=t,L.propertyPathArray=[],"rewrite"in L||(L.rewrite=!1);const $={};for(const Y in t){const{changedValue:j}=ye({},{changedValue:this.attributes[Y]},{changedValue:t[Y]});$[Y]=j}return this.set($,L)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),r=n[0];if(r==="attrs"&&(e.dirty=!0),n.length===1)return this.unset(t,e);var i=n.slice(1),s=this.get(r);return s==null?this:(s=Je(s),pc(s,i,"/"),this.set(r,s,e))},attr:function(t,e,n){var r=Array.from(arguments);return r.length===0?this.get("attrs"):(Array.isArray(t)?r[0]=["attrs"].concat(t):Pe(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/";var i={duration:100,delay:10,timingFunction:Qv.linear,valueFunction:Hh.number};n=Et(i,n);var s=0,o,u=(function(h){var b,P,A;s=s||h,h-=s,P=h/n.duration,P<1?this._transitionIds[t]=b=Go(u):(P=1,delete this._transitionIds[t]),A=o(n.timingFunction(P)),n.transitionId=b,this.prop(t,A,n),b||this.trigger("transition:end",this,t)}).bind(this);const{_scheduledTransitionIds:l}=this;let d;var g=h=>{l[t]&&(l[t]=dc(l[t],d),l[t].length===0&&delete l[t]),this.stopPendingTransitions(t,r),o=n.valueFunction(xi(this.attributes,t,r),e),this._transitionIds[t]=Go(h),this.trigger("transition:start",this,t)};return d=setTimeout(g,n.delay,u),l[t]||(l[t]=[]),l[t].push(d),d},getTransitions:function(){return qo(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(t){const i=t.split(e);r=r.filter(s=>_r(i,s.split(e).slice(0,i.length)))}return r.forEach(i=>{n[i].forEach(o=>clearTimeout(o)),delete n[i]}),this},stopPendingTransitions(t,e="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(t){const i=t.split(e);r=r.filter(s=>_r(i,s.split(e).slice(0,i.length)))}r.forEach(i=>{const s=n[i];Uo(s),delete n[i],this.trigger("transition:end",this,i)})},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Et({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Et({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)!t.hasOwnProperty(n)||!this.hasChanged(n)||(e|=t[n]);return e},angle:function(){return 0},position:function(){return new D(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new D},getBBox:function(){return new pt(0,0,0,0)},getPointRotatedAroundCenter(t,e,n){const r=new D(e,n);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,n=Uh;return e&&e[t]||n[t]},define:function(t,e,n,r){n=Et({defaults:ou({type:t},e,this.prototype.defaults)},n);var i=this.extend(n,r);return typeof joint<"u"&&Hn(joint,"shapes")&&gc(joint.shapes,t,i,"."),i}}),im=function(t,e,n){if(Pe(n)){if(!Wo[n])throw new Error('Unknown wrapper: "'+n+'"');n=Wo[n]}if(!ue(n))throw new Error("Wrapper must be a function.");Yt(e).forEach(function(r){t[r]=n(t[r])})},Wo={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],i=n>1&&e[n-1]||{};return Array.isArray(r)||(i instanceof En?r=e:r instanceof En&&(e.length>1&&e.pop(),r=e)),i instanceof En&&(i={}),t.call(this,r,i)}}},he={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Wh(t,e){const n=new pt(t);switch(e){case void 0:throw new Error("Position required");case he.LEFT:case"leftMiddle":return n.leftMiddle();case he.RIGHT:case"rightMiddle":return n.rightMiddle();case he.TOP:case"topMiddle":return n.topMiddle();case he.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case he.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case he.TOP_RIGHT:case"topRight":return n.topRight();case he.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case he.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case he.CENTER:return n.center();default:throw new Error(`Unknown position: ${e}`)}}function Yh(t,e,n){var r=t.toJSON();return r.angle=e||0,Ze({},n,r)}function Oi(t,e,n,r){return t.map(function(i,s,o){var u=this.pointAt((s+.5)/o.length);return(i.dx||i.dy)&&u.offset(i.dx||0,i.dy||0),Yh(u.round(),0,au(r,i))},rr(e,n))}function jh(t,e,n,r){var i=e.center(),s=e.width/e.height,o=e.topMiddle(),u=Ne.fromRect(e);return t.map(function(l,d,g){var h=n+r(d,g.length),b=o.clone().rotate(i,-h).scale(s,1,i),P=l.compensateRotation?-u.tangentTheta(b):0;return(l.dx||l.dy)&&b.offset(l.dx||0,l.dy||0),l.dr&&b.move(i,l.dr),Yh(b.round(),P,au(e,l))})}function au(t,e){let{x:n,y:r,angle:i}=e;return qe(n)?n=parseFloat(n)/100*t.width:wn(n)&&(n=Number(An(n,t))),qe(r)?r=parseFloat(r)/100*t.height:wn(r)&&(r=Number(An(r,t))),{x:n,y:r,angle:i}}function Yo(t,e){const{x:n,y:r}=au(t,e);return new D(n||0,r||0)}const sm=function(t,e){return t.map(n=>{const r=Yo(e,n).round().toJSON();return r.angle=n.angle||0,r})},om=function(t,e,n){return n.fn(t,e,n)},am=function(t,e,n){var r=Yo(e,n.start||e.origin()),i=Yo(e,n.end||e.corner());return Oi(t,r,i,e)},um=function(t,e,n){return Oi(t,e.origin(),e.bottomLeft(),e)},cm=function(t,e,n){return Oi(t,e.topRight(),e.corner(),e)},lm=function(t,e,n){return Oi(t,e.origin(),e.topRight(),e)},fm=function(t,e,n){return Oi(t,e.bottomLeft(),e.corner(),e)},hm=function(t,e,n){var r=n.startAngle||0,i=n.step||360/t.length;return jh(t,e,r,function(s){return s*i})},dm=function(t,e,n){var r=n.startAngle||0,i=n.step||20;return jh(t,e,r,function(s,o){return(s+.5-o/2)*i})},gm=Object.freeze(Object.defineProperty({__proto__:null,absolute:sm,bottom:fm,ellipse:dm,ellipseSpread:hm,fn:om,left:um,line:am,right:cm,top:lm},Symbol.toStringTag,{value:"Module"}));function Yn(t,e){return ou({},t,e,{x:0,y:0,angle:0,attrs:{}})}function Xh(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),i=e.theta(t.corner()),s=e.theta(t.topRight());return[n,s,i,r]}function Zh(t,e,n,r){r=Ze({},r,{offset:15});var i=e.center().theta(t),s,o,u,l,d=r.offset,g=0;const[h,b,P,A]=Xh(e);i<b||i>P?(u=".3em",s=d,o=0,l="start"):i<h?(s=0,o=-d,n?(g=-90,l="start",u=".3em"):(l="middle",u="0")):i<A?(u=".3em",s=-d,o=0,l="end"):(s=0,o=d,n?(g=90,l="start",u=".3em"):(l="middle",u=".6em"));var E=Math.round;return Yn(r,{x:E(s),y:E(o),angle:g,attrs:{labelText:{y:u,textAnchor:l}}})}function Jh(t,e,n,r){r=Ze({},r,{offset:15});var i=e.center().theta(t),s,o,u,l,d=r.offset,g=0;const[h,b,P,A]=Xh(e);i<b||i>P?(u=".3em",s=-d,o=0,l="end"):i<h?(s=0,o=d,n?(g=90,l="start",u=".3em"):(l="middle",u=".6em")):i<A?(u=".3em",s=d,o=0,l="start"):(s=0,o=-d,n?(g=-90,l="start",u=".3em"):(l="middle",u="0"));var E=Math.round;return Yn(r,{x:E(s),y:E(o),angle:g,attrs:{labelText:{y:u,textAnchor:l}}})}function Kh(t,e,n){n=Ze({},n,{offset:20});var r=us(0,0),i=-t.theta(r),s=i,o=t.clone().move(r,n.offset).difference(t).round(),u=".3em",l;(i+90)%180===0?(l=e?"end":"middle",!e&&i===-270&&(u="0em")):i>-270&&i<-90?(l="start",s=i-180):l="end";var d=Math.round;return Yn(n,{x:d(o.x),y:d(o.y),angle:e?s:0,attrs:{labelText:{y:u,textAnchor:l}}})}const pm=function(t,e,n){return Yn(n)},vm=function(t,e,n){return Yn(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},mm=function(t,e,n){return Yn(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},ym=function(t,e,n){return Yn(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},xm=function(t,e,n){return Yn(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},bm=function(t,e,n){return Zh(t,e,!0,n)},wm=function(t,e,n){return Zh(t,e,!1,n)},Am=function(t,e,n){return Jh(t,e,!0,n)},Tm=function(t,e,n){return Jh(t,e,!1,n)},Sm=function(t,e,n){return Kh(t.difference(e.center()),!1,n)},Pm=function(t,e,n){return Kh(t.difference(e.center()),!0,n)},Em=Object.freeze(Object.defineProperty({__proto__:null,bottom:xm,inside:Tm,insideOriented:Am,left:vm,manual:pm,outside:wm,outsideOriented:bm,radial:Sm,radialOriented:Pm,right:mm,top:ym},Symbol.toStringTag,{value:"Module"})),qr=En.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){if(t===void 0)return bn(this.get("source"));var r,i,s=t instanceof En;if(s)return r=bn(e)||{},r.id=t.id,i=n,this.set("source",r,i);var o=!ge(t);return o?(r=bn(e)||{},r.x=t.x,r.y=t.y,i=n,this.set("source",r,i)):(r=t,i=e,this.set("source",r,i))},target:function(t,e,n){if(t===void 0)return bn(this.get("target"));var r,i,s=t instanceof En;if(s)return r=bn(e)||{},r.id=t.id,i=n,this.set("target",r,i);var o=!ge(t);return o?(r=bn(e)||{},r.x=t.x,r.y=t.y,i=n,this.set("target",r,i)):(r=t,i=e,this.set("target",r,i))},router:function(t,e,n){if(t===void 0){var r=this.get("router");return r?typeof r=="object"?bn(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof t=="object"||typeof t=="function",s=i?t:{name:t,args:e},o=i?e:n;return this.set("router",s,o)},connector:function(t,e,n){if(t===void 0){var r=this.get("connector");return r?typeof r=="object"?bn(r):r:this.get("smooth")?{name:"smooth"}:null}var i=typeof t=="object"||typeof t=="function",s=i?t:{name:t,args:e},o=i?e:n;return this.set("connector",s,o)},label:function(t,e,n){var r=this.labels();return t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return arguments.length===0?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),i=r.length;return t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1),r.splice(t,0,e),this.labels(r,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&t!==null?t|0:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var r=this.vertices();if(t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(e);return this.prop(["vertices",t],i,n)},vertices:function(t,e){if(arguments.length===0)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],r=0;r<t.length;r++){var i=t[r],s=this._normalizeVertex(i);n.push(s)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),i=r.length;t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1);var s=this._normalizeVertex(e);return r.splice(t,0,s),this.vertices(r,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&t!==null?t|0:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){var e=!ge(t);return e?{x:t.x,y:t.y}:t},translate:function(t,e,n){return n=n||{},n.translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints(function(r){return{x:(r.x||0)+t,y:(r.y||0)+e}},n)},scale:function(t,e,n,r){return this.applyToPoints(function(i){return D(i).scale(t,e,n).toJSON()},r)},applyToPoints:function(t,e){if(!ue(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:i}=this.attributes;r.id||(n.source=t(r)),i.id||(n.target=t(i));var s=this.vertices();return s.length>0&&(n.vertices=s.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new D(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new D(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(D),this.getTargetPoint()];return new oe(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),i=this.getParentCell();n&&r&&(n===r||n.isEmbeddedIn(r)?e=r:r.isEmbeddedIn(n)?e=n:e=this.graph.getCommonAncestor(n,r)),i&&(!e||e.id!==i.id)&&i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:n}=this.attributes,r=e.id,i=n.id;if(!r||!i)return!1;var s=r===i;if(!s&&t.deep&&this.graph){var o=this.getSourceCell(),u=this.getTargetCell();s=o.isEmbeddedIn(u)||u.isEmbeddedIn(o)}return s},getSourceCell:function(){const{graph:t,attributes:e}=this;var n=e.source;return n&&n.id&&t&&t.getCell(n.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var n=e.target;return n&&n.id&&t&&t.getCell(n.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Pe(t)||ze(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}});var Qh=function(t){var e=Je(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=gm,this.portLabelLayoutNamespace=Em,this._init(e)};Qh.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),r=this.getPortsByGroup(t),i=n.position||{},s=i.name,o=this.portLayoutNamespace;o[s]||(s="left");var u=i.args||{},l=r.map(function(h){return h&&h.position&&h.position.args}),d=o[s](l,e,u),g={ports:r,result:[]};return Yt(d).reduce((function(h,b,P){var A=h.ports[P];return h.result.push({portId:A.id,portTransformation:b,labelTransformation:this._getPortLabelLayout(A,D(b),e),portAttrs:A.attrs,portSize:A.size,labelSize:A.label.size}),h}).bind(this),g),g.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return r[i]?r[i](e,n,t.label.position.args):null},_init:function(t){if(te(t.groups))for(var e=Object.keys(t.groups),n=0,r=e.length;n<r;n++){var i=e[n];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var s=Yt(t.items),o=0,u=s.length;o<u;o++)this.ports.push(this._evaluatePort(s[o]))},_evaluateGroup:function(t){return ye(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Et({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=ye({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=ye({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=Et({},n.size,e.size),e},_getZIndex:function(t,e){return ze(e.z)?e.z:ze(t.z)||t.z==="auto"?t.z:"auto"},_createPositionNode:function(t,e){return ye({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var n={},r;ue(t)?(r="fn",n.fn=t):Pe(t)?r=t:t===void 0?r=e?"left":null:Array.isArray(t)?(r="absolute",n.x=t[0],n.y=t[1]):te(t)&&(r=t.name,Et(n,t.args));var i={args:n};return r&&(i.name=r),i},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}};const Cm={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};Yt(t.items).forEach(function(u){e[u.id]=!0});var n=this.previous("ports")||{},r={};Yt(n.items).forEach(function(u){e[u.id]||(r[u.id]=!0)});var i=this.graph;if(i&&!On(r)){var s=i.getConnectedLinks(this,{inbound:!0});s.forEach(function(u){r[u.get("target").port]&&u.remove()});var o=i.getConnectedLinks(this,{outbound:!0});o.forEach(function(u){r[u.get("source").port]&&u.remove()})}},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return this.getPortIndex(t)!==-1},getPorts:function(){return Je(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=Yt(this.prop(["ports","items"])).filter(n=>n.group===t);return Je(e)},getPort:function(t){return Je(Yt(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){var e=this._portSettingsData.getGroupPortsMetrics(t,pt(this.size()));return e.reduce(function(n,r){var i=r.portTransformation;return n[r.portId]={x:i.x,y:i.y,angle:i.angle},n},{})},getPortIndex:function(t){var e=te(t)?t.id:t;return this._isValidPortId(e)?Yt(this.prop("ports/items")).findIndex(function(n){return n.id===e}):-1},addPort:function(t,e){if(!te(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=Et([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){const r=typeof t=="number"?t:this.getPortIndex(t);if(!te(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const i=Et([],this.prop("ports/items"));return i.splice(r,0,e),this.prop("ports/items",i,n),this},portProp:function(t,e,n,r){var i=this.getPortIndex(t);if(i===-1)throw new Error("Element: unable to find port with id "+t);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?s[0]=["ports","items",i].concat(e):Pe(e)?s[0]=["ports/items/",i,"/",e].join(""):(s=["ports/items/"+i],ge(e)&&(s.push(e),s.push(n))),this.prop.apply(this,s)},_validatePorts:function(){var t=this.get("ports")||{},e=[];t=t||{};var n=Yt(t.items);return n.forEach(function(r){typeof r!="object"&&e.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),Mi(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return t!=null&&!te(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Et([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const n=e||{},r=this.getPortIndex(t);if(r!==-1){const i=Et([],this.prop(["ports","items"]));i.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let n,r;if(Array.isArray(t)){if(n=e||{},t.length===0)return this.this;r=Et([],this.prop(["ports","items"])).filter(function(s){return!t.some(function(o){const u=te(o)?o.id:o;return s.id===u})})}else n=t||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));var e;this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new Qh(this.get("ports"));var n=this._portSettingsData.getPorts();if(e){var r=n.filter(function(s){if(!e.find(function(o){return o.id===s.id}))return s}),i=e.filter(function(s){if(!n.find(function(o){return o.id===s.id}))return s});i.length>0&&this.trigger("ports:remove",this,i),r.length>0&&this.trigger("ports:add",this,r)}}},_m={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,r=e.node.childNodes.length;n<r;n++)t.push(e.node.childNodes[n]);var i=Bv(this.model._portSettingsData.getPorts(),"z"),s="auto";Yt(i[s]).forEach(function(g){var h=this._getPortElement(g);e.append(h),t.push(h)},this);for(var o=Object.keys(i),u=0;u<o.length;u++){var l=o[u];if(l!==s){var d=parseInt(l,10);this._appendPorts(i[l],d,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var r=this._getContainerElement(),i=Yt(t).map(this._getPortElement,this);n[e]||e<0?rt(n[Math.max(e,0)]).before(i):r.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){const n=this._portElementsCache[t];if(!n)return null;if(!e)return n.portContentElement.node;const r=n.portElement.node,i=n.portSelectors,[s=null]=this.findBySelector(e,r,i);return s},_updatePorts:function(){this._updatePortGroup(void 0);var t=Object.keys(this.model._portSettingsData.groups);t.forEach(this._updatePortGroup,this)},_removePorts:function(){Tn(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,n,r,i;var s=rt(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(t);if(Array.isArray(o)){var u=this.parseDOMJSON(o,s.node),l=u.fragment;l.childNodes.length>1?e=rt("g").append(l):e=rt(l.firstChild),i=u.selectors}else e=rt(o),Array.isArray(e)&&(e=rt("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});const d=this._getPortLabelMarkup(t.label);if(Array.isArray(d)){const{fragment:E,selectors:N}=this.parseDOMJSON(d,s.node),L=E.childNodes.length;L>0&&(r=N,n=L===1?rt(E.firstChild):rt("g").append(E))}else n=rt(d),Array.isArray(n)&&(n=rt("g").append(n));var g;if(i&&r){for(var h in r)if(i[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");g=Et({},i,r)}else g=i||r||{};const b="portRoot",P="labelRoot",A="labelText";if(b in g||(g[b]=e.node),n){const E=n.node;if(P in g||(g[P]=E),!(A in g)){const N=n.tagName()==="TEXT"?E:Array.from(E.querySelectorAll("text"));g[A]=N,r||(r={}),r[A]=N}}return s.append(e.addClass("joint-port-body")),n&&s.append(n.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:s,portLabelElement:n,portSelectors:g,portLabelSelectors:r,portContentElement:e,portContentSelectors:i},s},_updatePortGroup:function(t){for(var e=pt(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,i=n.length;r<i;r++){var s=n[r],o=s.portId,u=this._portElementsCache[o]||{},l=s.portTransformation,d=s.labelTransformation;d&&u.portLabelElement&&(this.updateDOMSubtreeAttributes(u.portLabelElement.node,d.attrs,{rootBBox:new pt(s.labelSize),selectors:u.portLabelSelectors}),this.applyPortTransform(u.portLabelElement,d,-l.angle||0)),this.updateDOMSubtreeAttributes(u.portElement.node,s.portAttrs,{rootBBox:new pt(s.portSize),selectors:u.portSelectors}),this.applyPortTransform(u.portElement,l)}},applyPortTransform:function(t,e,n){var r=rt.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Re=En.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),En.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){const r=ze(e);n=(r?n:t)||{};const{parentRelative:i,deep:s,restrictedArea:o}=n;let u;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const l=this.getParentCell();l&&!l.isLink()&&(u=l.get("position"))}if(r){if(u&&(t+=u.x,e+=u.y),s||o){const{x:l,y:d}=this.get("position");this.translate(t-l,e-d,n)}else this.set("position",{x:t,y:e},n);return this}else{const l=D(this.get("position"));return i?l.difference(u):l}},translate:function(t,e,n){if(t=t||0,e=e||0,t===0&&e===0)return this;n=n||{},n.translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},i=n.restrictedArea;if(i&&n.translateBy===this.id)if(typeof i=="function"){var s=i.call(this,r.x+t,r.y+e,n);t=s.x-r.x,e=s.y-r.y}else{var o=this.getBBox({deep:!0}),u=r.x-o.x,l=r.y-o.y,d=Math.max(i.x+u,Math.min(i.x+i.width+u-o.width,r.x+t)),g=Math.max(i.y+l,Math.min(i.y+i.height+l-o.height,r.y+e));t=d-r.x,e=g-r.y}var h={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(te(n.transition)||(n.transition={}),this.transition("position",h,Et({},n.transition,{valueFunction:Hh.object})),Tn(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",h,n),Tn(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var r=this.get("size");return t===void 0?{width:r.width,height:r.height}:(te(t)&&(n=e,e=ze(t.height)?t.height:r.height,t=ze(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width;break}var i=fn(this.get("angle")||0),s=this.getBBox(),o;if(i){var u={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(u+=Math.floor((i+45)/90),u%=4);var l=s[["bottomLeft","corner","topRight","origin"][u]](),d=D(l).rotate(s.center(),-i),g=Math.sqrt(t*t+e*e)/2,h=u*Math.PI/2;h+=Math.atan(u%2==0?e/t:t/e),h-=$e(i);var b=D.fromPolar(g,h,d);o=D(b).offset(t/-2,e/-2)}else switch(o=s.topLeft(),n.direction){case"top":case"top-right":o.offset(0,s.height-e);break;case"left":case"bottom-left":o.offset(s.width-t,0);break;case"top-left":o.offset(s.width-t,s.height-e);break}this.set("size",{width:t,height:e},n),this.position(o.x,o.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var i=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t){return this.fitToChildren(t)},fitToChildren:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(r=>r.isElement());return n.length===0?this:(this.startBatch("fit-embeds",t),t.deep&&Tn(n,"fitToChildren",t),this._fitToElements(Object.assign({elements:n},t)),this.stopBatch("fit-embeds"),this)},fitParent:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");if(t.deep&&t.terminator&&(t.terminator===this||t.terminator===this.id))return this;const n=this.getParentCell();if(!n||!n.isElement())return this;const r=n.getEmbeddedCells().filter(i=>i.isElement());return r.length===0?this:(this.startBatch("fit-parent",t),n._fitToElements(Object.assign({elements:r},t)),t.deep&&n.fitParent(t),this.stopBatch("fit-parent"),this)},_fitToElements:function(t={}){const e=this.graph.getCellsBBox(t.elements);if(!e)return;const{expandOnly:n,shrinkOnly:r}=t;if(n&&r)return;let{x:i,y:s,width:o,height:u}=e;const{left:l,right:d,top:g,bottom:h}=ar(t.padding);i-=l,s-=g,o+=l+d,u+=h+g;let b=new pt(i,s,o,u);if(n)b=this.getBBox().union(b);else if(r){const P=this.getBBox().intersect(b);if(!P)return;b=P}this.set({position:{x:b.x,y:b.y},size:{width:b.width,height:b.height}},t)},rotate:function(t,e,n,r){if(n){var i=this.getBBox().center(),s=this.get("size"),o=this.get("position");i.rotate(n,this.get("angle")-t);var u=i.x-s.width/2-o.x,l=i.y-s.height/2-o.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(o.x+u,o.y+l,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return fn(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:n}=this,{deep:r,rotate:i}=t;if(r&&e){const h=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return h.push(this),e.getCellsBBox(h,t)}const{angle:s=0,position:{x:o,y:u},size:{width:l,height:d}}=n,g=new pt(o,u,l,d);return i&&g.rotateAroundCenter(s),g},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),r=n.center(),i=t.get(e);if(!i)return r;var s=i.port;if(!s||!this.hasPort(s))return r;var o=this.portProp(s,["group"]),u=this.getPortsPositions(o),l=new D(u[s]).offset(n.origin()),d=this.angle();return d&&l.rotate(r,-d),l}});Et(Re.prototype,Cm);const Lm=Se.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace=typeof joint<"u"&&Hn(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,r=n.cellNamespace,i=t.type==="link"?qr:xi(r,t.type,".")||Re,s=new i(t,e);return e.dry||(s.graph=n.graph),s},comparator:function(t){return t.get("z")||0}}),td=Se.Model.extend({initialize:function(t,e){e=e||{};var n=new Lm([],{model:e.cellModel,cellNamespace:e.cellNamespace,graph:this});Se.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:n}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:n}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=Se.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var r;return typeof t=="object"?(r=t,n=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=yi(r,"cells")),Se.Model.prototype.set.call(this,r,n)},clear:function(t){t=Et({},t,{clear:!0});var e=this.get("cells");if(e.length===0)return this;this.startBatch("clear",t);var n=e.sortBy(function(r){return r.isLink()?1:2});do n.shift().remove(t);while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var n;if(t instanceof Se.Model?(n=t.attributes,!t.graph&&(!e||!e.dry)&&(t.graph=this)):n=t,!Pe(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof Se.Model?t.has("z")||t.set("z",this.maxZIndex()+1):t.z===void 0&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return t.length===0?this:(t=Vv(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(n){this.addCell(n,e),e.position--},this),this.stopBatch("add",e),this)},resetCells:function(t,e){var n=Yt(t).map(function(r){return this._prepareCell(r,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),Tn(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(t=>t.isElement())},getLinks:function(){return this.get("cells").filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var n=e.indirect,r=e.inbound,i=e.outbound;r===void 0&&i===void 0&&(r=i=!0);var s=[],o={};i&&u(this,t),r&&l(this,t);function u(h,b){if(Ke(h.getOutboundEdges(b.id),(function(A,E){if(!o[E]){var N=h.getCell(E);s.push(N),o[E]=!0,n&&(r&&l(h,N),i&&u(h,N))}}).bind(h)),n&&b.isLink()){var P=b.getTargetCell();P&&P.isLink()&&(o[P.id]||(s.push(P),u(h,P)))}}function l(h,b){if(Ke(h.getInboundEdges(b.id),(function(A,E){if(!o[E]){var N=h.getCell(E);s.push(N),o[E]=!0,n&&(r&&l(h,N),i&&u(h,N))}}).bind(h)),n&&b.isLink()){var P=b.getSourceCell();P&&P.isLink()&&(o[P.id]||(s.push(P),l(h,P)))}}if(e.deep){var d=t.getEmbeddedCells({deep:!0}),g={};d.forEach(function(h){h.isElement()&&(g[h.id]=!0)}),d.forEach(function(h){h.isLink()||(i&&Ke(this.getOutboundEdges(h.id),(function(b,P){if(!o[P]){var A=this.getCell(P),{source:E,target:N}=A.attributes,L=E.id,$=N.id;if(!e.includeEnclosed&&L&&g[L]&&$&&g[$])return;s.push(this.getCell(P)),o[P]=!0}}).bind(this)),r&&Ke(this.getInboundEdges(h.id),(function(b,P){if(!o[P]){var A=this.getCell(P),{source:E,target:N}=A.attributes,L=E.id,$=N.id;if(!e.includeEnclosed&&L&&g[L]&&$&&g[$])return;s.push(this.getCell(P)),o[P]=!0}}).bind(this)))},this)}return s},getNeighbors:function(t,e){e||(e={});var n=e.inbound,r=e.outbound;n===void 0&&r===void 0&&(n=r=!0);var i=this.getConnectedLinks(t,e).reduce((function(u,l){var{source:d,target:g}=l.attributes,h=l.hasLoop(e);if(n&&Hn(d,"id")&&!u[d.id]){var b=this.getCell(d.id);b.isElement()&&(h||b&&b!==t&&(!e.deep||!b.isEmbeddedIn(t)))&&(u[d.id]=b)}if(r&&Hn(g,"id")&&!u[g.id]){var P=this.getCell(g.id);P.isElement()&&(h||P&&P!==t&&(!e.deep||!P.isEmbeddedIn(t)))&&(u[g.id]=P)}return u}).bind(this),{});if(t.isLink()){if(n){var s=t.getSourceCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}if(r){var o=t.getTargetCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}}return Yt(i)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(n){for(var r=[],i=n.get("parent");i;)r.push(i),i=this.getCell(i).get("parent");return r},this);t=t.sort(function(n,r){return n.length-r.length});var e=Yt(t.shift()).find(function(n){return t.every(function(r){return r.includes(n)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Et({},e,{outbound:!0})),n},cloneCells:qh,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},i=[],s=[];return Yt(t).forEach(function(o){if(r[o.id]||(n.push(o),r[o.id]=o,o.isLink()?s.push(o):i.push(o)),e.deep){var u=o.getEmbeddedCells({deep:!0});u.forEach(function(l){r[l.id]||(n.push(l),r[l.id]=l,l.isLink()?s.push(l):i.push(l))})}}),s.forEach(function(o){var{source:u,target:l}=o.attributes;if(u.id&&!r[u.id]){var d=this.getCell(u.id);n.push(d),r[d.id]=d,i.push(d)}if(l.id&&!r[l.id]){var g=this.getCell(l.id);n.push(this.getCell(l.id)),r[g.id]=g,i.push(g)}},this),i.forEach(function(o){var u=this.getConnectedLinks(o,e);u.forEach(function(l){var{source:d,target:g}=l.attributes;!r[l.id]&&d.id&&r[d.id]&&g.id&&r[g.id]&&(n.push(l),r[l.id]=l)})},this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Et({},e,{inbound:!0})),n},search:function(t,e,n){n=n||{},n.breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n={}){const r={},i={},s=[];for(s.push(t),i[t.id]=0;s.length>0;){var o=s.shift();if(r[o.id]||(r[o.id]=!0,e.call(this,o,i[o.id])===!1))continue;const u=this.getNeighbors(o,n);for(let l=0,d=u.length;l<d;l++){const g=u[l];i[g.id]=i[o.id]+1,s.push(g)}}},dfs:function(t,e,n={}){const r={},i={},s=[];for(s.push(t),i[t.id]=0;s.length>0;){const o=s.pop();if(r[o.id]||(r[o.id]=!0,e.call(this,o,i[o.id])===!1))continue;const u=this.getNeighbors(o,n),l=s.length;for(let d=0,g=u.length;d<g;d++){const h=u[d];i[h.id]=i[o.id]+1,s.splice(l,0,h)}}},getSources:function(){var t=[];return Ke(this._nodes,(function(e,n){(!this._in[n]||On(this._in[n]))&&t.push(this.getCell(n))}).bind(this)),t},getSinks:function(){var t=[];return Ke(this._nodes,(function(e,n){(!this._out[n]||On(this._out[n]))&&t.push(this.getCell(n))}).bind(this)),t},isSource:function(t){return!this._in[t.id]||On(this._in[t.id])},isSink:function(t){return!this._out[t.id]||On(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(t,e,n){n=n||{};var r=n.inbound,i=n.outbound;r===void 0&&i===void 0&&(r=i=!0);var s=!1;return this.getConnectedLinks(t,n).forEach(function(o){var{source:u,target:l}=o.attributes;if(r&&Hn(u,"id")&&u.id===e.id||i&&Hn(l,"id")&&l.id===e.id)return s=!0,!1}),s},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){Tn(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(e=>e.getBBox({rotate:!0}).containsPoint(t))},findModelsInArea:function(t,e={}){const n=new pt(t),{strict:r=!1}=e,i=r?"containsRect":"intersect";return this.getElements().filter(s=>n[i](s.getBBox({rotate:!0})))},findModelsUnderElement:function(t,e={}){const{searchBy:n="bbox"}=e,r=t.getBBox().rotateAroundCenter(t.angle());return(n==="bbox"?this.findModelsInArea(r):this.findModelsFromPoint(Wh(r,n))).filter(s=>t.id!==s.id&&!s.isEmbeddedIn(t))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:n=!0}=e;return Yt(t).reduce(function(r,i){const s=i.getBBox({rotate:n});return s?r?r.union(s):s:r},null)},translate:function(t,e,n){var r=this.getCells().filter(function(i){return!i.isEmbedded()});return Tn(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var i=this.getCellsBBox(n);if(i){var s=Math.max(t/i.width,0),o=Math.max(e/i.height,0);Tn(n,"scale",s,o,i.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Et({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Et({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let n;return arguments.length===0?n=Object.keys(e):Array.isArray(t)?n=t:n=[t],n.some(r=>e[r]>0)}},{validations:{multiLinks:function(t,e){var{source:n,target:r}=e.attributes;if(n.id&&r.id){var i=e.getSourceCell();if(i){var s=t.getConnectedLinks(i,{outbound:!0}),o=s.filter(function(u){var{source:l,target:d}=u.attributes;return l&&l.id===n.id&&(!l.port||l.port===n.port)&&d&&d.id===r.id&&(!d.port||d.port===r.port)});if(o.length>1)return!1}}return!0},linkPinning:function(t,e){var{source:n,target:r}=e.attributes;return n.id&&r.id}}});im(td.prototype,["resetCells","addCells","removeCells"],Wo.cells);const tr={},Rr=Se.View.extend({options:{},theme:null,themeClassNamePrefix:cn("theme-"),requireSetThemeOverride:!1,defaultTheme:Pn.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Et({},this.options,t),Se.View.call(this,t)},initialize:function(){tr[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(t){if(t||(t=pe(this,"children")),t){var e=this.svgElement,n=rt.namespace[e?"svg":"xhtml"],r=ps(t,n);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&n.nodeType===1;){var r=n.getAttribute(t);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(pe(this,"el"));else{var t=pe(this,"tagName"),e=Et({},pe(this,"attributes")),n=Et({},pe(this,"style"));this.id&&(e.id=pe(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(rt.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof Se.$?t:Se.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=rt(this.el))},_ensureElClassName:function(){var t=pe(this,"className");if(t){var e=cn(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override?this:(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t,this)},addThemeClassName:function(t){if(t=t||this.theme,!t)return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),tr[this.cid]=null,Se.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var i in e){var s=e[i];typeof s!="function"&&(s=this[s]),s&&Wt(t).on(i+r,n,s.bind(this))}return this},undelegateElementEvents:function(t){return Wt(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=pe(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,r="__"+this.cid+"__";return e===void 0?n?n[r]||{}:{}:(n||(n=t.data={}),n[r]||(n[r]={}),Et(n[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Et({},t[0])||{},n=t[1]&&Et({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return typeof r=="function"&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,Se.View.extend.call(this,e,n)}}),Ac="dbltap";if(Wt.event&&!(Ac in Wt.event.special)){const t=Pn.doubleTapInterval,e=30;Wt.event.special[Ac]={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:i,target:s}=n,o=Wt.data(s),u=new Date().getTime(),l="lastTouch"in o?u-o.lastTouch:0;l<t&&l>e?(o.lastTouch=null,n.type=i.origType,i.handler.call(this,n,...r)):o.lastTouch=u}}}const un={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Mm=Rr.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return cn(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:n}=this;t=+t,t||(t=0);let r=n[t];if(r)return r;r=n[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let s in n)s=+s,s<t&&s>i&&(i=s,t-1);if(i!==-1/0){const s=n[i];e.insertBefore(r,s.nextSibling)}else e.insertBefore(r,e.firstChild);return r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let n in e)t.removeChild(e[n]);this.pivotNodes={}}});function ni(t){return t?Array.isArray(t)?t:[t]:[]}const ln=Rr.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(t,e){const{paper:n}=t;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return t.isMounted()?(this.update(t,e),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(t,e=null){let n;if(typeof e=="string")[n]=t.findBySelector(e);else if(ge(e)){const r=t.model.isLink(),{label:i=null,port:s,selector:o}=e;r&&i!==null?n=t.findLabelNode(i,o):!r&&s?n=t.findPortNode(s,o):[n]=t.findBySelector(o)}else e&&(n=rt.toNode(e),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(t,e){const{options:n}=this,{layer:r}=n,{rotatableNode:i}=t,s=t.getNodeMatrix(e);return i?r?i.contains(e)?s:t.getRootRotateMatrix().inverse().multiply(s):t.getNodeRotateMatrix(e).multiply(s):s},mount(){const{MOUNTABLE:t,cellView:e,el:n,options:r,transformGroup:i,detachedTransformGroup:s,postponedUpdate:o,nodeSelector:u}=this;if(!t||i)return;if(o){this.update(e,u),this.transform();return}const{vel:l,paper:d}=e,{layer:g}=r;if(g){let h;s?(h=s,this.detachedTransformGroup=null):h=rt("g").addClass("highlight-transform").append(n),this.transformGroup=h,d.getLayerView(g).insertSortedNode(h.node,r.z)}else(!n.parentNode||n.nextSibling)&&l.append(n)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:n}=this;t&&(e?(this.transformGroup=null,this.detachedTransformGroup=e,e.remove()):n.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:n}=this;if(!t||e.model.isLink()||n)return;const r=e.getRootTranslateMatrix(),i=e.getRootRotateMatrix(),s=r.multiply(i);t.attr("transform",rt.matrixToTransformString(s))},update(){const{node:t,cellView:e,nodeSelector:n,updateRequested:r,id:i}=this;if(r)return;this.postponedUpdate=!1;const s=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),s?(this.highlight(e,s),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:t,cellView:e,id:n,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,n)},highlight(t,e){},unhighlight(t,e){},listenToUpdateAttributes(t){const e=pe(this,"UPDATE_ATTRIBUTES");!Array.isArray(e)||e.length===0||this.listenTo(t.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:t}=this;if(!t)return;const{model:e,paper:n}=t;pe(this,"UPDATE_ATTRIBUTES").some(i=>e.hasChanged(i))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(t,e,n){const r=this.uniqueId(e,n);this.add(t,e,r,n)},unhighlight:function(t,e,n){const r=this.uniqueId(e,n);this.remove(t,r)},get(t,e=null){const{cid:n}=t,{_views:r}=this,i=r[n];if(e===null){const s=[];if(!i)return s;for(let o in i){const u=i[o];u instanceof this&&s.push(u)}return s}else{if(!i)return null;if(e in i){const s=i[e];if(s instanceof this)return s}return null}},add(t,e,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const i=ln.get(t,n);i&&i.remove();const s=new this(r);return s.id=n,this._addRef(t,n,s),s.requestUpdate(t,e),s.listenToUpdateAttributes(t),s},_addRef(t,e,n){const{cid:r}=t,{_views:i}=this;let s=i[r];s||(s=i[r]={}),s[e]=n},_removeRef(t,e){const{cid:n}=t,{_views:r}=this,i=r[n];if(i){e&&delete i[e];for(let s in i)return;delete r[n]}},remove(t,e=null){ni(this.get(t,e)).forEach(n=>{n.remove()})},removeAll(t,e=null){const{_views:n}=this;for(let r in n)for(let i in n[r]){const s=n[r][i];s.cellView.paper===t&&s instanceof this&&(e===null||i===e)&&s.remove()}},update(t,e=null,n=!1){ni(this.get(t,e)).forEach(r=>{(n||r.UPDATABLE)&&r.update()})},transform(t,e=null){ni(this.get(t,e)).forEach(n=>{n.UPDATABLE&&n.transform()})},unmount(t,e=null){ni(this.get(t,e)).forEach(n=>n.unmount())},mount(t,e=null){ni(this.get(t,e)).forEach(n=>n.mount())},uniqueId(t,e=""){return rt.ensureId(t)+JSON.stringify(e)}}),Ar={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Om={TOOLS:"TOOLS"},zt=Rr.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(n,r,i){t.push("type-"+i.slice(0,r+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t={},e={},n=0,r,i,s,o=pe(this,"presentationAttributes");for(var u in o)if(o.hasOwnProperty(u)){var l=o[u];for(Array.isArray(l)||(l=[l]),r=0,i=l.length;r<i;r++){s=l[r];var d=t[s];d||(d=t[s]=1<<n++),e[u]|=d}}var g=pe(this,"initFlag");for(Array.isArray(g)||(g=[g]),r=0,i=g.length;r<i;r++)s=g[r],t[s]||(t[s]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=e},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n|=e[t[r]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||Lr(this),Rr.call(this,t)},initialize:function(){this.setFlags(),Rr.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);e.updateHandled||!n||(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){const{paper:n}=this;n&&t>0&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=ps(t),r=n.selectors,i=n.groupSelectors;for(var s in i){if(r[s])throw new Error("dia.CellView: ambiguous group selector");r[s]=i[s]}if(e){var o=this.selector;if(r[o])throw new Error("dia.CellView: ambiguous root selector.");r[o]=e}return{fragment:n.fragment,selectors:r}},can:function(t){var e=ue(this.options.interactive)?this.options.interactive(this):this.options.interactive;return te(e)&&e[t]!==!1||kv(e)&&e!==!1},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||t===".")return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return Wt(e).find(t).toArray()},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){const e=this.getNodeBoundingRect(t),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(t)),r=this.getNodeMatrix(t);return rt.transformRect(e,n.multiply(r))},getNodeRotateMatrix(t){return!this.rotatableNode||this.rotatableNode.contains(t)?this.getRootRotateMatrix():rt.createSVGMatrix()},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return rt.transformRect(e,r.multiply(n))},getRootTranslateMatrix:function(){var t=this.model,e=t.position(),n=rt.createSVGMatrix().translate(e.x,e.y);return n},getRootRotateMatrix:function(){var t=rt.createSVGMatrix(),e=this.model,n=e.angle();if(n){var r=e.getBBox(),i=r.width/2,s=r.height/2;t=t.translate(i,s).rotate(n).translate(-i,-s)}return t},_notifyHighlight:function(t,e,n={}){const{el:r}=this;let i;if(typeof e=="string"?[i=r]=this.findBySelector(e):[i=r]=this.$(e),n.partial=i!==r,n.type===void 0){let s;switch(!0){case n.embedding:s=Ar.EMBEDDING;break;case n.connecting:s=Ar.CONNECTING;break;case n.magnetAvailability:s=Ar.MAGNET_AVAILABILITY;break;case n.elementAvailability:s=Ar.ELEMENT_AVAILABILITY;break;default:s=Ar.DEFAULT;break}n.type=s}return this.notify(t,i,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let n=this.$(t)[0];n||(n=e);do{const r=n.getAttribute("magnet"),i=n===e;if((r||i)&&r!=="false")return n;if(i)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const[r]=this.findBySelector(n);if(r)return r}return t},getSelector:function(t,e){var n;if(t===this.el)return typeof e=="string"&&(n="> "+e),n;if(t){var r=rt(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},addLinkFromMagnet:function(t,e,n){var r=this.paper,i=r.model,s=r.getDefaultLink(this,t);return s.set({source:this.getLinkEnd(t,e,n,s,"source"),target:{x:e,y:n}}).addTo(i,{async:!1,ui:!0}),s.findView(r)},getLinkEnd:function(t,...e){var n=this.model,r=n.id,i=this.findAttribute("port",t),s=t.getAttribute("joint-selector"),o={id:r};return s!=null&&(o.magnet=s),i!=null?(o.port=i,!n.hasPort(i)&&!s&&(o.selector=this.getSelector(t))):s==null&&this.el!==t&&(o.selector=this.getSelector(t)),this.customizeLinkEnd(o,t,...e)},customizeLinkEnd:function(t,e,n,r,i,s){const{paper:o}=this,{connectionStrategy:u}=o.options;if(typeof u=="function"){var l=u.call(o,t,this,e,new D(n,r),i,s,o);if(l)return l}return t},getMagnetFromLinkEnd:function(t){var e=this.el,n=t.port,r=t.magnet,i=this.model,s;return n!=null&&i.isElement()&&i.hasPort(n)?s=this.findPortNode(n,r)||e:(r||(r=t.selector),!r&&n!=null&&(r='[port="'+n+'"]'),s=this.findBySelector(r,e,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(t,e,n,r){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(e,n,r);i.notifyPointerdown(t,n,r),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,e,n){var r=this.eventData(t),i=r.linkView;if(i)i.pointermove(t,e,n);else{var s=this.paper,o=s.options.magnetThreshold,u=this.getEventTarget(t),l=r.targetMagnet;if(o==="onleave"){if(l===u||rt(l).contains(u))return}else if(s.eventData(t).mousemoved<=o)return;this.dragLinkStart(t,l,e,n)}},dragLinkEnd:function(t,e,n){var r=this.eventData(t),i=r.linkView;i&&(i.pointerup(t,e,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){On(e)||(t instanceof SVGElement?rt(t).attr(e):Wt(t).attr(e))},processNodeAttributes:function(t,e){var n,r,i,s,o,u,l,d,g,h=[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],i=this.getAttributeDefinition(n),i&&(!ue(i.qualify)||i.qualify.call(this,r,t,e,this))?(Pe(i.set)&&(u||(u={}),u[i.set]=r),r!==null&&h.push(n,i)):(u||(u={}),u[Wv(n)]=r));for(s=0,o=h.length;s<o;s+=2)n=h[s],i=h[s+1],r=e[n],ue(i.set)&&(l||(l={}),l[n]=r),ue(i.position)&&(d||(d={}),d[n]=r),ue(i.offset)&&(g||(g={}),g[n]=r);return{raw:e,normal:u,set:l,position:d,offset:g}},updateRelativeAttributes:function(t,e,n,r){r||(r={});var i,s,o,u=e.raw||{},l=e.normal||{},d=e.set,g=e.position,h=e.offset;for(i in d){s=d[i],o=this.getAttributeDefinition(i);var b=o.set.call(this,s,n.clone(),t,u,this);te(b)?Et(l,b):b!==void 0&&(l[i]=b)}if(t instanceof HTMLElement){this.setNodeAttributes(t,l);return}var P=l.transform,A=rt.transformStringToMatrix(P),E=D(A.e,A.f);P&&(l=yi(l,"transform"),A.e=A.f=0);var N,L,$;if(g||h){var Y=this.getNodeScale(t,r.scalableNode);N=Y.sx,L=Y.sy}var j=!1;for(i in g)s=g[i],o=this.getAttributeDefinition(i),$=o.position.call(this,s,n.clone(),t,u,this),$&&(E.offset(D($).scale(N,L)),j||(j=!0));this.setNodeAttributes(t,l);var nt=!1;if(h){var ut=this.getNodeBoundingRect(t);if(ut.width>0&&ut.height>0){var c=rt.transformRect(ut,A).scale(1/N,1/L);for(i in h)s=h[i],o=this.getAttributeDefinition(i),$=o.offset.call(this,s,c,t,u,this),$&&(E.offset(D($).scale(N,L)),nt||(nt=!0))}}(P!==void 0||j||nt)&&(E.round(1),A.e=E.x,A.f=E.y,t.setAttribute("transform",rt.matrixToTransformString(A)))},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var i=e.scale();n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=rt.ensureId(t),r=e[n];return r||(r=e[n]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return e.boundingRect===void 0&&(e.boundingRect=rt(t).getBBox()),new pt(e.boundingRect)},getNodeMatrix:function(t){const e=this.nodeCache(t);if(e.magnetMatrix===void 0){const{rotatableNode:n,el:r}=this;let i;n&&n.contains(t)?i=n:i=r,e.magnetMatrix=rt(t).getTransformToElement(i)}return rt.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return e.geometryShape===void 0&&(e.geometryShape=rt(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,r){var i,s,o,u,l={},d=[];for(var g in t)if(t.hasOwnProperty(g)&&(o=t[g],!!ge(o))){var h=n[g]=this.findBySelector(g,e,r);for(i=0,s=h.length;i<s;i++){var b=h[i];u=rt.ensureId(b);var P=r&&r[g]===b,A=l[u];if(A){A.array||(d.push(u),A.array=!0,A.attributes=[A.attributes],A.selectedLength=[A.selectedLength]);var E=A.attributes,N=A.selectedLength;if(P)E.unshift(o),N.unshift(-1);else{var L=zh(N,s);E.splice(L,0,o),N.splice(L,0,s)}}else l[u]={attributes:o,selectedLength:P?-1:s,node:b,array:!1}}}for(i=0,s=d.length;i<s;i++)u=d[i],o=l[u],o.attributes=ye({},...o.attributes.reverse());return l},getEventTarget:function(t,e={}){const{target:n,type:r,clientX:i=0,clientY:s=0}=t;return e.fromPoint||r==="touchmove"||r==="touchend"||"pointerId"in t&&n.hasPointerCapture(t.pointerId)?document.elementFromPoint(i,s):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=pt()),n.selectors||(n.selectors=this.selectors);var r={},i={},s=[],o=[],u,l,d,g,h,b=n.roAttributes,P=this.findNodesAttributes(b||e,t,r,n.selectors),A=b?this.findNodesAttributes(e,t,r,n.selectors):P;for(var E in P)if(g=P[E],d=g.attributes,l=g.node,h=this.processNodeAttributes(l,d),!h.set&&!h.position&&!h.offset)this.setNodeAttributes(l,h.normal);else{var N=A[E]&&A[E].attributes,L=N&&d.ref===void 0?N.ref:d.ref,$;if(L){if($=(r[L]||this.findBySelector(L,t,n.selectors))[0],!$)throw new Error('dia.CellView: "'+L+'" reference does not exist.')}else $=null;if(u={node:l,refNode:$,processedAttributes:h,allAttributes:N},$){var Y=o.findIndex(function(j){return j.refNode===l});Y>-1?o.splice(Y,0,u):o.push(u)}else s.push(u)}s.push(...o);for(let j=0,nt=s.length;j<nt;j++){u=s[j],l=u.node,$=u.refNode;const ut=$?rt.ensureId($):"";let c=i[ut];c||(c=i[ut]=$?rt($).getBBox({target:Nm(l,$)}):n.rootBBox),b?(h=this.processNodeAttributes(l,u.allAttributes),this.mergeProcessedAttributes(h,u.processedAttributes)):h=u.processedAttributes,this.updateRelativeAttributes(l,h,c,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Et(t.set,e.set),Et(t.position,e.position),Et(t.offset,e.offset);var n=t.normal&&t.normal.transform;n!==void 0&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onMount(t){t||(this.mountTools(),ln.mount(this))},onDetach(){this.unmountTools(),ln.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return e?t?e.getName()===t:!0:!1},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const t=this._toolsView;return t&&t.unmount(),this},mountTools(){const t=this._toolsView;return t&&!t.isMounted()&&t.mount(),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){ln.remove(this)},updateHighlighters:function(t=!1){ln.update(this,null,t)},transformHighlighters:function(){ln.transform(this)},preventDefaultInteraction(t){this.eventData(t,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(t){const{defaultInteractionPrevented:e=!1}=this.eventData(t);return e},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){const{model:r}=this,{graph:i}=r;i&&(r.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){this.notify(e,t,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e,model:n}=this;if(e.isAsync()){if(n.isLink()){const s=n.getSourceElement();if(s){const u=e.findViewByModel(s);u&&(e.dumpView(u),e.checkViewVisibility(u))}const o=n.getTargetElement();if(o){const u=e.findViewByModel(o);u&&(e.dumpView(u),e.checkViewVisibility(u))}}e.dumpView(this),e.checkViewVisibility(this)}const r=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(r);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Flags:Om,Highlighting:Ar,addPresentationAttributes:function(t){return ye({},pe(this.prototype,"presentationAttributes"),t,function(e,n){if(!(!e||!n)&&(typeof e=="string"&&(e=[e]),typeof n=="string"&&(n=[n]),Array.isArray(e)&&Array.isArray(n)))return Mi(e.concat(n))})}});function Nm(t,e){let n=t;do{if(n.contains(e))return n;n=n.parentNode}while(n);return null}const Ut={TOOLS:zt.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Tr={MOVE:"move",MAGNET:"magnet"},is=zt.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=zt.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){zt.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Ut.UPDATE],position:[Ut.TRANSLATE,Ut.TOOLS],size:[Ut.RESIZE,Ut.PORTS,Ut.TOOLS],angle:[Ut.ROTATE,Ut.TOOLS],markup:[Ut.RENDER],ports:[Ut.PORTS]},initFlag:[Ut.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){const{useCSSSelectors:n}=Pn;this.hasFlag(t,Ut.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(t,Ut.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),r=!0,t=this.removeFlag(t,[Ut.RENDER,Ut.UPDATE,Ut.RESIZE,Ut.TRANSLATE,Ut.ROTATE,Ut.PORTS,Ut.TOOLS]);else{let i=!1;this.hasFlag(t,Ut.RESIZE)&&(this.resize(e),i=!0,t=this.removeFlag(t,[Ut.RESIZE,Ut.UPDATE]),n&&(t=this.removeFlag(t,Ut.PORTS))),this.hasFlag(t,Ut.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,Ut.UPDATE),i=!0,n&&(t=this.removeFlag(t,Ut.PORTS))),this.hasFlag(t,Ut.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,Ut.TRANSLATE),r=!0),this.hasFlag(t,Ut.ROTATE)&&(this.rotate(),t=this.removeFlag(t,Ut.ROTATE),r=!0),this.hasFlag(t,Ut.PORTS)&&(this._renderPorts(),i=!0,t=this.removeFlag(t,Ut.PORTS)),i&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(t,Ut.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Ut.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();const{useCSSSelectors:n}=Pn;n&&this._removePorts();var r=this.model,i=r.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new pt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===i?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=rt(n[this.rotatableSelector])||null,this.scalableNode=rt(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(rt(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable");var n=this.selectors={};n[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),r=e.size(),i=this.scalableNode,s=!1;i.node.getElementsByTagName("path").length>0&&(s=!0);var o=i.getBBox({recursive:s}),u=r.width/(o.width||1),l=r.height/(o.height||1);i.attr("transform","scale("+u+","+l+")");var d=this.rotatableNode,g=d&&d.attr("transform");if(g){d.attr("transform",g+" rotate("+-n+","+r.width/2+","+r.height/2+")");var h=i.getBBox({target:this.paper.cells});e.set("position",{x:h.x,y:h.y},Et({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,r=(t.paper||this.paper).model,i=t.initialZIndices={},s=e.getEmbeddedCells({deep:!0}),o=r.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...s,...o].forEach(d=>i[d.id]=d.attributes.z),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const u=r.getElements().reduce((d,g)=>Math.max(d,g.attributes.z||0),0);o.forEach(d=>{d.attributes.z<=u&&d.set("z",u+1,{ui:!0})}),e.stopBatch("to-front");const l=e.parent();l?(r.getCell(l).unembed(e,{ui:!0}),t.initialParentId=l):t.initialParentId=null},processEmbedding:function(t={},e,n,r){const i=t.model||this.model,s=t.paper||this.paper,o=s.model,{findParentBy:u,frontParentOnly:l,validateEmbedding:d}=s.options;let g;ue(u)?g=Yt(u.call(o,this,e,n,r)):u==="pointer"?g=Yt(o.findModelsFromPoint({x:n,y:r})):g=o.findModelsUnderElement(i,{searchBy:u}),g=g.filter(P=>P instanceof En&&i.id!==P.id&&!P.isEmbeddedIn(i)),l&&(g=g.slice(-1));let h=null;const b=t.candidateEmbedView;for(let P=g.length-1;P>=0;P--){const A=g[P];if(b&&b.model.id==A.id){h=b;break}else{const E=A.findView(s);if(!ue(d)||d.call(s,this,E)){h=E;break}}}h&&h!=b&&(this.clearEmbedding(t),t.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&b&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:i}=r.options,{initialParentId:s}=t;if(s&&typeof i=="function"&&!i.call(r,this)){this._disallowUnembed(t);return}}r.model.getConnectedLinks(n,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(t){const{model:e,whenNotAllowed:n="revert"}=t,r=e||this.model,s=(t.paper||this.paper).model;switch(n){case"remove":{r.remove({ui:!0});break}case"revert":{const{initialParentId:o,initialPosition:u,initialZIndices:l}=t;if(u){const{x:g,y:h}=u;r.position(g,h,{deep:!0,ui:!0})}l&&Object.keys(l).forEach(g=>{const h=s.getCell(g);h&&h.set("z",l[g],{ui:!0})});const d=s.getCell(o);d&&d.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const r=this.findAttribute("port",t);if(r){const i=this.findPortNode(r,n);if(i)return i}else{const[i]=this.findBySelector(n);if(i)return i}}return t},notifyPointerdown(t,e,n){zt.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove(t,e,n){zt.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("element:pointerup",t,e,n),zt.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){zt.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){zt.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){zt.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragStart(t,e,n)},pointermove:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:s,delegatedView:o}=r;switch(i&&this.magnetpointermove(t,i,e,n),s){case Tr.MAGNET:this.dragMagnet(t,e,n);break;case Tr.MOVE:(o||this).drag(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointermove(t,e,n);break}this.eventData(t,r)},pointerup:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:s,delegatedView:o}=r;switch(i&&this.magnetpointerup(t,i,e,n),s){case Tr.MAGNET:this.dragMagnetEnd(t,e,n);break;case Tr.MOVE:(o||this).dragEnd(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointerup(t,e,n)}i&&this.magnetpointerclick(t,i,e,n),this.checkMouseleave(t)},mouseover:function(t){zt.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){zt.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){zt.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){zt.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,r){zt.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,r)},onmagnet:function(t,e,n){const{currentTarget:r}=t;this.magnetpointerdown(t,r,e,n),this.eventData(t,{targetMagnet:r}),this.dragMagnetStart(t,e,n)},magnetpointerdown:function(t,e,n,r){this.notify("element:magnet:pointerdown",t,e,n,r)},magnetpointermove:function(t,e,n,r){this.notify("element:magnet:pointermove",t,e,n,r)},magnetpointerup:function(t,e,n,r){this.notify("element:magnet:pointerup",t,e,n,r)},magnetpointerdblclick:function(t,e,n,r){this.notify("element:magnet:pointerdblclick",t,e,n,r)},magnetcontextmenu:function(t,e,n,r){this.notify("element:magnet:contextmenu",t,e,n,r)},dragStart:function(t,e,n){if(this.isDefaultInteractionPrevented(t))return;var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:Tr.MOVE,delegatedView:r});const i=r.model.position();r.eventData(t,{initialPosition:i,pointerOffset:i.difference(e,n),restrictedArea:this.paper.getRestrictedArea(r,e,n)})},dragMagnetStart:function(t,e,n){const{paper:r}=this,i=t.isPropagationStopped();if(i&&this.eventData(t,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(t)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:s=t.currentTarget}=this.eventData(t);if(t.stopPropagation(),!r.options.validateMagnet.call(r,this,s,t)){i?this.dragStart(t,e,n):this.pointerdown(t,e,n);return}r.options.magnetThreshold<=0&&this.dragLinkStart(t,s,e,n),this.eventData(t,{action:Tr.MAGNET})},drag:function(t,e,n){var r=this.paper,i=r.options.gridSize,s=this.model,o=this.eventData(t),{pointerOffset:u,restrictedArea:l,embedding:d}=o,g=sr(e+u.x,i),h=sr(n+u.y,i);s.position(g,h,{restrictedArea:l,deep:!0,ui:!0}),r.options.embeddingMode&&(d||(this.prepareEmbedding(o),d=!0),this.processEmbedding(o,t,e,n)),this.eventData(t,{embedding:d})},dragMagnet:function(t,e,n){this.dragLink(t,e,n)},dragEnd:function(t,e,n){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,n){this.dragLinkEnd(t,e,n)},magnetpointerclick:function(t,e,n,r){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,r)}},{Flags:Ut});Et(is.prototype,_m);const km=function(t,e,n){return t},Im=function(t,e,n){var r=e.side||"bottom",i=ar(e.padding||40),s=n.sourceBBox,o=n.targetBBox,u=s.center(),l=o.center(),d,g,h;switch(r){case"bottom":h=1,d="y",g="height";break;case"top":h=-1,d="y",g="height";break;case"left":h=-1,d="x",g="width";break;case"right":h=1,d="x",g="width";break;default:throw new Error("Router: invalid side")}return u[d]+=h*(s[g]/2+i[r]),l[d]+=h*(o[g]/2+i[r]),h*(u[d]-l[d])>0?l[d]=u[d]:u[d]=l[d],[u].concat(t,l)};var Rm={N:"S",S:"N",E:"W",W:"E"},Dm={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function vs(t,e,n){var r=new D(t.x,e.y);return n.containsPoint(r)&&(r=new D(e.x,t.y)),r}function jo(t,e){return t[e==="W"||e==="E"?"width":"height"]}function ke(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function Ki(t){return new pt(t.x,t.y,0,0)}function ms(t){var e=ar(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function ed(t,e){return t.sourceBBox.clone().moveAndExpand(ms(e))}function nd(t,e){return t.targetBBox.clone().moveAndExpand(ms(e))}function Fm(t,e){if(t.sourceAnchor)return t.sourceAnchor;var n=ed(t,e);return n.center()}function Bm(t,e){if(t.targetAnchor)return t.targetAnchor;var n=nd(t,e);return n.center()}function rd(t,e,n){var r=new D(t.x,e.y),i=new D(e.x,t.y),s=ke(t,r),o=ke(t,i),u=Rm[n],l=s===n||s!==u&&(o===u||o!==n)?r:i;return{points:[l],direction:ke(l,e)}}function ss(t,e,n){var r=vs(t,e,n);return{points:[r],direction:ke(r,e)}}function Vm(t,e,n,r){var i={},s=[new D(t.x,e.y),new D(e.x,t.y)],o=s.filter(function(h){return!n.containsPoint(h)}),u=o.filter(function(h){return ke(h,t)!==r}),l;if(u.length>0)l=u.filter(function(h){return ke(t,h)===r}).pop(),l=l||u[0],i.points=[l],i.direction=ke(l,e);else{l=zv(s,o)[0];var d=new D(e).move(l,-jo(n,r)/2),g=vs(d,t,n);i.points=[g,d],i.direction=ke(d,e)}return i}function zm(t,e,n,r){var i=ss(e,t,r),s=i.points[0];if(n.containsPoint(s)){i=ss(t,e,n);var o=i.points[0];if(r.containsPoint(o)){var u=new D(t).move(o,-jo(n,ke(t,o))/2),l=new D(e).move(s,-jo(r,ke(e,s))/2),d=new vt(u,l).midpoint(),g=ss(t,d,n),h=rd(d,e,g.direction);i.points=[g.points[0],h.points[0]],i.direction=h.direction}}return i}function wo(t,e,n,r,i){var s={},o=n.union(r).inflate(1),u=o.center().distance(e)>o.center().distance(t),l=u?e:t,d=u?t:e,g,h,b;return i?(g=D.fromPolar(o.width+o.height,Dm[i],l),g=o.pointNearestToPoint(g).move(g,-1)):g=o.pointNearestToPoint(l).move(l,1),h=vs(g,d,o),g.round().equals(h.round())?(h=D.fromPolar(o.width+o.height,$e(g.theta(l))+Math.PI/2,d),h=o.pointNearestToPoint(h).move(d,1).round(),b=vs(g,h,o),s.points=u?[h,b,g]:[g,b,h]):s.points=u?[h,g]:[g,h],s.direction=ke(u?g:h,e),s}function Xo(t,e,n){var r=ed(n,e),i=nd(n,e),s=Fm(n,e),o=Bm(n,e);r=r.union(Ki(s)),i=i.union(Ki(o)),t=Yt(t).map(D),t.unshift(s),t.push(o);for(var u,l=[],d=0,g=t.length-1;d<g;d++){var h=null,b=t[d],P=t[d+1],A=!!ke(b,P);if(d===0)d+1===g?r.intersect(i.clone().inflate(1))?h=wo(b,P,r,i):A||(h=zm(b,P,r,i)):r.containsPoint(P)?h=wo(b,P,r,Ki(P).moveAndExpand(ms(e))):A||(h=ss(b,P,r));else if(d+1===g){var E=A&&ke(P,b)===u;i.containsPoint(b)||E?h=wo(b,P,Ki(b).moveAndExpand(ms(e)),i,u):A||(h=Vm(b,P,i,u))}else A||(h=rd(b,P,u));h?(Array.prototype.push.apply(l,h.points),u=h.direction):u=ke(b,P),d+1<g&&l.push(P)}return l}var id={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,n){if(!ue(Xo))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Xo(t,Et({},id,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function uu(t){this.map={},this.options=t,this.mapGridSize=100}uu.prototype.build=function(t,e){var n=this.options,r=Yt(n.excludeEnds).reduce(function(l,d){var g=e.get(d);if(g){var h=t.getCell(g.id);h&&l.push(h)}return l},[]),i=[],s=t.getCell(e.get("source").id);s&&(i=qo(i,s.getAncestors().map(function(l){return l.id})));var o=t.getCell(e.get("target").id);o&&(i=qo(i,o.getAncestors().map(function(l){return l.id})));var u=this.mapGridSize;return t.getElements().reduce(function(l,d){var g=Yt(n.excludeTypes).includes(d.get("type")),h=r.find(function(j){return j.id===d.id}),b=i.includes(d.id),P=g||h||b;if(!P)for(var A=d.getBBox().moveAndExpand(n.paddingBox),E=A.origin().snapToGrid(u),N=A.corner().snapToGrid(u),L=E.x;L<=N.x;L+=u)for(var $=E.y;$<=N.y;$+=u){var Y=L+"@"+$;l[Y]=l[Y]||[],l[Y].push(A)}return l},this.map),this};uu.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return Yt(this.map[e]).every(function(n){return!n.containsPoint(t)})};function dr(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}dr.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=zh(this.items,t,(function(r){return this.values[r]}).bind(this));this.items.splice(n,0,t)};dr.prototype.remove=function(t){this.hash[t]=this.CLOSE};dr.prototype.isOpen=function(t){return this.hash[t]===this.OPEN};dr.prototype.isClose=function(t){return this.hash[t]===this.CLOSE};dr.prototype.isEmpty=function(){return this.items.length===0};dr.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};function sd(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function od(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function ad(t,e){if(t.sourceAnchor)return t.sourceAnchor;var n=sd(t,e);return n.center()}function $m(t,e){if(t.targetAnchor)return t.targetAnchor;var n=od(t,e);return n.center()}function Ao(t,e,n,r,i){var s=360/n,o=t.theta(Hm(t,e,r,i)),u=fn(o+s/2);return s*Math.floor(u/s)}function Hm(t,e,n,r){var i=r.step,s=e.x-t.x,o=e.y-t.y,u=s/n.x,l=o/n.y,d=u*i,g=l*i;return new D(t.x+d,t.y+g)}function Tc(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function qm(t,e,n){var r=n.step;Yt(n.directions).forEach(function(i){i.gridOffsetX=i.offsetX/r*e.x,i.gridOffsetY=i.offsetY/r*e.y})}function Gm(t,e,n){return{source:e.clone(),x:Sc(n.x-e.x,t),y:Sc(n.y-e.y,t)}}function Sc(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);if(!r)return n;var i=r*e,s=n-i,o=s/r;return e+o}function Um(t,e){var n=e.source,r=sr(t.x-n.x,e.x)+n.x,i=sr(t.y-n.y,e.y)+n.y;return new D(r,i)}function ii(t,e){return t.round(e)}function os(t,e,n){return ii(Um(t.clone(),e),n)}function ai(t){return t.clone().toString()}function To(t){return new D(t.x===0?0:Math.abs(t.x)/t.x,t.y===0?0:Math.abs(t.y)/t.y)}function Wm(t,e,n,r,i,s,o){for(var u=[],l=To(i.difference(n)),d=ai(n),g=t[d],h;g;){h=e[d];var b=To(h.difference(g));b.equals(l)||(u.unshift(h),l=b),d=ai(g),g=t[d]}var P=e[d],A=To(P.difference(r));return A.equals(l)||u.unshift(P),u}function Pc(t,e){for(var n=1/0,r=0,i=e.length;r<i;r++){var s=t.manhattanDistance(e[r]);s<n&&(n=s)}return n}function Ec(t,e,n,r,i){var s=i.precision,o=i.directionMap,u=t.difference(e.center()),l=te(o)?Object.keys(o):[],d=Yt(n),g=l.reduce(function(h,b){if(d.includes(b)){for(var P=o[b],A=new D(t.x+P.x*(Math.abs(u.x)+e.width),t.y+P.y*(Math.abs(u.y)+e.height)),E=new vt(t,A),N=E.intersect(e)||[],L=N.length,$,Y=null,j=0;j<L;j++){var nt=N[j],ut=t.squaredDistance(nt);($===void 0||ut>$)&&($=ut,Y=nt)}if(Y){var c=os(Y,r,s);e.containsPoint(c)&&(c=os(c.offset(P.x*r.x,P.y*r.y),r,s)),h.push(c)}}return h},[]);return e.containsPoint(t)||g.push(os(t,r,s)),g}function Ym(t,e,n,r){var i=r.precision,s,o;t instanceof pt?s=ii(ad(this,r).clone(),i):s=ii(t.clone(),i),e instanceof pt?o=ii($m(this,r).clone(),i):o=ii(e.clone(),i);var u=Gm(r.step,s,o),l,d,g,h;if(t instanceof pt?(l=s,g=Ec(l,t,r.startDirections,u,r)):(l=s,g=[l]),e instanceof pt?(d=o,h=Ec(o,e,r.endDirections,u,r)):(d=o,h=[d]),g=g.filter(_t=>!n(_t)),h=h.filter(_t=>!n(_t)),g.length>0&&h.length>0){for(var b=new dr,P={},A={},E={},N=0,L=g.length;N<L;N++){var $=g[N],Y=ai($);b.add(Y,Pc($,h)),P[Y]=$,E[Y]=0}var j=r.previousDirectionAngle,nt=j===void 0,ut,c,w=r.directions;qm(w,u,r);for(var T=w.length,_=Yt(h).reduce(function(_t,Xt){var Mt=ai(Xt);return _t.push(Mt),_t},[]),F=r.maximumLoops;!b.isEmpty()&&F>0;){var H=b.pop(),V=P[H],ot=A[H],ht=E[H],q=ot===void 0,G=V.equals(l),X;q?nt?G?X=null:X=Ao(l,V,T,u,r):X=j:X=Ao(ot,V,T,u,r);var U=g.length===h.length;if(U){for(var Ct=0;Ct<g.length;Ct++)if(!g[Ct].equals(h[Ct])){U=!1;break}}var St=q&&U;if(!St&&_.indexOf(H)>=0)return r.previousDirectionAngle=X,Wm(A,P,V,l,d);for(N=0;N<T;N++){ut=w[N];var ee=ut.angle;if(c=Tc(X,ee),!(!(nt&&G)&&c>r.maxAllowedDirectionChange)){var re=os(V.clone().offset(ut.gridOffsetX,ut.gridOffsetY),u,i),bt=ai(re);if(!(b.isClose(bt)||n(re))){if(_.indexOf(bt)>=0){var Tt=re.equals(d);if(!Tt){var it=Ao(re,d,T,u,r),Q=Tc(ee,it);if(Q>r.maxAllowedDirectionChange)continue}}var ft=ut.cost,$t=G?0:r.penalties[c],kt=ht+ft+$t;(!b.isOpen(bt)||kt<E[bt])&&(P[bt]=re,A[bt]=V,E[bt]=kt,b.add(bt,kt+Pc(re,h)))}}}F--}}return r.fallbackRoute.call(this,l,d,r)}function jm(t){if(t.directions=pe(t,"directions"),t.penalties=pe(t,"penalties"),t.paddingBox=pe(t,"paddingBox"),t.padding=pe(t,"padding"),t.padding){var e=ar(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}Yt(t.directions).forEach(function(n){var r=new D(0,0),i=new D(n.offsetX,n.offsetY);n.angle=fn(r.theta(i))})}function Xm(t,e,n){jm(e),n.options.perpendicular=!!e.perpendicular;var r=sd(n,e),i=od(n,e),s=ad(n,e);let o;if(typeof e.isPointObstacle=="function")o=e.isPointObstacle;else{const Y=new uu(e);Y.build(n.paper.model,n.model),o=j=>!Y.isPointAccessible(j)}for(var u=Yt(t).map(D),l=[],d=s,g,h,b=0,P=u.length;b<=P;b++){var A=null;if(h=g||r,g=u[b],!g){g=i;var E=!n.model.get("source").id||!n.model.get("target").id;if(E&&ue(e.draggingRoute)){var N=h===r?s:h,L=g.origin();A=e.draggingRoute.call(n,N,L,e)}}if(A=A||Ym.call(n,h,g,o,e),A===null)return e.fallbackRouter(t,e,n);var $=A[0];$&&$.equals(d)&&A.shift(),d=A[A.length-1]||d,Array.prototype.push.apply(l,A)}return l}const Zo=function(t,e,n){return Xm(t,Et({},id,e),n)};var Zm={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var r=t.theta(e),i=[],s={x:e.x,y:t.y},o={x:t.x,y:e.y};if(r%180>90){var u=s;s=o,o=u}var l=r%90<45?s:o,d=new vt(t,l),g=90*Math.ceil(r/90),h=D.fromPolar(d.squaredLength(),$e(g+135),l),b=new vt(e,h),P=d.intersection(b),A=P||e,E=P?A:t,N=360/n.directions.length,L=E.theta(e),$=fn(L+N/2),Y=N*Math.floor($/N);return n.previousDirectionAngle=Y,A&&i.push(A.round()),i.push(e),i}};const Jm=function(t,e,n){if(!ue(Zo))throw new Error("Metro requires the manhattan router.");return Zo(t,Et({},Zm,e),n)},ct={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},Cc=[ct.LEFT,ct.RIGHT,ct.TOP,ct.BOTTOM],Mr={[ct.LEFT]:ct.RIGHT,[ct.RIGHT]:ct.LEFT,[ct.TOP]:ct.BOTTOM,[ct.BOTTOM]:ct.TOP},Km=[ct.TOP,ct.BOTTOM],Qi={0:ct.RIGHT,180:ct.LEFT,270:ct.TOP,90:ct.BOTTOM};function si(t){return t.angle()}function ts(t){return new oe(t).simplify({threshold:1}).points}function ys(t,e){const{point:n,x0:r,y0:i,view:s,bbox:o,direction:u}=t,{point:l,x0:d,y0:g,view:h,bbox:b,direction:P}=e;let A;if(s)s.model.isLink()?A=_c(l,n,s):u===ct.ANCHOR_SIDE?A=o.sideNearestToPoint(n):u===ct.MAGNET_SIDE?A=s.model.getBBox().sideNearestToPoint(n):A=u;else{const N=new pt(r,i,0,0);A=Cc.includes(u)?u:N.sideNearestToPoint(l)}let E;if(h)h.model.isLink()?E=_c(n,l,h):P===ct.ANCHOR_SIDE?E=b.sideNearestToPoint(l):P===ct.MAGNET_SIDE?E=h.model.getBBox().sideNearestToPoint(l):E=P;else{const N=new pt(d,g,0,0);E=Cc.includes(P)?P:N.sideNearestToPoint(n)}return[A,E]}function Qm(t,e,n){const{x0:r,y0:i,width:s,height:o,point:u,margin:l}=t,d=r+s,g=i+o,h=r-l,b=d+l,P=i-l,{x:A}=u,{x0:E,y0:N}=e;return E===A&&N<i?ct.BOTTOM:E<A&&N<P?ct.RIGHT:E>A&&N<P?ct.LEFT:E<h&&N>=i||E>b&&N>=i?ct.TOP:E>=h&&E<=A&&N>g||E<=b&&E>=A&&N>g?n.point.x<E?ct.RIGHT:ct.LEFT:ct.TOP}function ty(t,e,n){const{x0:r,y0:i,width:s,height:o,point:u,margin:l}=t,d=r+s,g=i+o,h=r-l,b=d+l,P=g+l,{x:A}=u,{x0:E,y0:N}=e;return E===A&&N>g?ct.TOP:E<A&&N>P?ct.RIGHT:E>A&&N>P?ct.LEFT:E<h&&N<=g||E>b&&N<=g?ct.BOTTOM:E>=h&&E<=A&&N<i||E<=b&&E>=A&&N<i?n.point.x<E?ct.RIGHT:ct.LEFT:ct.BOTTOM}function ey(t,e,n){const{y0:r,x0:i,width:s,height:o,point:u,margin:l}=t,d=i+s,g=r+o,h=i-l,b=r-l,P=g+l,{x:A,y:E}=u,{x0:N,y0:L}=e;return N<A&&L===E?ct.RIGHT:N<=h&&L<E?ct.BOTTOM:N<=h&&L>E?ct.TOP:N>=i&&L<=b||N>=i&&L>=P?ct.LEFT:N>d&&L>=b&&L<=E||N>d&&L<=P&&L>=E?n.point.y<L?ct.BOTTOM:ct.TOP:ct.LEFT}function ny(t,e,n){const{y0:r,x0:i,width:s,height:o,point:u,margin:l}=t,d=i+s,g=r+o,h=d+l,b=r-l,P=g+l,{x:A,y:E}=u,{x0:N,y0:L}=e;return N>A&&L===E?ct.LEFT:N>=h&&L<E?ct.BOTTOM:N>=h&&L>E?ct.TOP:N<=d&&L<=b||N<=d&&L>=P?ct.RIGHT:N<i&&L>=b&&L<=E||N<i&&L<=P&&L>=E?n.point.y<L?ct.BOTTOM:ct.TOP:ct.RIGHT}function ry(t,e,n){const[r]=ys(t,e);switch(r){case ct.TOP:return Qm(t,e,n);case ct.RIGHT:return ny(t,e,n);case ct.BOTTOM:return ty(t,e,n);case ct.LEFT:return ey(t,e,n)}}function _c(t,e,n){const r=n.getTangentAtLength(n.getClosestPointLength(e)),i=Math.round(si(r)/90)*90;if(i%180===0&&t.y===e.y)return t.x<e.x?ct.LEFT:ct.RIGHT;if(t.x===e.x)return t.y<e.y?ct.TOP:ct.BOTTOM;switch(i){case 0:case 180:case 360:return t.y<e.y?ct.TOP:ct.BOTTOM;case 90:case 270:return t.x<e.x?ct.LEFT:ct.RIGHT}}function Lc(t,e,n,r,i,s,o){r===ct.AUTO&&(r=i?ct.MAGNET_SIDE:ct.ANCHOR_SIDE);const u=t&&t.model.isElement(),{x:l,y:d,width:g=0,height:h=0}=u?pt.fromRectUnion(n,t.model.getBBox()):s;return{point:e,x0:l,y0:d,view:t,bbox:n,width:g,height:h,direction:r,margin:u?o:0}}function So({x:t,y:e}){const n=new D(t,e);return{point:n,x0:n.x,y0:n.y,view:null,bbox:new pt(t,e,0,0),width:0,height:0,direction:null,margin:0}}function Mc(t,e,n){const r=e.point.clone(),{x0:i,y0:s,width:o,height:u}=e;switch(t){case"left":r.x=i-n;break;case"right":r.x=i+o+n;break;case"top":r.y=s-n;break;case"bottom":r.y=s+u+n;break}return r}function $n(t,e){const{point:n,x0:r,y0:i,view:s,width:o,height:u,margin:l}=t,{point:d,x0:g,y0:h,width:b,height:P,margin:A}=e,E=g+b,N=h+P,L=r+o,$=i+u,Y=s&&s.model.isElement(),j=r-l,nt=L+l,ut=i-l,c=$+l,w=g-A,T=E+A,_=h-A,F=N+A,[H,V]=ys(t,e),ot=Mc(H,{point:n,x0:r,y0:i,width:o,height:u},l),ht=Mc(V,{point:d,x0:g,y0:h,width:b,height:P},A),{x:q,y:G}=ot,{x:X,y:U}=ht,Ct=(g+E)/2,St=(h+N)/2,ee=(r+L)/2,re=(i+$)/2,bt=(ee<Ct?L+g:E+r)/2,Tt=(re<St?$+h:N+i)/2;if(H==="left"&&V==="right"){if(j<=T){let Q=Tt;return L<=g&&(N>=ut&&U<G?Q=Math.min(_,ut):h<=c&&U>=G&&(Q=Math.max(F,c))),[{x:q,y:G},{x:q,y:Q},{x:X,y:Q},{x:X,y:U}]}const it=(q+X)/2;return[{x:it,y:G},{x:it,y:U}]}else if(H==="right"&&V==="left"){if(nt>=w){let Q=Tt;return q>E&&(N>=ut&&U<G?Q=Math.min(_,ut):h<=c&&U>=G&&(Q=Math.max(F,c))),[{x:q,y:G},{x:q,y:Q},{x:X,y:Q},{x:X,y:U}]}const it=(q+X)/2;return[{x:it,y:G},{x:it,y:U}]}else if(H==="top"&&V==="bottom"){if(G<U){let Q=bt,ft=G;return G<h&&(E>=j&&X<q?Q=Math.min(w,j):g<=nt&&X>=q&&(Q=Math.max(T,nt))),[{x:q,y:ft},{x:Q,y:ft},{x:Q,y:U},{x:X,y:U}]}const it=(G+U)/2;return[{x:q,y:it},{x:X,y:it}]}else if(H==="bottom"&&V==="top"){if(G-l>U){let Q=bt,ft=G;return G>N&&(E>=j&&X<q?Q=Math.min(w,j):g<=nt&&X>=q&&(Q=Math.max(T,nt))),[{x:q,y:ft},{x:Q,y:ft},{x:Q,y:U},{x:X,y:U}]}const it=(G+U)/2;return[{x:q,y:it},{x:X,y:it}]}else if(H==="top"&&V==="top"){let it,Q=Math.min(($+h)/2,U),ft=Math.min((i+N)/2,G);if(U<G){if(q>=T||q<=w)return[{x:q,y:Math.min(G,U)},{x:X,y:Math.min(G,U)}];X>q?it=Math.min(q,w):it=Math.max(q,T)}else{if(X>=nt||X<=j)return[{x:q,y:Math.min(G,U)},{x:X,y:Math.min(G,U)}];X>=q?it=Math.max(X,nt):it=Math.min(X,j)}return[{x:q,y:ft},{x:it,y:ft},{x:it,y:Q},{x:X,y:Q}]}else if(H==="bottom"&&V==="bottom"){let it,Q=Math.max((i+N)/2,U),ft=Math.max(($+h)/2,G);if(U>G){if(q>=T||q<=w)return[{x:q,y:Math.max(G,U)},{x:X,y:Math.max(G,U)}];X>q?it=Math.min(q,w):it=Math.max(q,T)}else{if(X>=nt||X<=j)return[{x:q,y:Math.max(G,U)},{x:X,y:Math.max(G,U)}];X>=q?it=Math.max(X,nt):it=Math.min(X,j)}return[{x:q,y:ft},{x:it,y:ft},{x:it,y:Q},{x:X,y:Q}]}else if(H==="left"&&V==="left"){let it,Q=Math.min((L+g)/2,X),ft=Math.min((r+E)/2,q);return X>q?U<=G?it=Math.min(ut,U):it=Math.max(c,U):U>=G?it=Math.min(_,G):it=Math.max(F,G),[{x:ft,y:G},{x:ft,y:it},{x:Q,y:it},{x:Q,y:U}]}else if(H==="right"&&V==="right"){let it,Q=Math.max((r+E)/2,X),ft=Math.max((L+g)/2,q);return X<q?U<=G?it=Math.min(ut,U):it=Math.max(c,U):U>=G?it=Math.min(_,G):it=Math.max(F,G),[{x:ft,y:G},{x:ft,y:it},{x:Q,y:it},{x:Q,y:U}]}else if(H==="top"&&V==="right"){if(G>U){if(q<X){let Q=Tt;return(Q>St||!Y)&&Q<F&&q<g&&(Q=_),[{x:q,y:Q},{x:X,y:Q},{x:X,y:U}]}return[{x:q,y:U}]}const it=Math.max(bt,T);if(X<q&&U>i&&U<$)return[{x:q,y:G},{x:it,y:G},{x:it,y:U}];if(it>j&&U>i||g>L){const Q=Math.min(i-l,h-A),ft=Math.max(L+l,E+A);return[{x:q,y:Q},{x:ft,y:Q},{x:ft,y:U}]}return[{x:q,y:G},{x:Math.max(it,X),y:G},{x:Math.max(it,X),y:U}]}else if(H==="top"&&V==="left"){if(G>U){if(q>X){let Q=Tt;return(Q>St||!Y)&&Q<F&&q>E&&(Q=_),[{x:q,y:Q},{x:X,y:Q},{x:X,y:U}]}return[{x:q,y:U}]}const it=Math.min(w,bt);if(q<X&&$>=U)return[{x:q,y:G},{x:it,y:G},{x:it,y:U}];if(it<nt&&G<N){const Q=Math.min(ut,_),ft=Math.min(j,w);return[{x:q,y:Q},{x:ft,y:Q},{x:ft,y:U}]}return[{x:q,y:G},{x:it,y:G},{x:it,y:U}]}else if(H==="bottom"&&V==="right"){if(G<U){if(q<X){let Q=Tt;return(Q<St||!Y)&&Q>_&&q<g&&(Q=F),[{x:q,y:Q},{x:X,y:Q},{x:X,y:U}]}return[{x:q,y:U}]}else if(r<X){const Q=Math.max(c,F),ft=Math.max(nt,T);return[{x:q,y:Q},{x:ft,y:Q},{x:ft,y:U}]}const it=bt;return[{x:q,y:G},{x:it,y:G},{x:it,y:U}]}else if(H==="bottom"&&V==="left"){if(G<U){if(q>X){let Q=Tt;return(Q<St||!Y)&&Q>_&&q>E&&(Q=F),[{x:q,y:Q},{x:X,y:Q},{x:X,y:U}]}return[{x:q,y:U}]}else if(L>X){const Q=Math.max(c,F),ft=Math.min(j,w);return[{x:q,y:Q},{x:ft,y:Q},{x:ft,y:U}]}const it=bt;return[{x:q,y:G},{x:it,y:G},{x:it,y:U}]}else if(H==="left"&&V==="bottom"){if(q>=X&&G>=F)return[{x:X,y:G}];if(q>=E&&G<U){const ft=bt;return[{x:ft,y:G},{x:ft,y:U},{x:X,y:U}]}if(X<L&&N<=i){const ft=Tt;return[{x:q,y:G},{x:q,y:ft},{x:X,y:ft}]}const it=Math.min(w,q),Q=Math.max(c,F);return[{x:it,y:G},{x:it,y:Q},{x:X,y:Q}]}else if(H==="left"&&V==="top"){if(q>X&&G<_)return[{x:X,y:G}];if(q>=E&&G>U){const ft=bt;return[{x:ft,y:G},{x:ft,y:U},{x:X,y:U}]}if(X<=L&&U>G){const ft=Tt;return[{x:q,y:G},{x:q,y:ft},{x:X,y:ft}]}const it=U<G?Math.min(j,w):j,Q=Math.min(ut,_);return[{x:it,y:G},{x:it,y:Q},{x:X,y:Q}]}else if(H==="right"&&V==="top"){if(q<=X&&G<_)return[{x:X,y:G}];if(L<g&&G>U){let ft=bt;return[{x:ft,y:G},{x:ft,y:U},{x:X,y:U}]}if(X<q&&h>$){const ft=Tt;return[{x:q,y:G},{x:q,y:ft},{x:X,y:ft}]}const it=Math.max(nt,T),Q=Math.min(ut,_);return[{x:it,y:G},{x:it,y:Q},{x:X,y:Q}]}else if(H==="right"&&V==="bottom"){if(q<=X&&G>=F)return[{x:X,y:G}];if(q<=w&&G<U){const ft=bt;return[{x:ft,y:G},{x:ft,y:U},{x:X,y:U}]}if(X>r&&N<i){const ft=Tt;return[{x:q,y:G},{x:q,y:ft},{x:X,y:ft}]}const it=Math.max(T,q),Q=Math.max(c,F);return[{x:it,y:G},{x:it,y:Q},{x:X,y:Q}]}}function ud(t,e,n){const{sourceDirection:r=ct.AUTO,targetDirection:i=ct.AUTO}=e,s=e.margin||20,o=e.useVertices||!1,u=!!n.model.source().port,l=Lc(n.sourceView,n.sourceAnchor,n.sourceBBox,r,u,n.sourceAnchor,s),d=!!n.model.target().port,g=Lc(n.targetView,n.targetAnchor,n.targetBBox,i,d,n.targetAnchor,s);let h=[];if(!o||t.length===0)return ts($n(l,g));const b=t.map(E=>So(E)),[P]=b;if(l.view&&l.view.model.isElement()&&l.view.model.getBBox().inflate(s).containsPoint(P.point)){const[E]=ys(l,P),N=E,L=So(l.point);L.margin=s,L.direction=E,P.direction=N,h.push(...$n(L,P),P.point)}else{const E=b[1]||g,N=ry(l,P,E);P.direction=N,h.push(...$n(l,P),P.point)}for(let E=0;E<b.length-1;E++){const N=b[E],L=b[E+1],$=new vt(N.point,L.point),Y=si($);if(Y%90===0){const ut=Qi[Y],c=Mr[ut];if(ut!==N.direction)h.push(N.point,L.point),L.direction=c;else{const w=fn(Y-90);let T=0,_=0;w===90?_=-s:w===180?T=-s:w===270?_=s:w===0&&(T=s);const F={x:N.point.x+T,y:N.point.y+_},H={x:L.point.x+T,y:L.point.y+_},V=new vt(L.point,H);L.direction=Qi[si(V)],h.push(N.point,F,H,L.point)}continue}const[j,nt]=Po(N,L);N.direction=j,L.direction=nt,h.push(...$n(N,L),L.point)}const A=b[b.length-1];if(g.view&&g.view.model.isElement())if(g.view.model.getBBox().inflate(s).containsPoint(A.point)){const[E]=Po(A,g),N=So(g.point),[,L]=ys(A,g);N.margin=s,N.direction=L,A.direction=E,h.push(...$n(A,N))}else{const E=ts(h),N=new vt(E[E.length-2],A.point),L=Qi[Math.round(si(N))];A.direction=L;let $=$n(A,g);const[Y,j]=ts([...$,g.point]),nt=new vt(Y,j),ut=Math.round(si(nt)),c=Qi[ut];c!==L&&L===Mr[c]&&(A.margin=s,$=$n(A,g)),h.push(...$)}else{const[E]=Po(A,g);A.direction=E,h.push(...$n(A,g))}return ts(h)}function Po(t,e){const n=t.direction,r=Km.includes(n);let i=t.direction,s=e.direction;if(r){const o=t.point.y>e.point.y,u=e.point.x-t.point.x;n===ct.BOTTOM?(i=o?Mr[n]:u>=0?ct.RIGHT:ct.LEFT,u>0?s=o?ct.LEFT:ct.TOP:u<0&&(s=o?ct.RIGHT:ct.TOP)):(i=o?u>=0?ct.RIGHT:ct.LEFT:Mr[n],u>0?s=o?ct.BOTTOM:ct.LEFT:u<0&&(s=o?ct.BOTTOM:ct.RIGHT))}else{const o=t.point.x>e.point.x,u=e.point.y-t.point.y;n===ct.RIGHT?(i=o?Mr[n]:u>=0?ct.BOTTOM:ct.TOP,u>0?s=o?ct.TOP:ct.LEFT:u<0&&(s=o?ct.BOTTOM:ct.LEFT)):(i=o?u>=0?ct.BOTTOM:ct.TOP:Mr[n],u>0?s=o?ct.RIGHT:ct.TOP:u<0&&(s=o?ct.RIGHT:ct.BOTTOM))}return[i,s]}ud.Directions=ct;const iy=ud,sy=Object.freeze(Object.defineProperty({__proto__:null,manhattan:Zo,metro:Jm,normal:km,oneSide:Im,orthogonal:Xo,rightAngle:iy},Symbol.toStringTag,{value:"Module"})),Er={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},oy=Object.values(Er),ay=10,uy=1,cu=function(t,e,n=[],r={}){const{cornerType:i=Er.POINT,cornerRadius:s=ay,cornerPreserveAspectRatio:o=!1,precision:u=uy,raw:l=!1}=r;if(oy.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let d;if(i===Er.POINT||!s){const g=[t].concat(n).concat([e]),h=new oe(g);d=new wt(h)}else{d=new wt,d.appendSegment(wt.createSegment("M",t));let g;const h=n.length;for(let b=0;b<h;b++){const P=new D(n[b]),A=n[b-1]||t,E=n[b+1]||e,N=g||P.distance(A)/2;g=P.distance(E)/2;let L,$;o?L=$=-Math.min(s,N,g):(L=-Math.min(s,N),$=-Math.min(s,g));const Y=P.clone().move(A,L).round(u),j=P.clone().move(E,$).round(u);switch(d.appendSegment(wt.createSegment("L",Y)),i){case Er.CUBIC:{const nt=.3333333333333333,ut=2/3,c=new D(nt*Y.x+ut*P.x,ut*P.y+nt*Y.y),w=new D(nt*j.x+ut*P.x,ut*P.y+nt*j.y);d.appendSegment(wt.createSegment("C",c,w,j));break}case Er.LINE:{d.appendSegment(wt.createSegment("L",j));break}case Er.GAP:{d.appendSegment(wt.createSegment("M",j));break}}}d.appendSegment(wt.createSegment("L",e))}return l?d:d.serialize()};var cy=5,Oc=["arc","gap","cubic"],ly=0,Nc=1,fy=["smooth"],es=1/3,ns=2/3;function kc(t,e){let{x:n,y:r}=t,{x:i,y:s}=e;if(n>i){let o=n;n=i,i=o,o=r,r=s,s=o}if(r>s){let o=n;n=i,i=o,o=r,r=s,s=o}return[new D(n,r),new D(i,s)]}function hy(t,e){const[{x:n,y:r},{x:i,y:s}]=kc(t.start,t.end),[{x:o,y:u},{x:l,y:d}]=kc(e.start,e.end),g=n<=l&&o<=i,h=r<=d&&u<=s;return g&&h}function Eo(t,e,n){var r=[].concat(t,n,e);return r.reduce(function(i,s,o){var u=r[o+1];return u!=null&&(i[o]=rr(s,u)),i},[])}function dy(t){var e=t.paper,n=e._jumpOverUpdateList;if(n==null){n=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",function(){this.hasActiveBatch()||gy(e)}),r.on("reset",function(){n=e._jumpOverUpdateList=[]})}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",function(){n.splice(n.indexOf(t),1)}))}function gy(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++){const r=e[n],i=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(i)}}function py(t,e){return Yt(e).reduce(function(n,r){var i=t.intersection(r);return i&&n.push(i),n},[])}function Ic(t,e){return rr(t,e).squaredLength()}function vy(t,e,n){return e.reduce(function(r,i,s){if(i.skip===!0)return r;var o=r.pop()||t,u=us(i).move(o.start,-n),l=us(i).move(o.start,+n),d=e[s+1];if(d!=null){var g=l.distance(d);g<=n&&(l=d.move(o.start,g),d.skip=!0)}else{var h=u.distance(o.end);if(h<n*2+Nc)return r.push(o),r}var b=l.distance(o.start);if(b<n*2+Nc)return r.push(o),r;var P=rr(u,l);return P.isJump=!0,r.push(rr(o.start,u),P,rr(l,o.end)),r},[])}function Rc(t,e,n,r){var i=new wt,s;return s=wt.createSegment("M",t[0].start),i.appendSegment(s),Yt(t).forEach(function(o,u){if(o.isJump){var l,d,g,h;if(n==="arc"){l=-90,d=o.start.difference(o.end);var b=+(d.x<0||d.x===0&&d.y<0);b&&(l+=180);var P=o.midpoint(),A=new vt(P,o.end).rotate(P,l),E;E=new vt(o.start,P),g=E.pointAt(2/3).rotate(o.start,l),h=A.pointAt(1/3).rotate(A.end,-l),s=wt.createSegment("C",g,h,A.end),i.appendSegment(s),E=new vt(P,o.end),g=A.pointAt(1/3).rotate(A.end,l),h=E.pointAt(1/3).rotate(o.end,-l),s=wt.createSegment("C",g,h,o.end),i.appendSegment(s)}else if(n==="gap")s=wt.createSegment("M",o.end),i.appendSegment(s);else if(n==="cubic"){l=o.start.theta(o.end);var N=e*.6,L=e*1.35;d=o.start.difference(o.end),b=+(d.x<0||d.x===0&&d.y<0),b&&(L*=-1),g=D(o.start.x+N,o.start.y+L).rotate(o.start,l),h=D(o.end.x-N,o.end.y+L).rotate(o.end,l),s=wt.createSegment("C",g,h,o.end),i.appendSegment(s)}}else{var $=t[u+1];r==0||!$||$.isJump?(s=wt.createSegment("L",o.end),i.appendSegment(s)):my(r,i,o.end,o.start,$.end)}}),i}function my(t,e,n,r,i){var s=n.distance(r)/2,o=n.distance(i)/2,u=-Math.min(t,s),l=-Math.min(t,o),d=n.clone().move(r,u).round(),g=n.clone().move(i,l).round(),h=new D(es*d.x+ns*n.x,ns*n.y+es*d.y),b=new D(es*g.x+ns*n.x,ns*n.y+es*g.y),P;P=wt.createSegment("L",d),e.appendSegment(P),P=wt.createSegment("C",h,b,g),e.appendSegment(P)}const yy=function(t,e,n,r){dy(this);var i=r.raw,s=r.size||cy,o=r.jump&&(""+r.jump).toLowerCase(),u=r.radius||ly,l=r.ignoreConnectors||fy;Oc.indexOf(o)===-1&&(o=Oc[0]);var d=this.paper,g=d.model,h=g.getLinks();if(h.length===1)return Rc(Eo(t,e,n),s,o,u);var b=this.model,P=h.indexOf(b),A=d.options.defaultConnector||{},E=h.filter(function(nt,ut){var c=nt.get("connector")||A;return Yt(l).includes(c.name)?!1:ut>P?c.name!=="jumpover":!0}),N=E.map(function(nt){return d.findViewByModel(nt)}),L=Eo(t,e,n),$=N.map(function(nt){return nt==null?[]:nt===this?L:Eo(nt.sourcePoint,nt.targetPoint,nt.route)},this),Y=L.reduce(function(nt,ut){var c=E.reduce(function(w,T,_){if(T!==b){const F=$[_].slice(),H=F.findIndex(ot=>hy(ut,ot));H>-1&&ut.containsPoint(F[H].end)&&F.splice(H+1,1);const V=py(ut,F);w.push.apply(w,V)}return w},[]).sort(function(w,T){return Ic(ut.start,w)-Ic(ut.start,T)});return c.length>0?nt.push.apply(nt,vy(ut,c,s)):nt.push(ut),nt},[]),j=Rc(Y,s,o,u);return i?j:j.serialize()},xy=function(t,e,n=[],r={}){const{raw:i}=r;return cu(t,e,n,{cornerType:"point",raw:i})},by=10,wy=0,Ay=function(t,e,n=[],r={}){const{radius:i=by,raw:s}=r;return cu(t,e,n,{cornerType:"cubic",cornerRadius:i,precision:wy,raw:s})},Ty=function(t,e,n,r){var i=r&&r.raw,s;if(n&&n.length!==0){var o=[t].concat(n).concat([e]),u=Qt.throughPoints(o);s=new wt(u)}else{s=new wt;var l;if(l=wt.createSegment("M",t),s.appendSegment(l),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var d=(t.x+e.x)/2;l=wt.createSegment("C",d,t.y,d,e.y,e.x,e.y),s.appendSegment(l)}else{var g=(t.y+e.y)/2;l=wt.createSegment("C",t.x,g,e.x,g,e.x,e.y),s.appendSegment(l)}}return i?s:s.serialize()},Qe={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Oe={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},lu=function(t,e,n=[],r={},i){const s=!!r.raw,{direction:o=Qe.AUTO,precision:u=3}=r,l={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new D(r.sourceTangent):null,targetTangent:r.targetTangent?new D(r.targetTangent):null,rotate:!!r.rotate};typeof r.sourceDirection=="string"?l.sourceDirection=r.sourceDirection:typeof r.sourceDirection=="number"?l.sourceDirection=new D(1,0).rotate(null,r.sourceDirection):l.sourceDirection=r.sourceDirection?new D(r.sourceDirection).normalize():null,typeof r.targetDirection=="string"?l.targetDirection=r.targetDirection:typeof r.targetDirection=="number"?l.targetDirection=new D(1,0).rotate(null,r.targetDirection):l.targetDirection=r.targetDirection?new D(r.targetDirection).normalize():null;const d=[t,...n,e].map(E=>new D(E));let g;if(l.sourceTangent)g=l.sourceTangent;else{const E=_y(i,d,o,l),N=d[0].distance(d[1])*l.coeff,L=d[1].difference(d[0]).normalize(),$=Jo(E,L);if($>Math.PI/4){const Y=N+($-Math.PI/4)*l.angleTangentCoefficient;g=E.clone().scale(Y,Y)}else g=E.clone().scale(N,N)}let h;if(l.targetTangent)h=l.targetTangent;else{const E=Ly(i,d,o,l),N=d.length-1,L=d[N-1].distance(d[N])*l.coeff,$=d[N-1].difference(d[N]).normalize(),Y=Jo(E,$);if(Y>Math.PI/4){const j=L+(Y-Math.PI/4)*l.angleTangentCoefficient;h=E.clone().scale(j,j)}else h=E.clone().scale(L,L)}const P=Oy(d,g,h,l).map(E=>Ny(E,l)),A=new wt(P).round(u);return s?A:A.serialize()};lu.Directions=Qe;lu.TangentDirections=Oe;function Sy(t,e,n){const{sourceBBox:r}=t;let i,s;if(!t.sourceView)r.x>e[1].x?i="right":i="left";else if(s=t.sourceView.model.angle(),n.rotate&&s){const u=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),s),i=u.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let o;switch(i){case"left":o=new D(-1,0);break;case"right":default:o=new D(1,0);break}return n.rotate&&s&&o.rotate(null,-s),o}function Py(t,e,n){const{targetBBox:r}=t;let i,s;if(!t.targetView)r.x>e[e.length-2].x?i="left":i="right";else if(s=t.targetView.model.angle(),n.rotate&&s){const u=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),s),i=u.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let o;switch(i){case"left":o=new D(-1,0);break;case"right":default:o=new D(1,0);break}return n.rotate&&s&&o.rotate(null,-s),o}function Ey(t,e,n){const{sourceBBox:r}=t;let i,s;if(!t.sourceView)r.y>e[1].y?i="bottom":i="top";else if(s=t.sourceView.model.angle(),n.rotate&&s){const u=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),s),i=u.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let o;switch(i){case"top":o=new D(0,-1);break;case"bottom":default:o=new D(0,1);break}return n.rotate&&s&&o.rotate(null,-s),o}function Cy(t,e,n){const{targetBBox:r}=t;let i,s;if(!t.targetView)r.y>e[e.length-2].y?i="top":i="bottom";else if(s=t.targetView.model.angle(),n.rotate&&s){const u=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),s),i=u.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let o;switch(i){case"top":o=new D(0,-1);break;case"bottom":default:o=new D(0,1);break}return n.rotate&&s&&o.rotate(null,-s),o}function Dc(t,e,n){const{sourceBBox:r}=t;let i,s;if(!t.sourceView)i=r.sideNearestToPoint(e[1]);else if(s=t.sourceView.model.angle(),n.rotate&&s){const u=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),s),i=u.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let o;switch(i){case"top":o=new D(0,-1);break;case"bottom":o=new D(0,1);break;case"right":o=new D(1,0);break;case"left":o=new D(-1,0);break}return n.rotate&&s&&o.rotate(null,-s),o}function Fc(t,e,n){const{targetBBox:r}=t;let i,s;if(!t.targetView)i=r.sideNearestToPoint(e[e.length-2]);else if(s=t.targetView.model.angle(),n.rotate&&s){const u=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),s),i=u.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let o;switch(i){case"top":o=new D(0,-1);break;case"bottom":o=new D(0,1);break;case"right":o=new D(1,0);break;case"left":o=new D(-1,0);break}return n.rotate&&s&&o.rotate(null,-s),o}function Bc(t,e,n){return e[1].difference(e[0]).normalize()}function Vc(t,e,n){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function zc(t,e,n){const{sourceBBox:r}=t,i=r.center();return e[0].difference(i).normalize()}function $c(t,e,n){const{targetBBox:r}=t,i=r.center();return e[e.length-1].difference(i).normalize()}function _y(t,e,n,r){if(r.sourceDirection)switch(r.sourceDirection){case Oe.UP:return new D(0,-1);case Oe.DOWN:return new D(0,1);case Oe.LEFT:return new D(-1,0);case Oe.RIGHT:return new D(1,0);case Oe.AUTO:return Dc(t,e,r);case Oe.CLOSEST_POINT:return Bc(t,e);case Oe.OUTWARDS:return zc(t,e);default:return r.sourceDirection}switch(n){case Qe.HORIZONTAL:return Sy(t,e,r);case Qe.VERTICAL:return Ey(t,e,r);case Qe.CLOSEST_POINT:return Bc(t,e);case Qe.OUTWARDS:return zc(t,e);case Qe.AUTO:default:return Dc(t,e,r)}}function Ly(t,e,n,r){if(r.targetDirection)switch(r.targetDirection){case Oe.UP:return new D(0,-1);case Oe.DOWN:return new D(0,1);case Oe.LEFT:return new D(-1,0);case Oe.RIGHT:return new D(1,0);case Oe.AUTO:return Fc(t,e,r);case Oe.CLOSEST_POINT:return Vc(t,e);case Oe.OUTWARDS:return $c(t,e);default:return r.targetDirection}switch(n){case Qe.HORIZONTAL:return Py(t,e,r);case Qe.VERTICAL:return Cy(t,e,r);case Qe.CLOSEST_POINT:return Vc(t,e);case Qe.OUTWARDS:return $c(t,e);case Qe.AUTO:default:return Fc(t,e,r)}}function My(t,e){const n=Math.cos(e),r=Math.sin(e),i=n*t.x-r*t.y,s=r*t.x+n*t.y;t.x=i,t.y=s}function Jo(t,e){let n=t.dot(e)/(t.magnitude()*e.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function Hc(t,e){return t.x*e.y-t.y*e.x}function Oy(t,e,n,r){const{tau:i,coeff:s}=r,o=[],u=[],l=[],d=t.length-1;for(let g=0;g<d;g++)o[g]=t[g].distance(t[g+1]);u[0]=e,u[d]=n;for(let g=1;g<d;g++){let h,b;g===1?h=t[g-1].clone().offset(u[g-1].x,u[g-1].y):h=t[g-1].clone(),g===d-1?b=t[g+1].clone().offset(u[g+1].x,u[g+1].y):b=t[g+1].clone();const P=h.difference(t[g]).normalize(),A=b.difference(t[g]).normalize(),E=Jo(P,A);let N=(Math.PI-E)/2,L;const $=Hc(P,A);let Y;Y=Hc(t[g].difference(t[g+1]),t[g].difference(t[g-1])),$<0&&(N=-N),E<Math.PI/2&&(N<0&&Y<0||N>0&&Y>0)&&(N=N-Math.PI),L=A.clone(),My(L,N);const j=L.clone(),nt=L.clone(),ut=o[g-1]*s,c=o[g]*s;j.scale(ut,ut),nt.scale(c,c),u[g]=[j,nt]}for(let g=0;g<d;g++){let h,b;g===0?h=t[g+1].difference(u[g].x/i,u[g].y/i):h=t[g+1].difference(u[g][1].x/i,u[g][1].y/i),g===d-1?b=t[g].clone().offset(u[g+1].x/i,u[g+1].y/i):b=t[g].difference(u[g+1][0].x/i,u[g+1][0].y/i),l[g]=[h,t[g],t[g+1],b]}return l}function Ny(t,e){const{tau:n}=e,r=new D;r.x=t[1].x+(t[2].x-t[0].x)/(6*n),r.y=t[1].y+(t[2].y-t[0].y)/(6*n);const i=new D;return i.x=t[2].x+(t[3].x-t[1].x)/(6*n),i.y=t[2].y+(t[3].y-t[1].y)/(6*n),new Qt(t[1],r,i,t[2])}const ky=Object.freeze(Object.defineProperty({__proto__:null,curve:lu,jumpover:yy,normal:xy,rounded:Ay,smooth:Ty,straight:cu},Symbol.toStringTag,{value:"Module"})),Ot={TOOLS:zt.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},ui=zt.extend({className:function(){var t=zt.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){zt.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Ot.RENDER],attrs:[Ot.UPDATE],router:[Ot.UPDATE],connector:[Ot.CONNECTOR],smooth:[Ot.UPDATE],manhattan:[Ot.UPDATE],toolMarkup:[Ot.LEGACY_TOOLS],labels:[Ot.LABELS],labelMarkup:[Ot.LABELS],vertices:[Ot.VERTICES,Ot.UPDATE],vertexMarkup:[Ot.VERTICES],source:[Ot.SOURCE,Ot.UPDATE],target:[Ot.TARGET,Ot.UPDATE]},initFlag:[Ot.RENDER,Ot.SOURCE,Ot.TARGET,Ot.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,Ot.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,Ot.SOURCE)}if(this.hasFlag(t,Ot.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,Ot.TARGET)}const{paper:n,sourceView:r,targetView:i}=this;if(n&&(r&&!n.isViewMounted(r)||i&&!n.isViewMounted(i)))return t;if(this.hasFlag(t,Ot.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),t=this.removeFlag(t,[Ot.RENDER,Ot.UPDATE,Ot.VERTICES,Ot.LABELS,Ot.TOOLS,Ot.LEGACY_TOOLS,Ot.CONNECTOR]),t;let s=!1;this.hasFlag(t,Ot.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,Ot.VERTICES));const{model:o}=this,{attributes:u}=o;let l=this.hasFlag(t,Ot.LABELS),d=this.hasFlag(t,Ot.LEGACY_TOOLS);l&&(this.onLabelsChange(o,u.labels,e),t=this.removeFlag(t,Ot.LABELS),s=!0),d&&(this.renderTools(),t=this.removeFlag(t,Ot.LEGACY_TOOLS));const g=this.hasFlag(t,Ot.UPDATE),h=this.hasFlag(t,Ot.CONNECTOR);return(g||h)&&(g?e.translateBy&&o.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[Ot.UPDATE,Ot.TOOLS,Ot.CONNECTOR]),l=!1,d=!1,s=!0),l&&this.updateLabelPositions(),d&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(t,Ot.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Ot.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(Ot.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1){var i=!!e[n[1]];if(i){if(r===2)return"markup"in Object(t.propertyValue);if(n[2]!=="markup")return!1}}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=rt(t);Array.isArray(e)||(e=[e]);for(var n=this._V,r=0,i=e.length;r<i;r++){var s=e[r],o=s.attr("class");o&&(o=Gv(o),n[Wt.camelCase(o)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if(typeof t=="string")return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=rt(t),n=document.createDocumentFragment();if(!Array.isArray(e))n.appendChild(e.node);else for(var r=0,i=e.length;r<i;r++){var s=e[r].node;n.appendChild(s)}return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e=t.fragment;if(!(t.fragment instanceof DocumentFragment)||!t.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var n,r=e.childNodes;return r.length>1||r[0].nodeName.toUpperCase()!=="G"?n=rt("g").append(e):n=rt(r[0]),n.addClass("label"),{node:n.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},r=this._labelSelectors={},i=this.model,s=i.attributes.labels||[],o=s.length;if(o===0)return e&&e.remove(),this;e?e.empty():(e=t.labels=rt("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(cn(pe(this,"className"))),e.attr("model-id",i.id)));for(var u=0;u<o;u++){var l=s[u],d=this._normalizeLabelMarkup(this._getLabelMarkup(l.markup)),g,h;if(d)g=d.node,h=d.selectors;else{var b=i._builtins.defaultLabel,P=this._normalizeLabelMarkup(this._getLabelMarkup(b.markup)),A=i._getDefaultLabel(),E=this._normalizeLabelMarkup(this._getLabelMarkup(A.markup)),N=E||P;g=N.node,h=N.selectors}g.setAttribute("label-idx",u),e.append(g),n[u]=g;var L=this.selector;if(h[L])throw new Error("dia.LinkView: ambiguous label root selector.");h[L]=g,r[u]=h}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:n,_V:r,options:i}=this,{labels:s}=r;if(!s||!n.hasLabels())return;const{node:o}=s;i.labelsLayer?e.getLayerView(i.labelsLayer).insertSortedNode(o,n.get("z")):o.parentNode!==t&&t.appendChild(o)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:n}=e;n&&t.labelsLayer&&n.remove()},findLabelNode:function(t,e){const n=this._labelCache[t];if(!n)return null;const r=this._labelSelectors[t],[i=null]=this.findBySelector(e,n,r);return i},_mergeLabelAttrs:function(t,e,n,r){return e===null?null:e===void 0?n===null?null:n===void 0?t?void 0:r:t?n:ye({},r,n):t?ye({},n,e):ye({},r,n,e)},_mergeLabelSize:function(t,e){return t===null?null:t===void 0?e===null?null:e===void 0?void 0:e:ye({},e,t)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),r=t._builtins.defaultLabel,i=r.attrs,s=t._getDefaultLabel(),o=s.markup,u=s.attrs,l=s.size,d=0,g=e.length;d<g;d++){var h=this._labelCache[d];h.setAttribute("cursor",n?"move":"default");var b=this._labelSelectors[d],P=e[d],A=P.markup,E=P.attrs,N=P.size,L=this._mergeLabelAttrs(A||o,E,u,i),$=this._mergeLabelSize(N,l);this.updateDOMSubtreeAttributes(h,L,{rootBBox:new pt($),selectors:b})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t=Wt(this._V.linkTools.node).empty(),e=Me(this.model.get("toolMarkup")||this.model.toolMarkup),n=rt(e());if(t.append(n.node),this._toolCache=n,this.options.doubleLinkTools){var r;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=Me(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=rt(e())):r=n.clone(),t.append(r.node),this._tool2Cache=r}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=Wt(this._V.markerVertices.node).empty(),e=Me(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,r){t.append(rt(e(Et({idx:r},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=Wt(this._V.markerArrowheads.node);t.empty();var e=Me(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=rt(e({end:"source"})),this._V.targetArrowhead=rt(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){const n=this.model,r=n.vertices(),i=[this.sourceAnchor,...r,this.targetAnchor],s=i.length,o=new oe(i);o.simplify({threshold:.001});const u=o.points.map(d=>d.toJSON()),l=u.length;return s===l?0:(n.vertices(u.slice(1,l-1),t),s-l)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new D(this.sourceAnchor);case"target":return new D(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new D(this.sourcePoint);case"target":return new D(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:n,path:r}=this;if(!n||!r)return;const i=new oe(n);i.translate(t,e),this.route=i.points,this._translateConnectionPoints(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),n=this.findAnchors(e),r=this.sourceAnchor=n.source,i=this.targetAnchor=n.target,s=this.findRoute(e);this.route=s;var o=this.findConnectionPoints(s,r,i);this.sourcePoint=o.source,this.targetPoint=o.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:n}=this,r=this.findMarkerPoints(t,e,n),i=this.findPath(t,r.source||e,r.target||n);this.path=i},findMarkerPoints:function(t,e,n){var r=t[0],i=t[t.length-1],s=this._markerCache,o,u;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),o=D(e).move(r||n,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),u=D(n).move(i||e,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=o||e.clone(),s.targetPoint=u||n.clone(),{source:o,target:u}},findAnchorsOrdered:function(t,e,n,r){var i,s,o,u,l=this.model,d=l.get(t),g=l.get(n),h=this.getEndView(t),b=this.getEndView(n),P=this.getEndMagnet(t),A=this.getEndMagnet(n);h?(e?o=new D(e):b?o=A:o=new D(g),i=this.getAnchor(d.anchor,h,P,o,t)):i=new D(d),b?(u=new D(r||i),s=this.getAnchor(g.anchor,b,A,u,n)):s=new D(g);var E={};return E[t]=i,E[n]=s,E},findAnchors:function(t){var e=this.model,n=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(t,e,n){var r=t[0],i=t[t.length-1],s=this.model,o=s.get("source"),u=s.get("target"),l=this.sourceView,d=this.targetView,g=this.paper.options,h,b,P;if(l&&!l.isNodeConnection(this.sourceMagnet)){h=this.sourceMagnet||l.el;var A=o.connectionPoint||g.defaultConnectionPoint,E=r||n,N=new vt(E,e);P=this.getConnectionPoint(A,l,h,N,"source")}else P=e;var L;if(d&&!d.isNodeConnection(this.targetMagnet)){b=this.targetMagnet||d.el;var $=u.connectionPoint||g.defaultConnectionPoint,Y=i||e,j=new vt(Y,n);L=this.getConnectionPoint($,d,b,j,"target")}else L=n;return{source:P,target:L}},getAnchor:function(t,e,n,r,i){var s=e.isNodeConnection(n),o=this.paper.options;if(t||(s?t=o.defaultLinkAnchor:o.perpendicularLinks||this.options.perpendicular?t={name:"perpendicular"}:t=o.defaultAnchor),!t)throw new Error("Anchor required.");var u;if(typeof t=="function")u=t;else{var l=t.name,d=s?"linkAnchorNamespace":"anchorNamespace";if(u=o[d][l],typeof u!="function")throw new Error("Unknown anchor: "+l)}var g=u.call(this,e,n,r,t.args||{},i,this);return g?g.round(this.decimalsRounding):new D},getConnectionPoint:function(t,e,n,r,i){var s,o=r.end,u=this.paper.options;if(typeof u.linkConnectionPoint=="function"){var l=n===e.el?void 0:n;if(s=u.linkConnectionPoint(this,e,l,r.start,i),s)return s}if(!t)return o;var d;if(typeof t=="function")d=t;else{var g=t.name;if(d=u.connectionPointNamespace[g],typeof d!="function")throw new Error("Unknown connection point: "+g)}return s=d.call(this,r,e,n,t.args||{},i,this),s?s.round(this.decimalsRounding):o},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_getDefaultLabelPositionProperty:function(){var t=this.model,e=t._builtins.defaultLabel,n=e.position,r=t._getDefaultLabel(),i=this._normalizeLabelPosition(r.position);return ye({},n,i)},_normalizeLabelPosition:function(t){return typeof t=="number"?{distance:t,offset:null,angle:0,args:null}:t},_mergeLabelPositionProperty:function(t,e){return t===null?null:t===void 0?e===null?null:e:ye({},e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.path;if(!t)return this;var e=this.model,n=e.get("labels")||[];if(!n.length)return this;for(var r=this._getDefaultLabelPositionProperty(),i=0,s=n.length;i<s;i++){var o=this._labelCache[i];if(o){var u=n[i],l=this._normalizeLabelPosition(u.position),d=this._mergeLabelPositionProperty(l,r),g=this._getLabelTransformationMatrix(d);o.setAttribute("transform",rt.matrixToTransformString(g)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:n}=this,r=n[t];if(r)for(let i in r){const{id:s}=r[i];s&&s in e&&delete e[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(n-i),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("display","inline")}else this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(Wt.css(this._V.markerArrowheads.node,"display")==="none")return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){const{model:e,paper:n}=this,r=`${t}View`,i=e.get(t),s=i&&i.id;if(!s)return this[r]=null,this.updateEndMagnet(t),!0;const o=n.getModelById(s);if(!o)throw new Error("LinkView: invalid "+t+" cell.");const u=o.findView(n);return u?(this[r]=u,this.updateEndMagnet(t),!0):!1},updateEndMagnet:function(t){const e=`${t}Magnet`,n=this.getEndView(t);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(t));r===n.el&&(r=null),this[e]=r}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=Yt(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(t){return this.model.label(t).position||{}},_getLabelPositionAngle:function(t){var e=this._getLabelPositionProperty(t);return e.angle||0},_getLabelPositionArgs:function(t){var e=this._getLabelPositionProperty(t);return e.args},_getDefaultLabelPositionArgs:function(){var t=this.model._getDefaultLabel(),e=t.position||{};return e.args},_mergeLabelPositionArgs:function(t,e){return t===null?null:t===void 0?e===null?null:e:ye({},e,t)},addLabel:function(t,e,n,r){var i,s,o=0,u;typeof t!="number"?(i=t.x,s=t.y,typeof e=="number"?(o=e,u=n):u=e):(i=t,s=e,typeof n=="number"?(o=n,u=r):u=n);var l=this._getDefaultLabelPositionArgs(),d=u,g=this._mergeLabelPositionArgs(d,l),h={position:this.getLabelPosition(i,s,o,g)},b=-1;return this.model.insertLabel(b,h,u),b},addVertex:function(t,e,n){var r=typeof t!="number",i=r?t.x:t,s=r?t.y:e,o=r?e:n,u={x:i,y:s},l=this.getVertexIndex(i,s);return this.model.insertVertex(l,u,o),l},sendToken:function(t,e,n){function r(h,b){return function(){h.remove(),typeof b=="function"&&b()}}var i,s,o;te(e)?(i=e.duration,s=e.direction==="reverse",o=e.connection):(i=e,s=!1,o=null),i=i||1e3;var u={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(u.keyPoints="1;0",u.keyTimes="0;1");var l=rt(t),d;if(typeof o=="string")d=this.findBySelector(o,this.el,this.selectors)[0];else{var g=this._V;d=g.connection?g.connection.node:this.el.querySelector("path")}if(!(d instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");l.appendTo(this.paper.cells).animateAlongPath(u,d),setTimeout(r(l,n),i)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||sy,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n)if(r)n=r;else return t.map(D);var i=ue(n)?n:e[n.name];if(!ue(i))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var s=n.args||{},o=i.call(this,t,s,this);return o||t.map(D)},findPath:function(t,e,n){var r=this.paper.options.connectorNamespace||ky,i=this.model.connector(),s=this.paper.options.defaultConnector;i||(i=s||{});var o=ue(i)?i:r[i.name];if(!ue(o))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var u=bn(i.args||{});u.raw=!0;var l=o.call(this,e,n,t,u,this);return typeof l=="string"&&(l=new wt(rt.normalizePathData(l))),l},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n,n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n,n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n,n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(qe(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,r){var i={},s=0,o;typeof n=="number"?(s=n,o=r):o=n,o&&(i.args=o);var u=!(o&&o.absoluteDistance),l=o&&o.absoluteDistance&&o.reverseDistance,d=o&&o.absoluteOffset,g=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},b=new D(t,e),P=g.closestPointT(b,h),A=g.lengthAtT(P,h);u&&(A=A/this.getConnectionLength()||0),l&&(A=-1*(this.getConnectionLength()-A)||1),i.distance=A;var E;d||(E=g.tangentAtT(P));var N;if(E)N=E.pointOffset(b);else{var L=g.pointAtT(P),$=b.difference(L);N={x:$.x,y:$.y}}return i.offset=N,i.angle=s,i},_getLabelTransformationMatrix:function(t){var e,n=0,r={};if(typeof t=="number")e=t;else if(typeof t.distance=="number")r=t.args||{},e=t.distance,n=t.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=e>0&&e<=1,s=0,o={x:0,y:0};if(t.offset){var u=t.offset;typeof u=="number"&&(s=u),u.x&&(o.x=u.x),u.y&&(o.y=u.y)}var l=o.x!==0||o.y!==0||s===0,d=r.keepGradient,g=r.ensureLegibility,h=this.path,b={segmentSubdivisions:this.getConnectionSubdivisions()},P=i?e*this.getConnectionLength():e,A=h.tangentAtLength(P,b),E,N=n;if(A){if(l)E=A.start.clone(),E.offset(o);else{var L=A.clone();L.rotate(A.start,-90),L.setLength(s),E=L.end}d&&(N=A.angle()+n,g&&(N=fn((N+90)%180-90)))}else E=h.start.clone(),l&&E.offset(o);return rt.createSVGMatrix().translate(E.x,E.y).rotate(N)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new D(e.e,e.f)},getVertexIndex:function(t,e){for(var n=this.model,r=n.vertices(),i=this.getClosestPointLength(new D(t,e)),s=0,o=r.length;s<o;s++){var u=r[s],l=this.getClosestPointLength(u);if(i<l)break}return s},notifyPointerdown(t,e,n){zt.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove(t,e,n){zt.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("link:pointerup",t,e,n),zt.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){zt.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){zt.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){zt.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n);var r=t.target.getAttribute("class");switch(r){case"marker-vertex":this.dragVertexStart(t,e,n);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(t,e,n);return;case"marker-arrowhead":this.dragArrowheadStart(t,e,n);return;case"connection":case"connection-wrap":this.dragConnectionStart(t,e,n);return;case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var r=this._dragData;r&&this.eventData(t,r);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n);break}r&&Et(r,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var r=this._dragData;r&&(this.eventData(t,r),this._dragData=null);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){zt.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){zt.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){zt.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){zt.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,r){zt.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){var i=rt(t.target).findParentByClass("link-tool",this.el);if(i){if(t.stopPropagation(),this.can("useLinkTools"))if(e==="remove"){this.model.remove({ui:!0});return}else this.notify(e,t,n,r);this.notifyPointerdown(t,n,r),this.paper.delegateDragEvents(this,t.data)}else zt.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n);var r=this.eventData(t).stopPropagation;r&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var r=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(t))return;var r=t.currentTarget,i=parseInt(r.getAttribute("label-idx"),10),s=this._getDefaultLabelPositionProperty(),o=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),u=this._mergeLabelPositionProperty(o,s),l=this.getLabelCoordinates(u),d=l.x-e,g=l.y-n,h=this._getLabelPositionAngle(i),b=this._getLabelPositionArgs(i),P=this._getDefaultLabelPositionArgs(),A=this._mergeLabelPositionArgs(b,P);this.eventData(t,{action:"label-move",labelIdx:i,dx:d,dy:g,positionAngle:h,positionArgs:A,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var r=t.target,i=r.getAttribute("end"),s=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(t,s)}},dragStart:function(t,e,n){this.isDefaultInteractionPrevented(t)||this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var r=this.eventData(t),i={position:this.getLabelPosition(e+r.dx,n+r.dy,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const s={ui:!0};this.paper.isAsync()&&t.type==="touchmove"&&(s.async=!1),this.model.label(r.labelIdx,i,s)},dragVertex:function(t,e,n){var r=this.eventData(t);this.model.vertex(r.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?!this._snapArrowhead(t,e,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(t,e,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var r=this.eventData(t);this.model.translate(e-r.dx,n-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var r=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,n),i.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0});break}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,r=t.initialEnd,i=this.model.prop(n),s=i&&!qr.endsEqual(r,i);if(s){var o=this.paper;r.id&&this.notify("link:disconnect",e,o.findViewByModel(r.id),t.initialMagnet,n),i.id&&this.notify("link:connect",e,o.findViewByModel(i.id),t.magnetUnderPointer,n)}},_snapToPoints:function(t,e,n){let r=null,i=1/0,s=null,o=1/0,u=t.x,l=t.y;for(let d=0;d<e.length;d++){const g=Math.abs(e[d].x-t.x);g<i&&(i=g,r=e[d]);const h=Math.abs(e[d].y-t.y);h<o&&(o=h,s=e[d])}return i<n&&(u=r.x),o<n&&(l=s.y),{x:u,y:l}},_snapArrowheadSelf:function(t,e,n){const{paper:r,model:i}=this,{snapLinksSelf:s}=r.options,o=this.eventData(t),u=s.radius||20,l=this.getEndAnchor(o.arrowhead==="source"?"target":"source"),d=i.vertices(),g=[l,...d],h=this._snapToPoints({x:e,y:n},g,u),b=r.localToClientPoint(h);this._connectArrowhead(document.elementFromPoint(b.x,b.y),h.x,h.y,this.eventData(t))},_snapArrowhead:function(t,e,n){const{paper:r}=this,{snapLinks:i,connectionStrategy:s}=r.options,o=this.eventData(t);let u=!1;var l=i.radius||50,d=r.findViewsInArea({x:e-l,y:n-l,width:2*l,height:2*l}),g=o.closestView||null,h=o.closestMagnet||null,b=o.magnetProxy||null;o.closestView=o.closestMagnet=o.magnetProxy=null;var P=Number.MAX_VALUE,A=new D(e,n);d.forEach(function(nt){const ut=[];nt.el.getAttribute("magnet")!=="false"&&ut.push({bbox:nt.model.getBBox(),magnet:nt.el}),nt.$("[magnet]").toArray().forEach(c=>{ut.push({bbox:nt.getNodeBBox(c),magnet:c})}),ut.forEach(c=>{const{magnet:w,bbox:T}=c,_=T.center().squaredDistance(A);_<P&&(h===w||r.options.validateConnection.apply(r,o.validateConnectionArgs(nt,nt.el===w?null:w)))&&(P=_,o.closestView=nt,o.closestMagnet=w)})},this);var E,N=null,L=o.closestView,$=o.closestMagnet;$&&(N=o.magnetProxy=L.findProxyNode($,"highlighter"));var Y=o.arrowhead,j=h!==$;if(g&&j&&g.unhighlight(b,{connecting:!0,snapping:!0}),L){const{prevEnd:nt,prevX:ut,prevY:c}=o;if(o.prevX=e,o.prevY=n,u=!0,!j&&(typeof s!="function"||ut===e&&c===n)||(E=L.getLinkEnd($,e,n,this.model,Y),!j&&_r(nt,E)))return u;o.prevEnd=E,j&&L.highlight(N,{connecting:!0,snapping:!0})}else E={x:e,y:n};return this.model.set(Y,E||{x:e,y:n},{ui:!0}),g&&this.notify("link:snap:disconnect",t,g,h,Y),L&&this.notify("link:snap:connect",t,L,$,Y),u},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,r){const{paper:i,model:s}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const o=r.viewUnderPointer=i.findView(t);if(o){const u=r.magnetUnderPointer=o.findMagnet(t),l=r.magnetProxy=o.findProxyNode(u,"highlighter");u&&this.paper.options.validateConnection.apply(i,r.validateConnectionArgs(o,u))?l&&o.highlight(l,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,s.set(r.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t={},e,n){const{model:r}=this,{viewUnderPointer:i,magnetUnderPointer:s,magnetProxy:o,arrowhead:u}=t;if(!s||!o||!i)return;i.unhighlight(o,{connecting:!0});const l=i.getLinkEnd(s,e,n,r,u);r.set(u,l,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){t.z!==null&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e=[];e[4]=t,e[5]=this;var n,r=0,i=0;t==="source"?(r=2,n="target"):(i=2,n="source");var s=this.model.get(n);if(s.id){var o=e[r]=this.paper.findViewByModel(s.id),u=o.getMagnetFromLinkEnd(s);u===o.el&&(u=void 0),e[r+1]=u}function l(d,g){return e[i]=d,e[i+1]=d.el===g?void 0:g,e}return l},_markAvailableMagnets:function(t){function e(h,b){var P=h.paper,A=P.options.validateConnection;return A.apply(P,this.validateConnectionArgs(h,b))}var n=this.paper,r=n.model.getCells();t.marked={};for(var i=0,s=r.length;i<s;i++){var o=r[i].findView(n);if(o){var u=Array.prototype.slice.call(o.el.querySelectorAll("[magnet]"));o.el.getAttribute("magnet")!=="false"&&u.push(o.el);var l=u.filter(e.bind(t,o));if(l.length>0){for(var d=0,g=l.length;d<g;d++)o.highlight(l[d],{magnetAvailability:!0});o.highlight(null,{elementAvailability:!0}),t.marked[o.model.id]=l}}}},_unmarkAvailableMagnets:function(t){for(var e=Object.keys(t.marked),n,r,i=0,s=e.length;i<s;i++){n=e[i],r=t.marked[n];var o=this.paper.findViewByModel(n);if(o){for(var u=0,l=r.length;u<l;u++)o.unhighlight(r[u],{magnetAvailability:!0});o.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:bn(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),e.ignoreBackwardsCompatibility!==!0&&(this._dragData=n),n},onMount:function(){zt.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){zt.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){zt.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Ot});Object.defineProperty(ui.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new pt(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new pt(this.sourceAnchor):t.getNodeBBox(n||t.el)}});Object.defineProperty(ui.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new pt(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new pt(this.targetAnchor):t.getNodeBBox(n||t.el)}});const Iy=ln.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:n}=this,{useFirstSubpath:r}=n;let i;try{const s=rt(e);if(i=s.convertToPathData().trim(),s.tagName()==="PATH"&&r){const o=i.search(/.M/i)+1;o>0&&(i=i.substr(0,o))}}catch{const o=t.getNodeBoundingRect(e);i=rt.rectToPath(Et({},n,o.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:n,options:r}=this,{padding:i,layer:s}=r;let o=this.getNodeMatrix(t,e);if(i){!s&&e===t.el&&n.remove();let u=t.getNodeBoundingRect(e);const l=u.x+u.width/2,d=u.y+u.height/2;u=rt.transformRect(u,o);const g=Math.max(u.width,1),h=Math.max(u.height,1),b=(g+i)/g,P=(h+i)/h,A=rt.createSVGMatrix({a:b,b:0,c:0,d:P,e:l-b*l,f:d-P*d});o=o.multiply(A)}n.attr({d:this.getPathData(t,e),transform:rt.matrixToTransformString(o)})},highlight(t,e){const{vel:n,options:r}=this;n.attr(r.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),qc=20;function Ry(t,e){const n=t.children();for(;n.length>0;){const r=n.shift();e(r)&&n.push(...r.children())}}const Dy=ln.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:qc,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:i}=this,s=e.tagName();if(!rt.isSVGGraphicsElement(e)||i.includes(s))return e.remove(),!1;if(r.includes(s)){const o=t.vel.findOne(`#${e.id}`);if(o){const{node:u}=o;let l=t.getNodeBoundingRect(u);t.model.isElement()&&(l=rt.transformRect(l,t.getNodeMatrix(u)));const d=rt("rect",l.toJSON()),{x:g,y:h}=l.center(),{angle:b,cx:P=g,cy:A=h}=o.rotate();b&&d.rotate(b,P,A),e.parent().append(d)}return e.remove(),!1}return n.forEach(o=>{o==="fill"&&e.attr("fill")==="none"||e.removeAttr(o)}),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(r=>{e.removeAttr(r)})},getMaskShape(t,e){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:i}=n,s=e.tagName();let o;if(s==="G"){if(!i)return null;o=e.clone(),Ry(o,u=>this.transformMaskChild(t,u))}else{if(r.includes(s))return null;o=e.clone()}return this.transformMaskRoot(t,o),o},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:n,INVISIBLE:r,options:i}=this,{padding:s,attrs:o}=i,u="stroke-width"in o?o["stroke-width"]:1,l=e.attr("fill")!=="none";let d=parseFloat(e.attr("stroke-width"));isNaN(d)&&(d=1);const g=d+s*2,h=g+u*2;let b=this.getMaskShape(t,e);if(!b){const P=t.getNodeBoundingRect(e.node);P.inflate(P.width?0:.5,P.height?0:.5),b=rt("rect",P.toJSON())}return b.attr(o),rt("mask",{id:this.getMaskId()}).append([b.clone().attr({fill:l?n:"none",stroke:n,"stroke-width":h}),b.clone().attr({fill:l?r:"none",stroke:r,"stroke-width":g})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:n,vel:r}=this,{padding:i,attrs:s,maskClip:o=qc,layer:u}=n,l="stroke"in s?s.stroke:"#000000";!u&&e===t.el&&r.remove();const d=t.getNodeBoundingRect(e).inflate(i+o),g=this.getNodeMatrix(t,e),h=this.getMask(t,rt(e));this.addMask(t.paper,h),r.attr(d.toJSON()),r.attr({transform:rt.matrixToTransformString(g),mask:`url(#${h.id})`,fill:l})},unhighlight(t){this.removeMask(t.paper)}}),Fy=ln.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:cn("highlight-opacity"),highlight:function(t,e){rt(e).addClass(this.opacityClassName)},unhighlight:function(t,e){rt(e).removeClass(this.opacityClassName)}}),Gc=cn("highlighted"),By=ln.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Gc},highlight:function(t,e){rt(e).addClass(this.options.className)},unhighlight:function(t,e){rt(e).removeClass(this.options.className)}},{className:Gc}),Co={ROW:"row",COLUMN:"column"},Vy=ln.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(t,e){const n=t.model,{attribute:r,size:i=20,gap:s=5,direction:o=Co.ROW}=this.options;if(!r)throw new Error("List: attribute is required");const u=typeof i=="number"?{width:i,height:i}:i,l=o===Co.ROW,d=l?u.width:u.height;let g=n.get(r);Array.isArray(g)||(g=[]);const h=this._prevItems||[],b=g.map((N,L)=>_r(h[L],g[L]));if(h.length!==g.length||b.some(N=>!N)){const N=this.vel.children(),L=g.map(($,Y)=>{const j=Y in N?N[Y].node:null;if(b[Y])return j;const nt=this.createListItem($,u,j);if(!nt)return null;if(!(nt instanceof SVGElement))throw new Error("List: item must be an SVGElement");nt.dataset.index=Y,nt.dataset.attribute=r;const ut=Y*(d+s);return nt.setAttribute("transform",l?`translate(${ut}, 0)`:`translate(0, ${ut})`),nt});this.vel.empty().append(L),this._prevItems=g}const P=g.length,A=P===0?0:P*d+(P-1)*s,E=l?{width:A,height:u.height}:{width:u.width,height:A};this.position(n,E)},position(t,e){const{vel:n,options:r}=this,{margin:i=5,position:s="top-left"}=r,{width:o,height:u}=t.size(),{left:l,right:d,top:g,bottom:h}=ar(i),b=new pt(l,g,o-(l+d),u-(g+h));let{x:P,y:A}=Wh(b,s);switch(s){case he.CENTER:case he.TOP:case he.BOTTOM:{P-=e.width/2;break}case he.RIGHT:case he.BOTTOM_RIGHT:case he.TOP_RIGHT:{P-=e.width;break}}switch(s){case he.CENTER:case he.RIGHT:case he.LEFT:{A-=e.height/2;break}case he.BOTTOM:case he.BOTTOM_RIGHT:case he.BOTTOM_LEFT:{A-=e.height;break}}n.attr("transform",`translate(${P}, ${A})`)}},{Directions:Co,Positions:he}),zy=Object.freeze(Object.defineProperty({__proto__:null,addClass:By,list:Vy,mask:Dy,opacity:Fy,stroke:Iy},Symbol.toStringTag,{value:"Module"}));function $y(t,e,n,r){var i="ratio"in r?r.ratio:.5;return t.getPointAtRatio(i)}function Hy(t,e,n,r){var i="length"in r?r.length:20;return t.getPointAtLength(i)}function qy(t,e,n,r){var i=1e6,s=t.getConnection(),o=t.getConnectionSubdivisions(),u=new vt(n.clone().offset(0,i),n.clone().offset(0,-i)),l=new vt(n.clone().offset(i,0),n.clone().offset(-i,0)),d=u.intersect(s,{segmentSubdivisions:o}),g=l.intersect(s,{segmentSubdivisions:o}),h=[];return d&&Array.prototype.push.apply(h,d),g&&Array.prototype.push.apply(h,g),h.length>0?n.chooseClosest(h):"fallbackAt"in r?cd(t,r.fallbackAt):ld(t,e,n,r)}function Gy(t,e,n,r){var i=t.getClosestPoint(n);return i||new D}function Ni(t){return function(e,n,r,i){if(r instanceof Element){var s=this.paper.findView(r),o;if(s)if(s.isNodeConnection(r)){var u="fixedAt"in i?i.fixedAt:"50%";o=cd(s,u)}else o=s.getNodeBBox(r).center();else o=new D;return t.call(this,e,n,o,i)}return t.apply(this,arguments)}}function cd(t,e){var n=parseFloat(e);return qe(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}const Uy=Ni(qy),ld=Ni(Gy),Wy=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:ld,connectionLength:Hy,connectionPerpendicular:Uy,connectionRatio:$y,resolveRef:Ni},Symbol.toStringTag,{value:"Module"}));function qs(t,e,n){if(ge(n)){const{x:i,y:s}=n;if(isFinite(s)){const o=new vt(e,t),{start:u,end:l}=o.parallel(s);e=u,t=l}n=i}if(!isFinite(n))return t;var r=t.distance(e);return n===0&&r>0?t:t.move(e,-Math.min(n,r-1))}function fu(t){var e=t.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function Yy(t,e,n=0){let r,i,s,o;const{start:u,end:l}=t;switch(e){case"left":r="x",i=l,s=u,o=-1;break;case"right":r="x",i=u,s=l,o=1;break;case"top":r="y",i=l,s=u,o=-1;break;case"bottom":r="y",i=u,s=l,o=1;break;default:return}u[r]<l[r]?i[r]=s[r]:s[r]=i[r],isFinite(n)&&(i[r]+=o*n,s[r]+=o*n)}function jy(t,e,n,r){let{offset:i,alignOffset:s,align:o}=r;return o&&Yy(t,o,s),qs(t.end,t.start,i)}function fd(t,e,n,r){var i=e.getNodeBBox(n);r.stroke&&i.inflate(fu(n)/2);var s=t.intersect(i),o=s?t.start.chooseClosest(s):t.end;return qs(o,t.start,r.offset)}function Xy(t,e,n,r){var i=e.model.angle();if(i===0)return fd(t,e,n,r);var s=e.getNodeUnrotatedBBox(n);r.stroke&&s.inflate(fu(n)/2);var o=s.center(),u=t.clone().rotate(o,i),l=u.setLength(1e6).intersect(s),d=l?u.start.chooseClosest(l).rotate(o,-i):t.end;return qs(d,t.start,r.offset)}function Zy(t){if(!t)return null;var e=t;do{var n=e.tagName;if(typeof n!="string")return null;if(n=n.toUpperCase(),n==="G")e=e.firstElementChild;else if(n==="TITLE")e=e.nextElementSibling;else break}while(e);return e}var _o="segmentSubdivisons",Lo="shapeBBox";function Jy(t,e,n,r){var i,s,o=r.selector,u=t.end;if(typeof o=="string"?i=e.findBySelector(o)[0]:o===!1?i=n:Array.isArray(o)?i=xi(n,o):i=Zy(n),!rt.isSVGGraphicsElement(i)){if(i===n||!rt.isSVGGraphicsElement(n))return u;i=n}var l=e.getNodeShape(i),d=e.getNodeMatrix(i),g=e.getRootTranslateMatrix(),h=e.getRootRotateMatrix(),b=g.multiply(h).multiply(d),P=b.inverse(),A=rt.transformLine(t,P),E=A.start.clone(),N=e.getNodeData(i);if(r.insideout===!1){N[Lo]||(N[Lo]=l.bbox());var L=N[Lo];if(L.containsPoint(E))return u}var $;if(l instanceof wt){var Y=r.precision||2;N[_o]||(N[_o]=l.getSegmentSubdivisions({precision:Y})),$={precision:Y,segmentSubdivisions:N[_o]}}r.extrapolate===!0&&A.setLength(1e6),s=A.intersect(l,$),s?rt.isArray(s)&&(s=E.chooseClosest(s)):r.sticky===!0&&(l instanceof pt?s=l.pointNearestToPoint(E):l instanceof Ne?s=l.intersectionWithLineFromCenterToPoint(E):s=l.closestPoint(E,$));var j=s?rt.transformPoint(s,b):u,nt=r.offset||0;return r.stroke&&(nt+=fu(i)/2),qs(j,t.start,nt)}const Ky=jy,Qy=fd,t0=Xy,e0=Jy,n0=Object.freeze(Object.defineProperty({__proto__:null,anchor:Ky,bbox:Qy,boundary:e0,rectangle:t0},Symbol.toStringTag,{value:"Module"}));function kn(t){return function(e,n,r,i){var s=!!i.rotate,o=s?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),u=o[t](),l=i.dx;if(l){var d=qe(l);l=parseFloat(l),isFinite(l)&&(d&&(l/=100,l*=o.width),u.x+=l)}var g=i.dy;if(g){var h=qe(g);g=parseFloat(g),isFinite(g)&&(h&&(g/=100,g*=o.height),u.y+=g)}return s?u.rotate(e.model.getBBox().center(),-e.model.angle()):u}}function r0(t,e,n,r){var i=t.model.angle(),s=t.getNodeBBox(e),o=s.center(),u=s.origin(),l=s.corner(),d=r.padding;if(isFinite(d)||(d=0),u.y+d<=n.y&&n.y<=l.y-d){var g=n.y-o.y;o.x+=i===0||i===180?0:g*1/Math.tan($e(i)),o.y+=g}else if(u.x+d<=n.x&&n.x<=l.x-d){var h=n.x-o.x;o.y+=i===90||i===270?0:h*Math.tan($e(i)),o.x+=h}return o}function i0(t,e,n,r){var i=!!r.rotate,s,o,u;i?(s=t.getNodeUnrotatedBBox(e),u=t.model.getBBox().center(),o=t.model.angle()):s=t.getNodeBBox(e);var l=r.padding;isFinite(l)&&s.inflate(l),i&&n.rotate(u,o);var d=s.sideNearestToPoint(n),g;switch(d){case"left":g=s.leftMiddle();break;case"right":g=s.rightMiddle();break;case"top":g=s.topMiddle();break;case"bottom":g=s.bottomMiddle();break}return i?g.rotate(u,-o):g}function s0(t,e,n,r,i){return t.model.getPointFromConnectedLink(this.model,i).offset(r.dx,r.dy)}const o0=kn("center"),a0=kn("topMiddle"),u0=kn("bottomMiddle"),c0=kn("leftMiddle"),l0=kn("rightMiddle"),f0=kn("origin"),h0=kn("topRight"),d0=kn("bottomLeft"),g0=kn("corner"),p0=Ni(r0),v0=Ni(i0),m0=s0,y0=Object.freeze(Object.defineProperty({__proto__:null,bottom:u0,bottomLeft:d0,bottomRight:g0,center:o0,left:c0,midSide:v0,modelCenter:m0,perpendicular:p0,right:l0,top:a0,topLeft:f0,topRight:h0},Symbol.toStringTag,{value:"Module"})),Sr={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},x0=50,Uc=20,Wc=1e3,b0=1/0,rs=9007199254740991,Mo=zt.Highlighting,Yc={[Mo.DEFAULT]:{name:"stroke",options:{padding:3}},[Mo.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[Mo.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},w0=[{name:un.BACK},{name:un.CELLS},{name:un.LABELS},{name:un.FRONT},{name:un.TOOLS}],q0=Rr.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:is,linkView:ui,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:Yc,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new qr,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return e.getAttribute("magnet")!=="passive"},validateConnection:function(t,e,n,r,i,s){return(i==="target"?n:t)instanceof is},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Sr.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(t,e,n,r,i){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||i.requestConnectedLinksUpdate(t,n,r)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:zy,anchorNamespace:y0,linkAnchorNamespace:Wy,connectionPointNamespace:n0,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace=typeof joint<"u"&&Hn(joint,"shapes")?joint.shapes:null);const n=this.model=t.model||new td;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=Wt(e.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var r=n.position;this.isAsync()||!ze(r)?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),r===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Sr.APPROX){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:i,defaultLinkAnchor:s,origin:o,highlighting:u,cellViewNamespace:l,interactive:d}=t;!l&&typeof joint<"u"&&Hn(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),ue(e)||(t.defaultConnector=Je(e)),ue(n)||(t.defaultRouter=Je(n)),ue(r)||(t.defaultConnectionPoint=Je(r)),ue(i)||(t.defaultAnchor=Je(i)),ue(s)||(t.defaultLinkAnchor=Je(s)),ge(d)&&(t.interactive=Et({},d)),ge(u)&&(t.highlighting=ou({},u,Yc)),t.origin=Et({},o)},children:function(){var t=rt.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:cn("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:cn("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:cn("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{childNodes:t,options:e}=this,{svg:n,defs:r,layers:i,background:s,grid:o}=t;return n.style.overflow=e.overflow?"visible":"hidden",this.svg=n,this.defs=r,this.layers=i,this.$background=Wt(s),this.$grid=Wt(o),this.renderLayers(),rt.ensureId(n),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=w0){this.removeLayers(),t.forEach(({name:i,sorted:s})=>{const o=new Mm({name:i});this.layers.appendChild(o.el),this._layers[i]=o});const e=this.getLayerView(un.CELLS),n=this.getLayerView(un.TOOLS),r=this.getLayerView(un.LABELS);this.tools=n.el,this.cells=this.viewport=e.el,e.vel.addClass(cn("viewport")),r.vel.addClass(cn("viewport"))},removeLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].remove(),delete t[e]})},resetLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(t===void 0){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),rt.createSVGMatrix(t)}t=rt.createSVGMatrix(t);var r=rt.matrixToTransformString(t);return e.setAttribute("transform",r),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return rt.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof zt)for(var r=t.model,i=this.model.getConnectedLinks(r),s=0,o=i.length;s<o;s++){var u=i[s],l=this.findViewByModel(u);if(l){var d=["UPDATE"];u.getTargetCell()===r&&d.push("TARGET"),u.getSourceCell()===r&&d.push("SOURCE");var g=Math.max(e+1,l.UPDATE_PRIORITY);this.scheduleViewUpdate(l,l.getFlag(d),g,n)}}},forcePostponedViewUpdate:function(t,e){if(!t||!(t instanceof zt))return!1;var n=t.model;if(n.isElement())return!1;if(!(e&t.getFlag(["SOURCE","TARGET"]))){var r={silent:!0},i=0,s=this.findViewByModel(n.getSourceCell());s&&!this.isViewMounted(s)&&(i=this.dumpView(s,r),t.updateEndMagnet("source"));var o=0,u=this.findViewByModel(n.getTargetCell());if(u&&!this.isViewMounted(u)&&(o=this.dumpView(u,r),t.updateEndMagnet("target")),i===0&&o===0)return!this.dumpView(t,r)}return!1},requestViewUpdate:function(t,e,n,r){r||(r={}),this.scheduleViewUpdate(t,e,n,r);var i=this.isAsync();if(!(this.isFrozen()||i&&r.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var s=this.updateViews(r);i&&this.notifyAfterRender(s,r)}},scheduleViewUpdate:function(t,e,n,r){const{_updates:i,options:s}=this;i.idle&&s.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:o,FLAG_INSERT:u,UPDATE_PRIORITY:l,cid:d}=t;let g=i.priorities[n];if(g||(g=i.priorities[n]={}),n>l)for(let P=n-1;P>=l;P--){const A=i.priorities[P];!A||!(d in A)||(g[d]|=A[d],delete A[d])}let h=g[d]||0;if((h&e)===e)return;h||i.count++,e&o&&h&u?g[d]^=u:e&u&&h&o&&(g[d]^=o),g[d]|=e;const b=s.onViewUpdate;typeof b=="function"&&b.call(this,t,e,n,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,n=t.cid,r=e.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|r[n];return delete r[n],i},dumpView:function(t,e={}){const n=this.dumpViewUpdate(t);if(!n)return 0;const r=!e.silent;r&&this.notifyBeforeRender(e);const i=this.updateView(t,n,e);if(r){const s={updated:1,priority:t.UPDATE_PRIORITY};this.notifyAfterRender(s,e)}return i},updateView:function(t,e,n){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:i,FLAG_INIT:s,model:o}=t;if(t instanceof zt){if(e&r)return this.removeView(o),0;if(e&i){const u=!!(e&s);u&&(e^=s),this.insertView(t,u),e^=i}}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var r=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],r},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var r=n.unmounted[e]||0;return delete n.unmounted[e],r},isViewMounted:function(t){if(!t)return!1;var e=t.cid,n=this._updates;return e in n.mounted},dumpViews:function(t){var e=Ze({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){this.notifyBeforeRender(t);let e,n=0,r=0,i=rs;do r++,e=this.updateViewsBatch(t),n+=e.updated,i=Math.min(e.priority,i);while(!e.empty);const s={updated:n,batches:r,priority:i};return this.notifyAfterRender(s,t),s},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let n=e.length;for(;n>0&&n--;)for(let r in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:rs});const{_updates:n,options:r}=this,i=n.id;if(i){Uo(i),e.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);const s=this.updateViewsBatch(t),o=Ze({},t,{mountBatchSize:Wc-s.mounted,unmountBatchSize:Wc-s.unmounted}),u=this.checkViewport(o),l=u.unmounted,d=u.mounted;let g=e.processed;const h=n.count;s.updated>0?(g+=s.updated+s.unmounted,s.processed=g,e.priority=Math.min(s.priority,e.priority),s.empty&&d===0?(s.unmounted+=l,s.mounted+=d,s.priority=e.priority,this.notifyAfterRender(s,t),e.processed=0,e.priority=rs,n.count=0):e.processed=g):n.idle||r.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",t));const b=t.progress;if(h&&typeof b=="function"&&b.call(this,s.empty,g,h,s,this),n.id!==i)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=Go(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;typeof e!="function"&&(e=this.options.beforeRender,typeof e!="function")||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let n=e.afterRender;typeof n!="function"&&(n=this.options.afterRender),typeof n=="function"&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||b0,n=this._updates,r=0,i=0,s=0,o=0,u=rs,l=!0,d=this.options,g=n.priorities,h="viewport"in t?t.viewport:d.viewport;typeof h!="function"&&(h=null);var b=d.onViewPostponed;typeof b!="function"&&(b=null);var P=Object.keys(g);t:for(var A=0,E=P.length;A<E;A++){var N=+P[A],L=g[N];for(var $ in L){if(r>=e){l=!1;break t}var Y=tr[$];if(!Y){delete L[$];continue}var j=L[$];if(!(j&Y.FLAG_REMOVE)){var nt=$ in n.unmounted;if(Y.DETACHABLE&&h&&!h.call(this,Y,!nt,this)){nt||(this.registerUnmountedView(Y),this.detachView(Y)),n.unmounted[$]|=j,delete L[$],s++;continue}nt&&(j|=Y.FLAG_INSERT,o++),j|=this.registerMountedView(Y)}var ut=this.updateView(Y,j,t);if(ut>0&&(L[$]=ut,!b||!b.call(this,Y,ut,this)||L[$])){i++,l=!1;continue}u>N&&(u=N),r++,delete L[$]}}return{priority:u,updated:r,postponed:i,unmounted:s,mounted:o,empty:l}},getUnmountedViews:function(){const t=this._updates,e=Object.keys(t.unmounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=tr[e[i]];return r},getMountedViews:function(){const t=this._updates,e=Object.keys(t.mounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=tr[e[i]];return r},checkUnmountedViews:function(t,e){e||(e={});var n=0;typeof t!="function"&&(t=null);for(var r=("mountBatchSize"in e)?e.mountBatchSize:1/0,i=this._updates,s=i.unmountedCids,o=i.unmounted,u=0,l=Math.min(s.length,r);u<l;u++){var d=s[u];if(d in o){var g=tr[d];if(g){if(g.DETACHABLE&&t&&!t.call(this,g,!1,this)){s.push(d);continue}n++;var h=this.registerMountedView(g);h&&this.scheduleViewUpdate(g,h,g.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,u),n},checkMountedViews:function(t,e){e||(e={});var n=0;if(typeof t!="function")return n;for(var r=("unmountBatchSize"in e)?e.unmountBatchSize:1/0,i=this._updates,s=i.mountedCids,o=i.mounted,u=0,l=Math.min(s.length,r);u<l;u++){var d=s[u];if(d in o){var g=tr[d];if(g){if(!g.DETACHABLE||t.call(this,g,!0,this)){s.push(d);continue}n++;var h=this.registerUnmountedView(g);h&&this.detachView(g)}}}return s.splice(0,u),n},checkViewVisibility:function(t,e={}){let n="viewport"in e?e.viewport:this.options.viewport;typeof n!="function"&&(n=null);const r=this._updates,{mounted:i,unmounted:s}=r,o=!t.DETACHABLE||!n||n.call(this,t,!1,this);let u=!1,l=!1;if(t.cid in i&&!o){this.registerUnmountedView(t)&&this.detachView(t);const h=r.mountedCids.indexOf(t.cid);r.mountedCids.splice(h,1),u=!0}if(!u&&t.cid in s&&o){const g=r.unmountedCids.indexOf(t.cid);r.unmountedCids.splice(g,1);var d=this.registerMountedView(t);d&&this.scheduleViewUpdate(t,d,t.UPDATE_PRIORITY,{mounting:!0}),l=!0}return{mounted:l?1:0,unmounted:u?1:0}},checkViewport:function(t){var e=Ze({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(n,e);if(r>0){var i=this._updates.unmountedCids;e.mountBatchSize=Math.min(i.length-r,e.mountBatchSize)}var s=this.checkUnmountedViews(n,e);return{mounted:s,unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,r=this.options.frozen,i=e.freezeKey;if(n&&n!==i){if(r&&i)return;e.freezeKey=n,e.keyFrozen=r}this.options.frozen=!0;var s=e.id;e.id=null,this.isAsync()&&s&&Uo(s)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,r=e.freezeKey;n&&r&&n!==r||(e.freezeKey=null,!(n&&n===r&&e.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Sr.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return ze(e)||(e=this.el.clientWidth),ze(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){const{options:n}=this,{width:r,height:i}=n;let s=t===void 0?r:t,o=e===void 0?i:e;if(r===s&&i===o)return;n.width=s,n.height=o,this._setDimensions();const u=this.getComputedSize();this.trigger("resize",u.width,u.height)},_setDimensions:function(){const{options:t}=this;let e=t.width,n=t.height;ze(e)&&(e=Math.round(e)),ze(n)&&(n=Math.round(n)),this.$el.css({width:e===null?"":e,height:n===null?"":n})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,n,r){te(t)?r=t:r=Et({gridWidth:t,gridHeight:e,padding:n},r);const{x:i,y:s,width:o,height:u}=this.getFitToContentArea(r),{sx:l,sy:d}=this.scale();return this.setOrigin(-i*l,-s*d),this.setDimensions(o*l,u*d),new pt(i,s,o,u)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,n=t.gridHeight||1,r=ar(t.padding||0),i=Math.max(t.minWidth||0,e),s=Math.max(t.minHeight||0,n),o=t.maxWidth||Number.MAX_VALUE,u=t.maxHeight||Number.MAX_VALUE,l=t.allowNewOrigin,d="contentArea"in t?new pt(t.contentArea):this.getContentArea(t),{sx:g,sy:h}=this.scale();d.x*=g,d.y*=h,d.width*=g,d.height*=h;let b=Math.ceil((d.width+d.x)/e),P=Math.ceil((d.height+d.y)/n);t.allowNegativeBottomRight||(b=Math.max(b,1),P=Math.max(P,1)),b*=e,P*=n;let A=0;(l==="negative"&&d.x<0||l==="positive"&&d.x>=0||l==="any")&&(A=Math.ceil(-d.x/e)*e,A+=r.left,b+=A);let E=0;return(l==="negative"&&d.y<0||l==="positive"&&d.y>=0||l==="any")&&(E=Math.ceil(-d.y/n)*n,E+=r.top,P+=E),b+=r.right,P+=r.bottom,b=Math.max(b,i),P=Math.max(P,s),b=Math.min(b,o),P=Math.min(P,u),new pt(-A/g,-E/h,b/g,P/h)},transformToFitContent:function(t){t||(t={});let e,n;if("contentArea"in t){const N=t.contentArea;e=this.localToPaperRect(N),n=new D(N)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(!e.width||!e.height)return;Ze(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const r=ar(t.padding),i=t.minScaleX||t.minScale,s=t.maxScaleX||t.maxScale,o=t.minScaleY||t.minScale,u=t.maxScaleY||t.maxScale;let l;if(t.fittingBBox)l=t.fittingBBox;else{const N=this.translate(),L=this.getComputedSize();l={x:N.tx,y:N.ty,width:L.width,height:L.height}}l=new pt(l).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const d=this.scale();let g=l.width/e.width*d.sx,h=l.height/e.height*d.sy;if(t.preserveAspectRatio&&(g=h=Math.min(g,h)),t.scaleGrid){const N=t.scaleGrid;g=N*Math.floor(g/N),h=N*Math.floor(h/N)}g=Math.min(s,Math.max(i,g)),h=Math.min(u,Math.max(o,h));const b={x:g/d.sx,y:h/d.sy},P=this.options.origin;let A=l.x-n.x*g-P.x,E=l.y-n.y*h-P.y;switch(t.verticalAlign){case"middle":E=E+(l.height-e.height*b.y)/2;break;case"bottom":E=E+(l.height-e.height*b.y);break}switch(t.horizontalAlign){case"middle":A=A+(l.width-e.width*b.x)/2;break;case"right":A=A+(l.width-e.width*b.x);break}this.scale(g,h),this.translate(A,E)},scaleContentToFit:function(t){this.transformToFitContent(t)},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new pt:rt(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let n;return ue(e)?n=e.apply(this,t):e===!0?n=this.getArea():e?n=new pt(e):n=null,n},createViewForModel:function(t){const{options:e}=this;var n,r,i=e.cellViewNamespace,s=t.get("type")+"View",o=xi(i,s,".");t.isLink()?(n=e.linkView,r=ui):(n=e.elementView,r=is);var u=n.prototype instanceof Se.View?o||n:n.call(this,t)||o||r;return new u({model:t,interactive:e.interactive,labelsLayer:e.labelsLayer===!0?un.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:n,_updates:r}=this,i=n[e];if(i){var{cid:s}=i;const{mounted:o,unmounted:u}=r;i.remove(),delete n[e],delete o[s],delete u[s]}return i},renderView:function(t,e){const{id:n}=t,r=this._views;let i,s,o=!0;return n in r&&(i=r[n],i.model===t?(s=i.FLAG_INSERT,o=!1):this.removeView(t)),o&&(i=r[n]=this.createViewForModel(t),i.paper=this,s=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(pe(i,"initFlag"))),this.requestViewUpdate(i,s,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews();const n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var r=0,i=t.length;r<i;r++)this.renderView(t[r],e);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){Tn(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var t=Wt(this.cells).children("[model-id]"),e=this.model.get("cells");Kv(t,function(n,r){var i=e.get(n.getAttribute("model-id")),s=e.get(r.getAttribute("model-id")),o=i.attributes.z||0,u=s.attributes.z||0;return o===u?0:o<u?-1:1})},insertView:function(t,e){const n=this.getLayerView(un.CELLS),{el:r,model:i}=t;switch(this.options.sorting){case Sr.APPROX:n.insertSortedNode(r,i.get("z"));break;case Sr.EXACT:default:n.insertNode(r);break}t.onMount(e)},detachView(t){t.unmount(),t.onDetach()},scale:function(t,e,n,r){if(t===void 0)return rt.matrixToScale(this.matrix());e===void 0&&(e=t),n===void 0&&(n=0,r=0);var i=this.translate();if(n||r||i.tx||i.ty){var s=i.tx-n*(t-1),o=i.ty-r*(e-1);this.translate(s,o)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var u=this.matrix();return u.a=t,u.d=e,this.matrix(u),this.trigger("scale",t,e,n,r),this},rotate:function(t,e,n){if(t===void 0)return rt.matrixToRotate(this.matrix());if(e===void 0){var r=this.cells.getBBox();e=r.width/2,n=r.height/2}var i=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(i),this},translate:function(t,e){if(t===void 0)return rt.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:i}=n;t||(t=0),e||(e=0);const s=this.matrix();if(s.e===t&&s.f===e)return this;s.e=t,s.f=e,this.matrix(s);const{tx:o,ty:u}=this.translate();return r.x=o,r.y=u,this.trigger("translate",o,u),i&&this.drawGrid(),this},findView:function(t){var e=Pe(t)?this.cells.querySelector(t):t instanceof Wt?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=Pe(t)||ze(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){t=new D(t);var e=this.model.getElements().map(this.findViewByModel,this);return e.filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=Ze(e||{},{strict:!1}),t=new pt(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(function(i){return i&&t[r](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){typeof t=="string"&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new D(t,e),r=rt.transformPoint(n,this.matrix());return r},localToPaperRect:function(t,e,n,r){var i=new pt(t,e,n,r),s=rt.transformRect(i,this.matrix());return s},paperToLocalPoint:function(t,e){var n=new D(t,e),r=rt.transformPoint(n,this.matrix().inverse());return r},paperToLocalRect:function(t,e,n,r){var i=new pt(t,e,n,r),s=rt.transformRect(i,this.matrix().inverse());return s},localToClientPoint:function(t,e){var n=new D(t,e),r=rt.transformPoint(n,this.clientMatrix());return r},localToClientRect:function(t,e,n,r){var i=new pt(t,e,n,r),s=rt.transformRect(i,this.clientMatrix());return s},clientToLocalPoint:function(t,e){var n=new D(t,e),r=rt.transformPoint(n,this.clientMatrix().inverse());return r},clientToLocalRect:function(t,e,n,r){var i=new pt(t,e,n,r),s=rt.transformRect(i,this.clientMatrix().inverse());return s},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var n=new D(t,e),r=n.difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(t,e,n,r){var i=this.pageOffset(),s=new pt(t,e,n,r);return s.x-=i.x,s.y-=i.y,this.paperToLocalRect(s)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new D(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof ui))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,r=this.model,i=r.constructor.validations;return!(!n.multiLinks&&!i.multiLinks.call(this,r,e)||!n.linkPinning&&!i.linkPinning.call(this,r,e)||typeof n.allowLink=="function"&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return ue(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:n}=t;const{highlighting:r,highlighterNamespace:i}=this.options;if(e===void 0){if(!r||n&&(e=r[n],e===!1))return!1;e||(e=r.default)}if(!e)return!1;Pe(e)&&(e={name:e});const s=e.name,o=i[s];if(!o)throw new Error('Unknown highlighter ("'+s+'")');if(typeof o.highlight!="function")throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if(typeof o.unhighlight!="function")throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:o,options:e.options||{},name:s}},onCellHighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:s}=r;i.highlight(t,e,s)},onCellUnhighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:s}=r;i.unhighlight(t,e,s)},pointerdblclick:function(t){t.preventDefault(),t=we(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){var e=this.eventData(t);if(e.mousemoved<=this.options.clickThreshold){t=we(t);var n=this.findView(t.target);if(this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n?n.pointerclick(t,r.x,r.y):this.trigger("blank:pointerclick",t,r.x,r.y)}},contextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}t=we(t),this.contextMenuTrigger(t)},contextMenuTrigger:function(t){var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=we(t);const{target:e,button:n}=t,r=this.findView(e),i=n===2;if(r){if(!i&&this.guard(t,r))return;const s=this.FORM_CONTROL_TAG_NAMES.includes(e.tagName);this.options.preventDefaultViewAction&&!s&&t.preventDefault(),s&&r.preventDefaultInteraction(t);const o=this.customEventTrigger(t,r);if(o){if(o.isPropagationStopped())return;t.data=o.data}const u=e.closest("[magnet]");if(u&&r.el!==u&&r.el.contains(u)){const l=we(Wt.Event(t.originalEvent,{data:t.data,currentTarget:u}));if(this.onmagnet(l),l.isDefaultPrevented()&&t.preventDefault(),l.isPropagationStopped()){if(i)return;this.delegateDragEvents(r,l.data);return}t.data=l.data}}if(i){this.contextMenuFired=!0;const s=Wt.Event(t.originalEvent,{type:"contextmenu",data:t.data});this.contextMenuTrigger(s)}else{const s=this.snapToGrid(t.clientX,t.clientY);r?r.pointerdown(t,s.x,s.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,s.x,s.y)),this.delegateDragEvents(r,t.data)}},pointermove:function(t){var e=this.eventData(t);e.mousemoved||(e.mousemoved=0,this.undelegateEvents());var n=++e.mousemoved;if(!(n<=this.options.moveThreshold)){t=we(t);var r=this.snapToGrid(t.clientX,t.clientY),i=e.sourceView;i?i.pointermove(t,r.x,r.y):this.trigger("blank:pointermove",t,r.x,r.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=we(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(Wt.Event(t.originalEvent,{type:"click",data:t.data})),this.delegateEvents()},mouseover:function(t){t=we(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=we(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=we(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const s=this.findView(n);i&&(s===i||(i.mouseenter(t),this.el.contains(n)))||s||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=we(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const s=this.findView(n);i&&(s===i||(i.mouseleave(t),this.el.contains(n)))||s||r===this.el&&this.trigger("paper:mouseleave",t)},_processMouseWheelEvtBuf:Fv(function(){const{event:t,deltas:e}=this._mw_evt_buffer,n=e.reduce((o,u)=>o+jv(u,x0),0),r=Math.pow(.995,n),{x:i,y:s}=this.clientToLocalPoint(t.clientX,t.clientY);this.trigger("paper:pinch",t,i,s,r),this._mw_evt_buffer={event:null,deltas:[]}},Uc,{maxWait:Uc}),mousewheel:function(t){t=we(t);const e=this.findView(t.target);if(this.guard(t,e))return;const n=t.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),{deltaX:i,deltaY:s}=Yv(n),o=this._events["paper:pinch"];if(t.ctrlKey&&o&&o.length>0)n.preventDefault(),this._mw_evt_buffer.event=n,this._mw_evt_buffer.deltas.push(s),this._processMouseWheelEvtBuf();else{const u=Math.max(-1,Math.min(1,n.wheelDelta));e?e.mousewheel(t,r.x,r.y,u):this.trigger("blank:mousewheel",t,r.x,r.y,u),this.trigger("paper:pan",t,i,s)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r){if(t=we(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,n,i.x,i.y)}}},magnetEvent:function(t,e){var n=t.currentTarget,r=n.getAttribute("magnet");if(r){var i=this.findView(n);if(i){if(t=we(t),this.guard(t,i))return;var s=this.snapToGrid(t.clientX,t.clientY);e.call(this,i,t,n,s.x,s.y)}}},onmagnet:function(t){if(t.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const e=Wt.Event(t.originalEvent,{type:"contextmenu",data:t.data,currentTarget:t.currentTarget});this.magnetContextMenuTrigger(e),e.isPropagationStopped()&&t.stopPropagation()}else this.magnetEvent(t,function(e,n,r,i,s){e.onmagnet(n,i,s)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(e,n,r,i,s){e.magnetpointerdblclick(n,r,i,s)})},magnetcontextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(t)},magnetContextMenuTrigger:function(t){this.magnetEvent(t,function(e,n,r,i,s){e.magnetcontextmenu(n,r,i,s)})},onlabel:function(t){var e=t.currentTarget,n=this.findView(e);if(!n||(t=we(t),this.guard(t,n)))return;const r=this.customEventTrigger(t,n,e);if(r){if(r.isPropagationStopped())return;t.data=r.data}var i=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,i.x,i.y)},getPointerArgs(t){const e=we(t),{x:n,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,n,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e)},guard:function(t,e){if(t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e))return!0;if(t.data&&t.data.guarded!==void 0)return t.data.guarded;const{target:n}=t;return this.GUARDED_TAG_NAMES.includes(n.tagName)?!0:!(e&&e.model&&e.model instanceof En||this.svg===n||this.el===n||Wt.contains(this.svg,n))},setGridSize:function(t){const{options:e}=this;return e.gridSize=t,e.drawGrid&&!e.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:rt("svg",{width:"100%",height:"100%"},rt("defs")),patterns:{},add:function(t,e){rt(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(rt("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return this.patterns[t]!==void 0}}),this._gridCache},setGrid:function(t){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var e=Array.isArray(t)?t:[t||{}];return e.forEach(function(n){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(n))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(Pe(t)&&Array.isArray(e[t]))return e[t].map(function(l){return Et({},l)});var n=t||{args:[{}]},r=Array.isArray(n),i=n.name;if(!r&&!i&&!n.markup&&(i="dot"),i&&Array.isArray(e[i])){var s=e[i].map(function(l){return Et({},l)}),o=Array.isArray(n.args)?n.args:[n.args||{}];Ze(o[0],yi(t,"args"));for(var u=0;u<o.length;u++)s[u]&&Et(s[u],o[u]);return s}return r?n:[n]},drawGrid:function(t){const e=this.options.drawGridSize||this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],r=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(o,u){var l="pattern_"+u,d=ye(o,n[u],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});d.width=e*(r.a||1)*(d.scaleFactor||1),d.height=e*(r.d||1)*(d.scaleFactor||1),i.exist(l)||i.add(l,rt("pattern",{id:l,patternUnits:"userSpaceOnUse"},rt(d.markup)));var g=i.get(l);ue(d.update)&&d.update(g.node.childNodes[0],d);var h=d.ox%d.width;h<0&&(h+=d.width);var b=d.oy%d.height;b<0&&(b+=d.height),g.attr({x:h,y:b,width:d.width,height:d.height})});var s=new XMLSerializer().serializeToString(i.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(t){t=t||{};var e=t.position||"center",n=t.size||"auto auto",r=this.scale(),i=this.translate();if(te(e)){var s=i.tx+r.sx*(e.x||0),o=i.ty+r.sy*(e.y||0);e=s+"px "+o+"px"}te(n)&&(n=new pt(n).scale(r.sx,r.sy),n=n.width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(!(t instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==e.id)){e=e||{};var n,r=e.size,i=e.repeat||"no-repeat",s=e.opacity||1,o=Math.abs(e.quality)||1,u=this.constructor.backgroundPatterns[$v(i)];if(ue(u)){t.width*=o,t.height*=o;var l=u(t,e);if(!(l instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=l.toDataURL("image/png"),i="repeat",te(r)?(r.width*=l.width/t.width,r.height*=l.height/t.height):r===void 0&&(e.size={width:l.width/o,height:l.height/o})}else n=t.src,r===void 0&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:s,backgroundRepeat:i,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=Je(t),Lr(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,Tn(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!te(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+Xi(JSON.stringify(t))),!this.isDefined(e)){var r=tm,i=r[n]&&r[n](t.args||{});if(!i)throw new Error("Non-existing filter "+n);var s=Et({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});rt(i,s).appendTo(this.defs)}return e},defineGradient:function(t){if(!te(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{type:r,id:i=r+e.id+Xi(JSON.stringify(t)),stops:s,attrs:o={}}=t;if(this.isDefined(i))return i;const u=Yt(s).map(({offset:d,color:g,opacity:h})=>rt("stop").attr({offset:d,"stop-color":g,"stop-opacity":Number.isFinite(h)?h:1})),l=rt(r,o,u);return l.id=i,l.appendTo(n),i},definePattern:function(t){if(!te(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+Xi(JSON.stringify(t)),markup:i,attrs:s={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const o=rt("pattern",{patternUnits:"userSpaceOnUse"});if(o.id=r,o.attr(s),typeof i=="string")o.append(rt(i));else{const{fragment:u}=ps(i);o.append(u)}return o.appendTo(n),r},defineMarker:function(t){if(!te(t))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+Xi(JSON.stringify(t)),markup:i,attrs:s={},markerUnits:o="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const u=rt("marker",{orient:"auto",overflow:"visible",markerUnits:o});u.id=r,u.attr(s);let l;if(i){let h;if(typeof i=="string")h=rt(i),h=Array.isArray(h)?h:[h];else{const{fragment:b}=ps(i);h=rt(b).children()}h.length>1?l=rt("g").append(h):l=h[0]}else{const{type:h="path"}=t;l=rt(h)}const d=yi(t,"type","id","markup","attrs","markerUnits");return Object.keys(d).forEach(h=>{const b=d[h],P=l.attr(h);if(P==null)l.attr(h,b);else switch(h){case"transform":l.attr(h,b+" "+P);break}}),l.appendTo(u),u.appendTo(n),r},customEventTrigger:function(t,e,n=e.el){const r=t.target.closest("[event]");if(r&&n!==r&&e.el.contains(r)){const i=we(Wt.Event(t.originalEvent,{data:t.data,currentTarget:r}));return this.onevent(i),i.isDefaultPrevented()&&t.preventDefault(),i}return null}},{sorting:Sr,Layers:un,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n*2,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=r*2;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,i=document.createElement("canvas");i.width=n*3,i.height=r*3;for(var s=i.getContext("2d"),o=ze(e.watermarkAngle)?-e.watermarkAngle:-20,u=$e(o),l=i.width/4,d=i.height/4,g=0;g<4;g++)for(var h=0;h<4;h++)(g+h)%2>0&&(s.setTransform(1,0,0,1,(2*g-1)*l,(2*h-1)*d),s.rotate(u),s.drawImage(t,-n/2,-r/2,n,r));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){rt(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;rt(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",rt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",rt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",rt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}}),A0={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(typeof n<"u")return n;try{n=e()}catch{n=!1}return this._results[t]=n,n}},T0=Re.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),S0=Re.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),P0=Re.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),E0=Re.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),C0=Re.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),_0=Re.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),L0=Re.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),M0=Re.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),O0=Re.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),N0=Re.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),k0=Re.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var Oo=10;const I0=Re.define("standard.Cylinder",{attrs:{body:{lateralArea:Oo,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:Oo,refRx:"50%",ry:Oo,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(t===void 0)return this.attr("body/lateralArea");var n=qe(t),r={lateralArea:t},i=n?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:r,top:i},e)}},{attributes:{lateralArea:{set:function(t,e){var n=qe(t);n&&(t=parseFloat(t)/100);var r=e.x,i=e.y,s=e.width,o=e.height,u=s/2,l=n?o*t:t,d=rt.KAPPA,g=d*u,h=d*(n?o*t:t),b=r,P=r+s/2,A=r+s,E=i+l,N=E-l,L=i+o-l,$=i+o,Y=["M",b,E,"L",b,L,"C",r,L+h,P-g,$,P,$,"C",P+g,$,A,L+h,A,L,"L",A,E,"C",A,E-h,P+g,N,P,N,"C",P-g,N,b,E-h,b,E,"Z"];return{d:Y.join(" ")}}}}});var R0={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},D0={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},F0=A0.test("svgforeignobject")?R0:D0;const B0=Re.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},F0]},{attributes:{text:{set:function(t,e,n,r){if(n instanceof HTMLElement)n.textContent=t;else{var i=r.style||{},s={text:t,width:-5,height:"100%"},o=Et({textVerticalAnchor:"middle"},i);return Uh.textWrap.set.call(this,s,e,n,o),{fill:i.color||null}}},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}}),V0=qr.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),z0=qr.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),$0=qr.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]}),G0=Object.freeze(Object.defineProperty({__proto__:null,BorderedImage:M0,Circle:S0,Cylinder:I0,DoubleLink:z0,Ellipse:P0,EmbeddedImage:O0,HeaderedRectangle:k0,Image:L0,InscribedImage:N0,Link:V0,Path:E0,Polygon:C0,Polyline:_0,Rectangle:T0,ShadowLink:$0,TextBlock:B0},Symbol.toStringTag,{value:"Module"}));export{S0 as C,P0 as E,td as G,V0 as L,q0 as P,T0 as R,rt as V,C0 as a,Re as b,is as c,Et as d,A0 as e,Jv as f,gc as g,Hn as h,zv as i,te as j,qr as k,G0 as l,ye as m,yi as o,H0 as s,Yt as t,Mi as u,dc as w};
